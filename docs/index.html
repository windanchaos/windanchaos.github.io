<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="docs/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="docs/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="docs/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="docs/images/logo.svg" color="#222">

<link rel="stylesheet" href="docs/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"windanchaos.github.io","root":"docs/","images":"docs/images","scheme":"Mist","darkmode":true,"version":"8.13.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="docs/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://windanchaos.github.io/docs/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale">
<meta property="article:author" content="windanchaos">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://windanchaos.github.io/docs/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hexo</title>
  






  <noscript>
    <link rel="stylesheet" href="docs/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="docs/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Hexo</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-首页"><a href="docs/" rel="section"><i class="home fa-fw"></i>首页</a></li><li class="menu-item menu-item-分类"><a href="docs/categories/" rel="section"><i class="th fa-fw"></i>分类</a></li><li class="menu-item menu-item-归档"><a href="docs/archives/" rel="section"><i class="archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-标签"><a href="docs/tags/" rel="section"><i class="tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-关于"><a href="docs/about/me.html" rel="section"><i class="user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="windanchaos"
      src="docs/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">windanchaos</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="docs/archives/">
          <span class="site-state-item-count">111</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="docs/categories/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="docs/tags/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/windanchaos" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;windanchaos" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://gitee.com/windanchaos" title="Gitee → https:&#x2F;&#x2F;gitee.com&#x2F;windanchaos" rel="noopener" target="_blank"><i class="gitee fa-fw"></i>Gitee</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:454722630@qq.com" title="E-Mail → mailto:454722630@qq.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/windanchaos" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;windanchaos" rel="noopener" target="_blank"><i class="weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/windanchaos" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;windanchaos" rel="noopener" target="_blank"><i class="CSDN fa-fw"></i>CSDN</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://windanchaos.github.io/docs/2022/06/22/ELF%E5%AD%A6%E4%B9%A0%E4%B8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="docs/images/avatar.jpeg">
      <meta itemprop="name" content="windanchaos">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="docs/2022/06/22/ELF%E5%AD%A6%E4%B9%A0%E4%B8%80/" class="post-title-link" itemprop="url">ELF学习一</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-06-22 22:24:37" itemprop="dateCreated datePublished" datetime="2022-06-22T22:24:37+08:00">2022-06-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-06-27 09:19:53" itemprop="dateModified" datetime="2022-06-27T09:19:53+08:00">2022-06-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="docs/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">计算机科学基础</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Excutable and Linking Format，ELF，有UNIX系统实验室发布并确定为应用程序二进制接口ABI（二进制程序标识所有工具集所遵循的一组运行时约定，包括：编译器、汇编器、连接器和语言运行时支持）的落地文件形式，其重要性不言而喻。</p>
<h1 id="ELF文件类型"><a href="#ELF文件类型" class="headerlink" title="ELF文件类型"></a>ELF文件类型</h1><p>ELF文件是由汇编器和连接器创建，是程序的二进制表示，以提供直接在目标处理器上执行的代码（指令）和数据。</p>
<p>ELF有三类文件类型，参与程序的构建和执行：</p>
<ul>
<li>可重定位 (relocatable file)，也叫静态链接库，包含部分可执行文件格式或者动态链接格式的数据或代码，需与其他两种格式进行整合</li>
<li>可执行（executable file），包含程序执行的所有代码和数据信息，被系统读取用于创建进程</li>
<li>共享对象文件（shared object file），也叫动态链接库，包含适合在以上两种文件格式中需要链接的代码和数据信息。</li>
</ul>
<p>我们以C代码来学习，main.c是主函数，引用了fun.c中的printHello函数：</p>
<p>main.c</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">extern</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> a)</span>;</span><br><span class="line"><span class="type">int</span> g1 = <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> g2;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">static</span> <span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="type">static</span> <span class="type">int</span> b = <span class="number">0</span>;</span><br><span class="line">  <span class="type">int</span> c = <span class="number">1</span>;</span><br><span class="line">  func(a+b+c);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;this main!&quot;</span>); </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>fun.c</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> value;</span><br><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> sum)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;sum is %d\n&quot;</span>,sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>gcc编译命令帮助：</p>
<p>  <em><em>-E                       Preprocess only; do not compile, assemble or link</em><br>  <em>-S                       Compile only; do not assemble or link</em> 只编译成汇编代码<br>  <em>-c                       Compile and assemble, but do not link</em> 编译二进制的ELF文件，没有连接<br>  -o <file>                Place the output into <file></em></p>
<p>我们只研究和ELF有关的gcc操作。下面，编译ELF文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -c fun.c main.c </span><br></pre></td></tr></table></figure>

<p>生成了对应.o的ELF文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -o main main.o fun.o</span><br></pre></td></tr></table></figure>

<p>生成了main的可执行ELF文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -shared -fPIC -o fun.so fun.c</span><br></pre></td></tr></table></figure>

<p>生成了fun.so的共享ELF文件。</p>
<p>命令readelf 可读取ELF文件，使用帮助查看相关参数。</p>
<p>查看文件的type类型是什么</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">readelf -h fun.o</span><br><span class="line">readelf -h fun.so</span><br><span class="line">readelf -h main</span><br></pre></td></tr></table></figure>

<p>ELF定义源码在linux文件&#x2F;user&#x2F;include&#x2F;elf.h中，相关的结构都能通过源码获取到。</p>
<h1 id="ELF内部的数据表示"><a href="#ELF内部的数据表示" class="headerlink" title="ELF内部的数据表示"></a>ELF内部的数据表示</h1><p>这里的数据指一切可以表示信息的二进制记录。</p>
<p>ELF文件支持具有8位字节和32位架构的处理器，其目的是在更大（更小）的体系结构中执行，具有平台无关性，因此，ELF的对象文件是以一种独立于执行机器的格式来表示控制数据，而数据则使用目标处理器进行编码和解释，而不管ELF是在哪台机器上创建的。即：</p>
<ul>
<li>ELF记录的控制信息无视处理器结构</li>
<li>ELF记录的操作数据按目标处理器解释</li>
</ul>
<p>ELF文件格式定义的所有数据结构都遵循特定的大小和对齐规则。如有必要，对应的struct结构体需要填充0以确保4字节对齐，相应的基础数据类型（1、2、4、8字节）均需对齐。处于可移植目的，ELF不实用位（1bit）。</p>
<p>以下是ELF的标准数据申明（代码注释请勿忽略）：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Standard ELF types.  */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdint.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Type for a 16-bit quantity.  */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint16_t</span> Elf32_Half;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint16_t</span> Elf64_Half;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Types for signed and unsigned 32-bit quantities.  */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint32_t</span> Elf32_Word;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int32_t</span>  Elf32_Sword;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint32_t</span> Elf64_Word;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int32_t</span>  Elf64_Sword;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Types for signed and unsigned 64-bit quantities.  */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint64_t</span> Elf32_Xword;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int64_t</span>  Elf32_Sxword;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint64_t</span> Elf64_Xword;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int64_t</span>  Elf64_Sxword;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Type of addresses.  */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint32_t</span> Elf32_Addr;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint64_t</span> Elf64_Addr;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Type of file offsets.  */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint32_t</span> Elf32_Off;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint64_t</span> Elf64_Off;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Type for section indices, which are 16-bit quantities.  */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint16_t</span> Elf32_Section;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint16_t</span> Elf64_Section;</span><br></pre></td></tr></table></figure>

<p>从上我们可以看出：</p>
<p>Half、Section、word（S）、Xword（S）都是位数无关的。</p>
<p>只有Add地址和Off偏移是地址有关的。</p>
<h1 id="Headers"><a href="#Headers" class="headerlink" title="Headers"></a>Headers</h1><p>header的设计目的是控制结构，描述、定位对应数据的结构和信息。</p>
<p><code>readelf -e fun.o</code></p>
<p><code>readelf -e fun.so</code></p>
<p><code>readelf -e main</code></p>
<p>有3个header：</p>
<h2 id="ELF文件自身的header"><a href="#ELF文件自身的header" class="headerlink" title="ELF文件自身的header"></a>ELF文件自身的header</h2><p>ELF文件自身的header，32位（以下都以32为主）结构体定了文件的header</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* The ELF file header.  This appears at the start of every ELF file.  */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EI_NIDENT (16)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> e_ident[EI_NIDENT];     <span class="comment">/* Magic number and other info */</span></span><br><span class="line">  Elf32_Half    e_type;                 <span class="comment">/* Object file type */</span></span><br><span class="line">  Elf32_Half    e_machine;              <span class="comment">/* Architecture */</span></span><br><span class="line">  Elf32_Word    e_version;              <span class="comment">/* Object file version */</span></span><br><span class="line">  Elf32_Addr    e_entry;                <span class="comment">/* Entry point virtual address */</span></span><br><span class="line">  Elf32_Off     e_phoff;                <span class="comment">/* Program header table file offset */</span></span><br><span class="line">  Elf32_Off     e_shoff;                <span class="comment">/* Section header table file offset */</span></span><br><span class="line">  Elf32_Word    e_flags;                <span class="comment">/* Processor-specific flags */</span></span><br><span class="line">  Elf32_Half    e_ehsize;               <span class="comment">/* ELF header size in bytes */</span></span><br><span class="line">  Elf32_Half    e_phentsize;            <span class="comment">/* Program header table entry size */</span></span><br><span class="line">  Elf32_Half    e_phnum;                <span class="comment">/* Program header table entry count */</span></span><br><span class="line">  Elf32_Half    e_shentsize;            <span class="comment">/* Section header table entry size */</span></span><br><span class="line">  Elf32_Half    e_shnum;                <span class="comment">/* Section header table entry count */</span></span><br><span class="line">  Elf32_Half    e_shstrndx;             <span class="comment">/* Section header string table index */</span></span><br><span class="line">&#125; Elf32_Ehdr;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Legal values for e_type (object file type).  */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ET_NONE         0               <span class="comment">/* No file type */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ET_REL          1               <span class="comment">/* Relocatable file */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ET_EXEC         2               <span class="comment">/* Executable file */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ET_DYN          3               <span class="comment">/* Shared object file */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ET_CORE         4               <span class="comment">/* Core file */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ET_NUM          5               <span class="comment">/* Number of defined types */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ET_LOOS         0xfe00          <span class="comment">/* OS-specific range start */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ET_HIOS         0xfeff          <span class="comment">/* OS-specific range end */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ET_LOPROC       0xff00          <span class="comment">/* Processor-specific range start */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ET_HIPROC       0xffff          <span class="comment">/* Processor-specific range end */</span></span></span><br></pre></td></tr></table></figure>

<p>e_type中包含了ELF的三大文件类型。</p>
<p>下面是bash中查看main.o的ELF文件头打印内容。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">/*打印的ELF header内容*/</span><br><span class="line">ELF Header:</span><br><span class="line">  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00 </span><br><span class="line">  Class:                             ELF64</span><br><span class="line">  Data:                              2<span class="string">&#x27;s complement, little endian</span></span><br><span class="line"><span class="string">  Version:                           1 (current)</span></span><br><span class="line"><span class="string">  OS/ABI:                            UNIX - System V</span></span><br><span class="line"><span class="string">  ABI Version:                       0</span></span><br><span class="line"><span class="string">  Type:                              REL (Relocatable file)</span></span><br><span class="line"><span class="string">  Machine:                           Advanced Micro Devices X86-64</span></span><br><span class="line"><span class="string">  Version:                           0x1</span></span><br><span class="line"><span class="string">  Entry point address:               0x0</span></span><br><span class="line"><span class="string">  Start of program headers:          0 (bytes into file)</span></span><br><span class="line"><span class="string">  Start of section headers:          936 (bytes into file)</span></span><br><span class="line"><span class="string">  Flags:                             0x0</span></span><br><span class="line"><span class="string">  Size of this header:               64 (bytes)</span></span><br><span class="line"><span class="string">  Size of program headers:           0 (bytes)</span></span><br><span class="line"><span class="string">  Number of program headers:         0</span></span><br><span class="line"><span class="string">  Size of section headers:           64 (bytes)</span></span><br><span class="line"><span class="string">  Number of section headers:         13</span></span><br><span class="line"><span class="string">  Section header string table index: 12</span></span><br></pre></td></tr></table></figure>

<p>ELF文件排布：</p>
<p>|     ELF header    |  Sections  |  Section header table |</p>
<p>从上面Header信息中，可得到如下大小相关信息</p>
<p>Header大小： Size of this header:               64 (bytes)</p>
<p>Sections大小：Start of section headers - Header 大小:          936byte -  64bytes</p>
<p>Section header table大小：Size of section headers * Number of section headers &#x3D; 13 * 64</p>
<p>整个文件大小为：64 + 936- 64 +  13 * 64&#x3D; 1768bytes</p>
<p>我们使用命令查看main.o的大小输出的也是1768：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> -c main.o</span><br></pre></td></tr></table></figure>

<h2 id="section的header"><a href="#section的header" class="headerlink" title="section的header"></a>section的header</h2><p>section（翻译为节）的header，描述节的信息。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Section header.  */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  Elf32_Word    sh_name;                <span class="comment">/* Section name (string tbl index) */</span></span><br><span class="line">  Elf32_Word    sh_type;                <span class="comment">/* Section type */</span></span><br><span class="line">  Elf32_Word    sh_flags;               <span class="comment">/* Section flags */</span></span><br><span class="line">  Elf32_Addr    sh_addr;                <span class="comment">/* Section virtual addr at execution */</span></span><br><span class="line">  Elf32_Off     sh_offset;              <span class="comment">/* Section file offset */</span></span><br><span class="line">  Elf32_Word    sh_size;                <span class="comment">/* Section size in bytes */</span></span><br><span class="line">  Elf32_Word    sh_link;                <span class="comment">/* Link to another section */</span></span><br><span class="line">  Elf32_Word    sh_info;                <span class="comment">/* Additional section information */</span></span><br><span class="line">  Elf32_Word    sh_addralign;           <span class="comment">/* Section alignment */</span></span><br><span class="line">  Elf32_Word    sh_entsize;             <span class="comment">/* Entry size if section holds table */</span></span><br><span class="line">&#125; Elf32_Shdr;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 截取 section header */</span></span><br><span class="line">Section Headers:</span><br><span class="line">  [Nr] Name              Type             Address           Offset</span><br><span class="line">       Size              EntSize          Flags  Link  Info  Align</span><br><span class="line">  [ <span class="number">0</span>]                   <span class="literal">NULL</span>             <span class="number">0000000000000000</span>  <span class="number">00000000</span></span><br><span class="line">       <span class="number">0000000000000000</span>  <span class="number">0000000000000000</span>           <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line">  [ <span class="number">1</span>] .text             PROGBITS         <span class="number">0000000000000000</span>  <span class="number">00000040</span></span><br><span class="line">       <span class="number">0000000000000044</span>  <span class="number">0000000000000000</span>  AX       <span class="number">0</span>     <span class="number">0</span>     <span class="number">1</span></span><br><span class="line">  [ <span class="number">2</span>] .rela.text        RELA             <span class="number">0000000000000000</span>  <span class="number">000002</span>a8</span><br><span class="line">       <span class="number">0000000000000078</span>  <span class="number">0000000000000018</span>   I      <span class="number">10</span>     <span class="number">1</span>     <span class="number">8</span></span><br><span class="line">  [ <span class="number">3</span>] .data             PROGBITS         <span class="number">0000000000000000</span>  <span class="number">00000084</span></span><br><span class="line">       <span class="number">0000000000000008</span>  <span class="number">0000000000000000</span>  WA       <span class="number">0</span>     <span class="number">0</span>     <span class="number">4</span></span><br><span class="line">  [ <span class="number">4</span>] .bss              NOBITS           <span class="number">0000000000000000</span>  <span class="number">0000008</span>c</span><br><span class="line">       <span class="number">0000000000000004</span>  <span class="number">0000000000000000</span>  WA       <span class="number">0</span>     <span class="number">0</span>     <span class="number">4</span></span><br><span class="line">  [ <span class="number">5</span>] .rodata           PROGBITS         <span class="number">0000000000000000</span>  <span class="number">0000008</span>c</span><br><span class="line">       <span class="number">000000000000000b</span>  <span class="number">0000000000000000</span>   A       <span class="number">0</span>     <span class="number">0</span>     <span class="number">1</span></span><br><span class="line">  [ <span class="number">6</span>] .comment          PROGBITS         <span class="number">0000000000000000</span>  <span class="number">00000097</span></span><br><span class="line">       <span class="number">000000000000002</span>e  <span class="number">0000000000000001</span>  MS       <span class="number">0</span>     <span class="number">0</span>     <span class="number">1</span></span><br><span class="line">  [ <span class="number">7</span>] .note.GNU-<span class="built_in">stack</span>   PROGBITS         <span class="number">0000000000000000</span>  <span class="number">000000</span>c5</span><br><span class="line">       <span class="number">0000000000000000</span>  <span class="number">0000000000000000</span>           <span class="number">0</span>     <span class="number">0</span>     <span class="number">1</span></span><br><span class="line">  [ <span class="number">8</span>] .eh_frame         PROGBITS         <span class="number">0000000000000000</span>  <span class="number">000000</span>c8</span><br><span class="line">       <span class="number">0000000000000038</span>  <span class="number">0000000000000000</span>   A       <span class="number">0</span>     <span class="number">0</span>     <span class="number">8</span></span><br><span class="line">  [ <span class="number">9</span>] .rela.eh_frame    RELA             <span class="number">0000000000000000</span>  <span class="number">00000320</span></span><br><span class="line">       <span class="number">0000000000000018</span>  <span class="number">0000000000000018</span>   I      <span class="number">10</span>     <span class="number">8</span>     <span class="number">8</span></span><br><span class="line">  [<span class="number">10</span>] .symtab           SYMTAB           <span class="number">0000000000000000</span>  <span class="number">00000100</span></span><br><span class="line">       <span class="number">0000000000000180</span>  <span class="number">0000000000000018</span>          <span class="number">11</span>    <span class="number">11</span>     <span class="number">8</span></span><br><span class="line">  [<span class="number">11</span>] .strtab           STRTAB           <span class="number">0000000000000000</span>  <span class="number">00000280</span></span><br><span class="line">       <span class="number">0000000000000028</span>  <span class="number">0000000000000000</span>           <span class="number">0</span>     <span class="number">0</span>     <span class="number">1</span></span><br><span class="line">  [<span class="number">12</span>] .shstrtab         STRTAB           <span class="number">0000000000000000</span>  <span class="number">00000338</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>section中的类型（Type），类型对节section的内容和语义进行了分了。具体参考下节section。</p>
<p>Offset是在文件中偏移位置（即该部分起始地址），Size为其大小。通过这2部分，就可以确认每个section的位置大小。由上一小节内容，我们知道elf 文件的header有64bytes，16进制为0x40，所以我们可以知道.tex的offset值00000040，是紧跟在elf的文件header之后的。使用命令验证：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">objdump -h main.o</span><br></pre></td></tr></table></figure>

<p>得到如下内容，也即各section的排布顺序：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Sections:</span><br><span class="line">Idx Name          Size      VMA               LMA               File off  Algn</span><br><span class="line">  0 .text         00000044  0000000000000000  0000000000000000  00000040  2**0</span><br><span class="line">                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE</span><br><span class="line">  1 .data         00000008  0000000000000000  0000000000000000  00000084  2**2</span><br><span class="line">                  CONTENTS, ALLOC, LOAD, DATA</span><br><span class="line">  2 .bss          00000004  0000000000000000  0000000000000000  0000008c  2**2</span><br><span class="line">                  ALLOC</span><br><span class="line">  3 .rodata       0000000b  0000000000000000  0000000000000000  0000008c  2**0</span><br><span class="line">                  CONTENTS, ALLOC, LOAD, READONLY, DATA</span><br><span class="line">  4 .comment      0000002e  0000000000000000  0000000000000000  00000097  2**0</span><br><span class="line">                  CONTENTS, READONLY</span><br><span class="line">  5 .note.GNU-stack 00000000  0000000000000000  0000000000000000  000000c5  2**0</span><br><span class="line">                  CONTENTS, READONLY</span><br><span class="line">  6 .eh_frame     00000038  0000000000000000  0000000000000000  000000c8  2**3</span><br><span class="line">                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, DATA</span><br></pre></td></tr></table></figure>



<h2 id="program的header"><a href="#program的header" class="headerlink" title="program的header"></a>program的header</h2><p>program的header，用于告知操作系统如何创建进程。program的header在可执行和共享文件中有。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Program segment header.  */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  Elf32_Word    p_type;                 <span class="comment">/* Segment type */</span></span><br><span class="line">  Elf32_Off     p_offset;               <span class="comment">/* Segment file offset */</span></span><br><span class="line">  Elf32_Addr    p_vaddr;                <span class="comment">/* Segment virtual address */</span></span><br><span class="line">  Elf32_Addr    p_paddr;                <span class="comment">/* Segment physical address */</span></span><br><span class="line">  Elf32_Word    p_filesz;               <span class="comment">/* Segment size in file */</span></span><br><span class="line">  Elf32_Word    p_memsz;                <span class="comment">/* Segment size in memory */</span></span><br><span class="line">  Elf32_Word    p_flags;                <span class="comment">/* Segment flags */</span></span><br><span class="line">  Elf32_Word    p_align;                <span class="comment">/* Segment alignment */</span></span><br><span class="line">&#125; Elf32_Phdr;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* program header */</span></span><br><span class="line">Program Headers:</span><br><span class="line">  Type           Offset             VirtAddr           PhysAddr</span><br><span class="line">                 FileSiz            MemSiz              Flags  Align</span><br><span class="line">  PHDR           <span class="number">0x0000000000000040</span> <span class="number">0x0000000000400040</span> <span class="number">0x0000000000400040</span></span><br><span class="line">                 <span class="number">0x00000000000001f8</span> <span class="number">0x00000000000001f8</span>  R E    <span class="number">8</span></span><br><span class="line">  INTERP         <span class="number">0x0000000000000238</span> <span class="number">0x0000000000400238</span> <span class="number">0x0000000000400238</span></span><br><span class="line">                 <span class="number">0x000000000000001c</span> <span class="number">0x000000000000001c</span>  R      <span class="number">1</span></span><br><span class="line">      [Requesting program interpreter: /lib64/ld-linux-x86<span class="number">-64.</span>so<span class="number">.2</span>]</span><br><span class="line">  LOAD           <span class="number">0x0000000000000000</span> <span class="number">0x0000000000400000</span> <span class="number">0x0000000000400000</span></span><br><span class="line">                 <span class="number">0x0000000000000754</span> <span class="number">0x0000000000000754</span>  R E    <span class="number">200000</span></span><br><span class="line">  LOAD           <span class="number">0x0000000000000e10</span> <span class="number">0x0000000000600e10</span> <span class="number">0x0000000000600e10</span></span><br><span class="line">                 <span class="number">0x0000000000000224</span> <span class="number">0x0000000000000228</span>  RW     <span class="number">200000</span></span><br><span class="line">  DYNAMIC        <span class="number">0x0000000000000e28</span> <span class="number">0x0000000000600e28</span> <span class="number">0x0000000000600e28</span></span><br><span class="line">                 <span class="number">0x00000000000001d0</span> <span class="number">0x00000000000001d0</span>  RW     <span class="number">8</span></span><br><span class="line">  NOTE           <span class="number">0x0000000000000254</span> <span class="number">0x0000000000400254</span> <span class="number">0x0000000000400254</span></span><br><span class="line">                 <span class="number">0x0000000000000044</span> <span class="number">0x0000000000000044</span>  R      <span class="number">4</span></span><br><span class="line">  GNU_EH_FRAME   <span class="number">0x0000000000000600</span> <span class="number">0x0000000000400600</span> <span class="number">0x0000000000400600</span></span><br><span class="line">                 <span class="number">0x000000000000003c</span> <span class="number">0x000000000000003c</span>  R      <span class="number">4</span></span><br><span class="line">  GNU_STACK      <span class="number">0x0000000000000000</span> <span class="number">0x0000000000000000</span> <span class="number">0x0000000000000000</span></span><br><span class="line">                 <span class="number">0x0000000000000000</span> <span class="number">0x0000000000000000</span>  RW     <span class="number">10</span></span><br><span class="line">  GNU_RELRO      <span class="number">0x0000000000000e10</span> <span class="number">0x0000000000600e10</span> <span class="number">0x0000000000600e10</span></span><br><span class="line">                 <span class="number">0x00000000000001f0</span> <span class="number">0x00000000000001f0</span>  R      <span class="number">1</span></span><br></pre></td></tr></table></figure>





<h1 id="sections"><a href="#sections" class="headerlink" title="sections"></a>sections</h1><p>section代表的是一段连续的地址空间，包含了除header（section、elf 文件、program）外的所有信息。section的header参考上一节。</p>
<p>节的类型，源码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Legal values for sh_type (section type).  */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_NULL          0             <span class="comment">/* Section header table entry unused */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_PROGBITS      1             <span class="comment">/* Program data */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_SYMTAB        2             <span class="comment">/* Symbol table */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_STRTAB        3             <span class="comment">/* String table */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_RELA          4             <span class="comment">/* Relocation entries with addends */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_HASH          5             <span class="comment">/* Symbol hash table */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_DYNAMIC       6             <span class="comment">/* Dynamic linking information */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_NOTE          7             <span class="comment">/* Notes */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_NOBITS        8             <span class="comment">/* Program space with no data (bss) */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_REL           9             <span class="comment">/* Relocation entries, no addends */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_SHLIB         10            <span class="comment">/* Reserved */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_DYNSYM        11            <span class="comment">/* Dynamic linker symbol table */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_INIT_ARRAY    14            <span class="comment">/* Array of constructors */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_FINI_ARRAY    15            <span class="comment">/* Array of destructors */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_PREINIT_ARRAY 16            <span class="comment">/* Array of pre-constructors */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_GROUP         17            <span class="comment">/* Section group */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_SYMTAB_SHNDX  18            <span class="comment">/* Extended section indeces */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_NUM           19            <span class="comment">/* Number of defined types.  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_LOOS          0x60000000    <span class="comment">/* Start OS-specific.  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_GNU_ATTRIBUTES 0x6ffffff5   <span class="comment">/* Object attributes.  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_GNU_HASH      0x6ffffff6    <span class="comment">/* GNU-style hash table.  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_GNU_LIBLIST   0x6ffffff7    <span class="comment">/* Prelink library list */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_CHECKSUM      0x6ffffff8    <span class="comment">/* Checksum for DSO content.  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_LOSUNW        0x6ffffffa    <span class="comment">/* Sun-specific low bound.  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_SUNW_move     0x6ffffffa</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_SUNW_COMDAT   0x6ffffffb</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_SUNW_syminfo  0x6ffffffc</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_GNU_verdef    0x6ffffffd    <span class="comment">/* Version definition section.  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_GNU_verneed   0x6ffffffe    <span class="comment">/* Version needs section.  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_GNU_versym    0x6fffffff    <span class="comment">/* Version symbol table.  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_HISUNW        0x6fffffff    <span class="comment">/* Sun-specific high bound.  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_HIOS          0x6fffffff    <span class="comment">/* End OS-specific type */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_LOPROC        0x70000000    <span class="comment">/* Start of processor-specific */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_HIPROC        0x7fffffff    <span class="comment">/* End of processor-specific */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_LOUSER        0x80000000    <span class="comment">/* Start of application-specific */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SHT_HIUSER        0x8fffffff    <span class="comment">/* End of application-specific */</span></span></span><br></pre></td></tr></table></figure>

<p>部分汉语翻译（内容摘自：黄俊的混沌学堂知识星球，有增改）</p>
<p>SHT_NULL：该值将节标记为非活动状态 </p>
<p>SHT_PROGBITS：该值保存着由程序定义的节信息，其格式和含义完全由程序决定（程序是什么？考虑下谁生成了目标文件） </p>
<p>SHT_SYMTAB 和 SHT_DYNSYM：表示当前节保存着一个符号表。SHT_SYMTAB 表示提供了用于链接器静态链接的符号，其作为一个完整的符号表，它可能包含许多动态链接中不需要的符号，因此，一个对象文件也可以包含一个 SHT_DYNSYM 的节用于保存动态链接符号的最小集合，以节省空间。所以我们可以通过strip去掉完整符号表，但这会导致不能进行静态链接 。SYM &#x3D; symbol。</p>
<p>SHT_DYNAMIC：表示当前节保存动态链接信息 </p>
<p>SHT_STRTAB：表示当前节为字符串表 </p>
<p>SHT_RELA：表示当前节保存着带有显式加数的重定位表项，例如对象文件的32位类的Elf32_Rela类型（后面会说这里的加数是什么）</p>
<p>SHT_REL：表示该节保存着没有显式加数的重定位表项。一个ELF文件可能有多个重定位的section。</p>
<p>SHT_HASH：表示当前节保存着一个符号哈希表。所有参与动态链接的对象文件必须包含一个符号哈希表 </p>
<p>SHT_NOTE：表示当前节保存文件的注释信息 </p>
<p>SHT_NOBITS：表示不占任何空间的节信息，虽然该节不包含字节，但是sh_offset成员包含概念上的文件偏移量 </p>
<p>SHT_SHLIB：该节类型是保留的，但具有未指定的语义。包含这种类型的部分的程序不符合ABI规范 </p>
<p>SHT_LOPROC 与 SHT_HIPROC：这个范围内的值为特定于处理器的语义保留 </p>
<p>SHT_LOUSER：该类型的节表示应用程序保留的索引范围的下界 </p>
<p>SHT_HIUSER：该类型的节表示应用程序保留的索引范围的上限 </p>
<p>下面重点介绍几个重要Section Type。</p>
<h2 id="String-table"><a href="#String-table" class="headerlink" title="String table"></a>String table</h2><p>字符串表节保存以空白符结尾的字符串序列。ELF文件使用这些字符串来表示符号和节名。使用方式，是符号保存一个指向支付串标的索引下标，结束字符是空白符。</p>
<h2 id="symbol-table"><a href="#symbol-table" class="headerlink" title="symbol table"></a>symbol table</h2><p>一个ELF文件的符号表保存了<strong>需要</strong>进行重定位程序的符号定义。</p>
<p>在Section Header中，type为SYMTAB的就是。</p>
<p><code>readelf -s fun.o</code></p>
<p><code>readelf -s fun.so</code></p>
<p><code>readelf -s main.o</code></p>
<p>有2个符号表，分别是.dynsym 、.symtab，其中.o的静态链接文件没有.dynsym。</p>
<p>源码定义的结构体：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Symbol table entry.  */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  Elf32_Word    st_name;                <span class="comment">/* Symbol name (string tbl index) */</span></span><br><span class="line">  Elf32_Addr    st_value;               <span class="comment">/* Symbol value */</span></span><br><span class="line">  Elf32_Word    st_size;                <span class="comment">/* Symbol size */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> st_info;                <span class="comment">/* Symbol type and binding */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> st_other;               <span class="comment">/* Symbol visibility */</span></span><br><span class="line">  Elf32_Section st_shndx;               <span class="comment">/* Section index */</span></span><br><span class="line">&#125; Elf32_Sym;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>st_name，目标文件的字符串标的索引下标。</p>
<p>st_value，关联符号值（Symbol Values）</p>
<p>在不同的对象文件（ELF）中解释不同：</p>
<ul>
<li>可重定位文件中，节index是SHN_COMMON，st_value保存的是一个符号的对齐约束</li>
<li>可重定位文件中，st_value保存的是是一个已定义的节偏移量，即st_shndx标识开始的地方开始的偏移量。</li>
<li>在可执行和共享文件中，st_value保存一个用户内存排布的虚拟地址。</li>
</ul>
<p>st_info在符号表中显示为Type字段和Bind字段，Type提供了关联实体的一般分类：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* How to extract and insert information held in the st_info field.  */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ELF32_ST_BIND(val)              (((unsigned char) (val)) &gt;&gt; 4)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ELF32_ST_TYPE(val)              ((val) &amp; 0xf)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ELF32_ST_INFO(bind, type)       (((bind) &lt;&lt; 4) + ((type) &amp; 0xf))</span></span><br><span class="line"><span class="comment">/* Legal values for ST_TYPE subfield of st_info (symbol type).  */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STT_NOTYPE      0               <span class="comment">/* Symbol type is unspecified */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STT_OBJECT      1               <span class="comment">/* Symbol is a data object */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STT_FUNC        2               <span class="comment">/* Symbol is a code object */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STT_SECTION     3               <span class="comment">/* Symbol associated with a section */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STT_FILE        4               <span class="comment">/* Symbol&#x27;s name is file name */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STT_COMMON      5               <span class="comment">/* Symbol is a common data object */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STT_TLS         6               <span class="comment">/* Symbol is thread-local data object*/</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STT_NUM         7               <span class="comment">/* Number of defined types.  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STT_LOOS        10              <span class="comment">/* Start of OS-specific */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STT_GNU_IFUNC   10              <span class="comment">/* Symbol is indirect code object */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STT_HIOS        12              <span class="comment">/* End of OS-specific */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STT_LOPROC      13              <span class="comment">/* Start of processor-specific */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STT_HIPROC      15              <span class="comment">/* End of processor-specific */</span></span></span><br></pre></td></tr></table></figure>



<p>Bind字段，决定了该符号记录的可见性和行为。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Legal values for ST_BIND subfield of st_info (symbol binding).  */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STB_LOCAL       0               <span class="comment">/* Local symbol */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STB_GLOBAL      1               <span class="comment">/* Global symbol */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STB_WEAK        2               <span class="comment">/* Weak symbol */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STB_NUM         3               <span class="comment">/* Number of defined types.  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STB_LOOS        10              <span class="comment">/* Start of OS-specific */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STB_GNU_UNIQUE  10              <span class="comment">/* Unique symbol.  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STB_HIOS        12              <span class="comment">/* End of OS-specific */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STB_LOPROC      13              <span class="comment">/* Start of processor-specific */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STB_HIPROC      15              <span class="comment">/* End of processor-specific */</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>主要关注STB_LOCAL、STB_GLOBAL、STB_WEAK。</p>
<p>STB_GLOBAL和STB_WEAK区别主要体现在，当连接器组合几个可重定位文件时，不允许STB_GLOBAL符号有相同名称的多个定义。但是，如果已定义的全局符号存在了，则用同名弱符号不会报错，此时忽略弱符号。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">readelf -s main.o</span><br><span class="line"></span><br><span class="line">Symbol table <span class="string">&#x27;.symtab&#x27;</span> contains 16 entries:</span><br><span class="line">   Num:    Value          Size Type    Bind   Vis      Ndx Name</span><br><span class="line">     0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND </span><br><span class="line">     1: 0000000000000000     0 FILE    LOCAL  DEFAULT  ABS main.c</span><br><span class="line">     2: 0000000000000000     0 SECTION LOCAL  DEFAULT    1 </span><br><span class="line">     3: 0000000000000000     0 SECTION LOCAL  DEFAULT    3 </span><br><span class="line">     4: 0000000000000000     0 SECTION LOCAL  DEFAULT    4 </span><br><span class="line">     5: 0000000000000000     0 SECTION LOCAL  DEFAULT    5 </span><br><span class="line">     6: 0000000000000004     4 OBJECT  LOCAL  DEFAULT    3 a.2180</span><br><span class="line">     7: 0000000000000000     4 OBJECT  LOCAL  DEFAULT    4 b.2181</span><br><span class="line">     8: 0000000000000000     0 SECTION LOCAL  DEFAULT    7 </span><br><span class="line">     9: 0000000000000000     0 SECTION LOCAL  DEFAULT    8 </span><br><span class="line">    10: 0000000000000000     0 SECTION LOCAL  DEFAULT    6 </span><br><span class="line">    11: 0000000000000000     4 OBJECT  GLOBAL DEFAULT    3 g1</span><br><span class="line">    12: 0000000000000004     4 OBJECT  GLOBAL DEFAULT  COM g2</span><br><span class="line">    13: 0000000000000000    68 FUNC    GLOBAL DEFAULT    1 main</span><br><span class="line">    14: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND func</span><br><span class="line">    15: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND <span class="built_in">printf</span></span><br></pre></td></tr></table></figure>

<p>Ndx是section的header table中的index，其中UND不在main中。</p>
<p>g1、g2全局Object（数据对象），所属的section不一样。g2 COMMON存放未初始化的全局变量，.bss未初始化的静态变量，初始化为0的全局或静态变量（两者区别）。</p>
<p>局部Objecta和b存放位置不同，a初始化了，b初始化为0（并没什么用）。 a.2180 和b.2181，是名称修饰，防止重复。</p>
<h2 id="Relocation-section"><a href="#Relocation-section" class="headerlink" title="Relocation section"></a>Relocation section</h2><p> <strong>重定位Relocation基本概念：是将符号引用和符号定义连接起来的过程，比如编译中静态链接库合并到一起时，各自文件中的内存相对地址更新到新文件中的地址。</strong>又比如，一个程序调用一个函数时，相关调用指令（call sum）必须在执行时将调用符号分配适当的目标地址（call 0x800001）。换句话说，可重定位文件必须提供具有描述如何修改节内容的信息，从而允许可执行和共享目标文件保存进程装载执行所需要的正确信息。</p>
<p>在Section Header中，Type是RELA或REL的就是。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Relocation table entry without addend (in section of type SHT_REL).  */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  Elf32_Addr    r_offset;               <span class="comment">/* Address */</span></span><br><span class="line">  Elf32_Word    r_info;                 <span class="comment">/* Relocation type and symbol index */</span></span><br><span class="line">&#125; Elf32_Rel;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Relocation table entry with addend (in section of type SHT_RELA).  */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  Elf32_Addr    r_offset;               <span class="comment">/* Address */</span></span><br><span class="line">  Elf32_Word    r_info;                 <span class="comment">/* Relocation type and symbol index */</span></span><br><span class="line">  Elf32_Sword   r_addend;               <span class="comment">/* Addend */</span></span><br><span class="line">&#125; Elf32_Rela;</span><br></pre></td></tr></table></figure>

<p>r_offset不同目标文件的重定位表象的解释略有不同：</p>
<ul>
<li>可重定位文件，r_offset保存着一个从节开头到需要重定位的内存单元的字节偏移量。</li>
<li>可执行和共享文件中，r_offset保存的是虚拟地址，用户内存排布标识。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">readelf -r main.o</span><br><span class="line">readelf -r fun.o</span><br><span class="line">readelf -r fun.so</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>r_info表示符号表索引以及重定位类型（地址解析类型）。</p>
<p>一个重定位节引用另外2个节，符号表和要修改的节。节头的sh_info和sh_link成员，在上面的节信息中描述，指定了这些关系。</p>
<h2 id="特殊的节"><a href="#特殊的节" class="headerlink" title="特殊的节"></a>特殊的节</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -l main</span><br></pre></td></tr></table></figure>

<p>Section to Segment mapping，节和段segment的映射。是个特殊的节，用于保存程序信息和控制信息。不清楚为什么被划分到 program headers类别中。.systab和.rel(.rela)上面两节描述了。</p>
<ul>
<li>.init：表示该节保存了进程初始化代码的可执行指令。也就是说，当一个程序开始运行时，将会在调用主程序入口点（C程序的main函数）之前执行这一部分的代码</li>
<li>.bss：表示该节保存着未初始化的数据，这些数据构成了程序的数据内存排布。根据定义，当程序开始运行时，系统用零初始化这些数据。节类型 SHT_NOBITS 表示该节不占用文件空间。</li>
<li>.data 和 .data1：表示该节保存着已经初始化的数据，这些数据构成了程序的数据内存排布</li>
<li>.dynamic：表示该节保存动态链接信息</li>
<li>.dynstr：表示该节保存动态链接所需的字符串，最常见的是表示符号表项相关名称的字符串</li>
<li>.dynsym：表示该节保存着动态链接符号表</li>
<li>.fini：表示该节保存了进程终止代码的可执行指令。也就是说，当一个程序正常退出时将会执行这一部分的代码</li>
<li>.got：表示该节保存了全局偏移量表</li>
<li>.hash：表示该节保存了符号hash表</li>
<li>.plt：表示该节保存了程序连接表信息</li>
<li>.rel name 和 .rela name：表示该节保存着重定位信息。如果文件中有一个包含重定位的可加载段，则节的属性将包含 SHF_ALLOC 。通常，name 由重定位的节提供。因此.text 的重定位节的名称通常为.rel.text 或 .rela.text</li>
<li>.rodata 和 .rodata1：表示该节保存只读数据，这些数据通常会在进程中形成一个不可写的数据段</li>
<li>.shstrtab：表示该节保存节的名字</li>
<li>.strtab：表示该节保存字符串信息，最常见的是表示与符号表项关联的名称的字符串</li>
<li>.symtab：表示该节保存符号表信息</li>
<li>.text：表示当前节包含程序的可执行的指令序列信息</li>
<li>.comment：持有注释信息</li>
<li>.interp：表示该节保存程序动态链接器的路径名。如果文件中有一个包含该节的可加载段，该节的属性将包括SHF_ALLOC位</li>
<li>.line：表示该节保存用于符号调试的行号信息，它描述了源程序和机器码之间的对应关系</li>
<li>.note：表示该节保存了标注信息</li>
<li>.debug：表示该节保存了用于调试的符号信息</li>
</ul>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>elf官方文档：</p>
<p><a target="_blank" rel="noopener" href="https://refspecs.linuxfoundation.org/elf/elf.pdf">https://refspecs.linuxfoundation.org/elf/elf.pdf</a></p>
<p>知识星球混沌学堂—黄俊：</p>
<p><a target="_blank" rel="noopener" href="https://articles.zsxq.com/id_iwals7svgn0g.html">https://articles.zsxq.com/id_iwals7svgn0g.html</a></p>
<p><a target="_blank" rel="noopener" href="https://articles.zsxq.com/id_ohm2xh6becp2.html">https://articles.zsxq.com/id_ohm2xh6becp2.html</a></p>
<p><a target="_blank" rel="noopener" href="https://articles.zsxq.com/id_n35kk7n2sf0e.html">https://articles.zsxq.com/id_n35kk7n2sf0e.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://windanchaos.github.io/docs/2021/06/07/SpringBoot%E4%B9%8B%E5%8D%9A%E5%AE%A2%E5%AE%9E%E6%88%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="docs/images/avatar.jpeg">
      <meta itemprop="name" content="windanchaos">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="docs/2021/06/07/SpringBoot%E4%B9%8B%E5%8D%9A%E5%AE%A2%E5%AE%9E%E6%88%98/" class="post-title-link" itemprop="url">SpringBoot之博客实战</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-07 20:37:19" itemprop="dateCreated datePublished" datetime="2021-06-07T20:37:19+08:00">2021-06-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-08 18:39:48" itemprop="dateModified" datetime="2021-06-08T18:39:48+08:00">2021-06-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="docs/categories/%E5%90%8E%E7%AB%AF%E6%A1%86%E6%9E%B6%E5%92%8C%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">后端框架和技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>自学这件事，要坚持下来真的挺耗费精神力的。本来打算把博客系统敲完，遇到面试，要准备，参加面试几轮几轮的面，准备入职的事，又有新面试等等，对入职公司的技术栈的研究涉及go，又大概看了go。测试学院开学，当了助教，也需要上课，答疑解惑。精神分散，还要做家务煮饭什么的，还是比较难办。差点把这个博客计划半途而废了。然后想起来还有件事没有利索，回头继续前进，一定完成！做一件成一件！</p>
<p>2020年6月入职现在的公司开启上班模式后这件事又耽搁了几个月，期间根据公司实际，研习了很多客户端的技术，博客代码的事有中断，后继续，目前是2021年6月7日，实际前前后后已经完成一个多月，打算对第一阶段的博客代码和套路做个总结。下一个阶段的总结应该是要前后端分离，并带上VUE相关内容的。</p>
<p>本文不适合跟操作，仅适合查看涉及的知识点，或扩充一二。</p>
<p>我的项目地址：<a target="_blank" rel="noopener" href="https://gitee.com/windanchaos/my-blog-v2">https://gitee.com/windanchaos/my-blog-v2</a></p>
<p>师出同门的博客地址（可以大致跟敲）：<a target="_blank" rel="noopener" href="https://onestar.newstar.net.cn/types/33">https://onestar.newstar.net.cn/types/33</a></p>
<p>李仁密教课的地址（我很多地方没跟，比如持久框架和很多细节）：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV13t411T72J">https://www.bilibili.com/video/BV13t411T72J</a></p>
<h1 id="前置动作"><a href="#前置动作" class="headerlink" title="前置动作"></a>前置动作</h1><ul>
<li>jQuery速度学习一下，以便在操控界面元素上能有思路</li>
<li>mybatis速度学习一下，以便脱离视频教程的持久化方法</li>
</ul>
<h1 id="用户故事"><a href="#用户故事" class="headerlink" title="用户故事"></a>用户故事</h1><p>三个关键点角色、功能、商业价值。</p>
<p>模板：作为一个（角色），我可以做什么，从而达到什么目的。</p>
<h1 id="个人博客系统的用户故事"><a href="#个人博客系统的用户故事" class="headerlink" title="个人博客系统的用户故事"></a>个人博客系统的用户故事</h1><p>角色：普通访客、管理员（我）</p>
<p>这里的概念是头一次听到和见到，类似一个产品经理的视角看待问题。</p>
<h2 id="访客的用户故事"><a href="#访客的用户故事" class="headerlink" title="访客的用户故事"></a>访客的用户故事</h2><ul>
<li>可以分页查看所有博客</li>
<li>快速查看博客数最多的6个分类</li>
<li>可以查看所有的分类</li>
<li>可以查看某个分类下的博客列表</li>
<li>查看标记博客最多的10个标签</li>
<li>查看所有标签</li>
<li>查看标签下的博客列表</li>
<li>可以根据年度时间线查看博客列表
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="docs/2021/06/07/SpringBoot%E4%B9%8B%E5%8D%9A%E5%AE%A2%E5%AE%9E%E6%88%98/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://windanchaos.github.io/docs/2020/05/17/shell%E4%B8%89%E5%89%91%E5%AE%A2%E5%AE%9E%E6%88%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="docs/images/avatar.jpeg">
      <meta itemprop="name" content="windanchaos">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="docs/2020/05/17/shell%E4%B8%89%E5%89%91%E5%AE%A2%E5%AE%9E%E6%88%98/" class="post-title-link" itemprop="url">shell三剑客实战</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-05-17 16:55:03" itemprop="dateCreated datePublished" datetime="2020-05-17T16:55:03+08:00">2020-05-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-08 18:39:48" itemprop="dateModified" datetime="2021-06-08T18:39:48+08:00">2021-06-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="docs/categories/Linux%E7%AE%A1%E7%90%86%E7%BB%B4%E6%8A%A4/" itemprop="url" rel="index"><span itemprop="name">Linux管理维护</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="一点总结"><a href="#一点总结" class="headerlink" title="一点总结"></a>一点总结</h1><p>由于自己本身就对shell中常用的命令有所了解，所以基础的就不啰嗦了。在我之前的<a href="%5Bhttps://blog.windanchaos.tech/categories/Linux%E7%AE%A1%E7%90%86%E7%BB%B4%E6%8A%A4/%5D(https://blog.windanchaos.tech/categories/Linux%E7%AE%A1%E7%90%86%E7%BB%B4%E6%8A%A4/)">博客</a>中已经有不少内容</p>
<p>就写过的很多shell脚本经验看，最近作为助教又在跟着霍格沃兹第三期，又有了新感受。结合以前的经验，做个简单的总结。</p>
<ul>
<li>代码要<strong>规范</strong></li>
<li>虽然是shell，代码在逻辑上也要<strong>缜密</strong></li>
</ul>
<h1 id="Linux文本三剑客"><a href="#Linux文本三剑客" class="headerlink" title="Linux文本三剑客"></a>Linux文本三剑客</h1><h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><p>最基本的作用，按规则输出列。</p>
<p>前置学习printf 或print。</p>
<h3 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h3><p>命令格式：</p>
<p>printf ‘匹配式’ 输入内容</p>
<p>它的输出全部当成字符串。所以需要自己来设置换行或空格。</p>
<p>%ns</p>
<p>输出字符串。n是数字指代输出几个字符</p>
<p>%ni</p>
<p>输出整数。n是数字自带输出几个数字。</p>
<p>%m.nf</p>
<p>输出浮点数。m是总的位数，n是小数位数</p>
<p>下面是例子，文本demo.txt</p>
<p>ID      Name    Linux   PHP     MySQL   Java<br>1       Liming  82      55      58      87</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="docs/2020/05/17/shell%E4%B8%89%E5%89%91%E5%AE%A2%E5%AE%9E%E6%88%98/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://windanchaos.github.io/docs/2020/04/16/mybatis%E5%85%A5%E4%B8%AA%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="docs/images/avatar.jpeg">
      <meta itemprop="name" content="windanchaos">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="docs/2020/04/16/mybatis%E5%85%A5%E4%B8%AA%E9%97%A8/" class="post-title-link" itemprop="url">mybatis入个门</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-04-16 20:18:04" itemprop="dateCreated datePublished" datetime="2020-04-16T20:18:04+08:00">2020-04-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-08 18:55:22" itemprop="dateModified" datetime="2021-06-08T18:55:22+08:00">2021-06-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="docs/categories/%E5%90%8E%E7%AB%AF%E6%A1%86%E6%9E%B6%E5%92%8C%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">后端框架和技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><p>ORMapping: Object Relationship Mapping 对象关系映射的一种流行框架。相同技术还有Hibernate。两者对比，可参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/javacatalina/p/6590321.html">https://www.cnblogs.com/javacatalina/p/6590321.html</a></p>
<p>ORMapping是Java 到 MySQL 的映射，开发者可以以面面向对象的思想来管理理数据库。</p>
<h1 id="使用套路"><a href="#使用套路" class="headerlink" title="使用套路"></a>使用套路</h1><h2 id="两种使用方式"><a href="#两种使用方式" class="headerlink" title="两种使用方式"></a>两种使用方式</h2><ul>
<li><strong>mybatis原生方式</strong></li>
<li><strong>mybatis动态代理</strong></li>
</ul>
<p>两者的区别是在获取到sqlsession链接后，操作对象的动作差异。下面举例原生的方式。之后默认用的动态代理。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// statement是mapper中的‘namespace.方法’</span></span><br><span class="line"><span class="type">String</span> <span class="variable">statement</span> <span class="operator">=</span> <span class="string">&quot;com.chaosbom.mapper.AccoutMapper.save&quot;</span>;</span><br><span class="line"><span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>(<span class="number">1L</span>,<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;123123&quot;</span>,<span class="number">22</span>);</span><br><span class="line">sqlSession.insert(statement,account);</span><br></pre></td></tr></table></figure>

<p>mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.chaosbom.mapper.AccoutMapper&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.chaosbom.entity.Account&quot;</span>&gt;</span></span><br><span class="line">insert into t_account(username,password,age) values(#&#123;username&#125;,#</span><br><span class="line">&#123;password&#125;,#&#123;age&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="实体对象和表"><a href="#实体对象和表" class="headerlink" title="实体对象和表"></a>实体对象和表</h2><p>实体对象是mysql中表字段对应到java的类，通常在代码框架中被叫做entity。下面分别展示了java类和表结构。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="docs/2020/04/16/mybatis%E5%85%A5%E4%B8%AA%E9%97%A8/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://windanchaos.github.io/docs/2020/03/23/SpringBoot%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97%E4%B8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="docs/images/avatar.jpeg">
      <meta itemprop="name" content="windanchaos">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="docs/2020/03/23/SpringBoot%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97%E4%B8%80/" class="post-title-link" itemprop="url">SpringBoot入门系列一</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-03-23 22:34:40" itemprop="dateCreated datePublished" datetime="2020-03-23T22:34:40+08:00">2020-03-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-08 18:39:48" itemprop="dateModified" datetime="2021-06-08T18:39:48+08:00">2021-06-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h1><p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/">https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://windanchaos.github.io/docs/2020/03/23/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E4%BA%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="docs/images/avatar.jpeg">
      <meta itemprop="name" content="windanchaos">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="docs/2020/03/23/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E4%BA%8C/" class="post-title-link" itemprop="url">Java多线程编程核心技术读书笔记二</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-03-23 10:46:46" itemprop="dateCreated datePublished" datetime="2020-03-23T10:46:46+08:00">2020-03-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-08 18:39:48" itemprop="dateModified" datetime="2021-06-08T18:39:48+08:00">2021-06-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="docs/categories/Java%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">Java编程语言</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>这篇读书笔记是《Java多线程编程核心技术》图书的最后一篇。由于写笔记的时候已经读完了整本书，留下了一个大致的印象——适合做多线程的入门读物，所以在读完后感觉缺点什么东西，顺手就打开了另一本《Java并发编程的艺术》，瞬间感觉当年书买得十分的合理，《Java并发编程的艺术》虽然没有开始读，但是大致看了几页，感觉这本书还是要深入一些，更加贴近原理，知识的密度要高很多。</p>
<h1 id="第3章-线程间通信"><a href="#第3章-线程间通信" class="headerlink" title="第3章 线程间通信"></a>第3章 线程间通信</h1><p>这一章基本围绕“wait等待&#x2F;notify通知” 机制来描述线程之间通信的方式。</p>
<h2 id="wait-x2F-notify"><a href="#wait-x2F-notify" class="headerlink" title="wait&#x2F;notify"></a>wait&#x2F;notify</h2><p>其核心思想是处理好锁的获取，锁的释放，唤醒（本质是改变线程自己的状态）的关系。</p>
<p>每个锁都有两个队列，一个就绪，一个阻塞。就绪是要需要锁的（可参与锁竞争），阻塞是不需要锁的（被其他事情中断而不能参与锁的争夺，notify就是改变这个队列中的线程的状态，使其进入就绪状态）</p>
<p>某线程调用的lock对象的wait()方法，线程释放锁，进入waiting状态（线程的等待队列）；</p>
<p>其他线程的lock对象调用notify()或notifyall()方法，则随机或全部讲waiting该锁的线程设置回runnable可执行状态，同时线程会在完成自己代码的执行后，释放自己占用的lock（注意不是notify动作的时候释放）。等待队列中的线程则被cpu随机调用执行。</p>
<p>这里要题外话，书上描述“如果线程抢占到cpu资源…………”，这个描述很容易让新手误解线程是主动的，实际上并不是，是线程自己的状态配置被其他获取到cpu资源的线程改变了，然后被cpu调用到了才对。</p>
<p>wait(long)可以加时间参数，等带long时间看看有没有被唤醒，超过long就自动唤醒。</p>
<p>使用wait&#x2F;notify，需要避免混乱：如过早通知、等待条件发生改变</p>
<h2 id="生产-x2F-消费者模式"><a href="#生产-x2F-消费者模式" class="headerlink" title="生产&#x2F;消费者模式"></a>生产&#x2F;消费者模式</h2><p>生产者和消费者数量在{1,N}的笛卡尔积的组合，如何处理好同步。主要是利用wait&#x2F;notify的技巧。</p>
<p>还介绍了以下管道进行线程间的通信。这个之前了解比较少就专门记录一下。</p>
<ul>
<li>PipedInputStream 和 PipedOutputStream，通过各自对象的connect(stream)方法建立进和出通道的联系</li>
<li>PipedReader 和PipedWriter，同上</li>
</ul>
<h2 id="线程的join方法"><a href="#线程的join方法" class="headerlink" title="线程的join方法"></a>线程的join方法</h2><p>线程若需要其他线程等待自己线程结束，可以使用的方法。为什么要等？比如等子线程执行后返回值。是被等待的线程调用join()方法来阻塞等待线程。join()具有使线程排队运行的作用，与synchronized的区别：join内部使用的wait()方法进行等待，而synchronized是使用的对象监视器做同步。</p>
<p>join(long) 同wait(long)。</p>
<p>join(long) 和sleep(long) 区别。锁释放阻塞和和锁持有等待（阻塞）。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="docs/2020/03/23/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E4%BA%8C/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://windanchaos.github.io/docs/2020/03/20/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E4%B8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="docs/images/avatar.jpeg">
      <meta itemprop="name" content="windanchaos">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="docs/2020/03/20/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E4%B8%80/" class="post-title-link" itemprop="url">Java多线程编程核心技术读书笔记一</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-03-20 21:18:31" itemprop="dateCreated datePublished" datetime="2020-03-20T21:18:31+08:00">2020-03-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-08 18:39:48" itemprop="dateModified" datetime="2021-06-08T18:39:48+08:00">2021-06-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="docs/categories/Java%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">Java编程语言</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="题记"><a href="#题记" class="headerlink" title="题记"></a>题记</h1><p>在B站上看到马士兵老师讲解美团研发死亡七连问的视频，讲课中听到马老师的一句鸡汤，“往深了学，往宽了学”，被马老师深厚的技术功底和探求精神折服。遂，翻出了买了很久但是还没有读的《java多线程编程核心技术》和《java并发编程的艺术》，选择了简单入门的《java多线程编程核心技术》读了起来。之前买了没有去看，因为觉得并发编程对我来说太深了，我还没到那个层次，所以书都没有打开过。这次在家待业，学了一些基础的jvm原理，不再恐惧了。翻出来，一天看了2章，并没有觉得看不懂。恩，我可能是低估了自己能力。所以计划4天把书看完，并整理出笔记。先看书，再行笔记。看书过程中，如果有看不懂或理解不上来的，直接就敲了代码了。所以本笔记，没有代码。</p>
<h1 id="并发问题的来源"><a href="#并发问题的来源" class="headerlink" title="并发问题的来源"></a>并发问题的来源</h1><p>本节内容纯属自编自导，非教程内容，不做质保。</p>
<p>最根本的原因是cpu运算速度远超其他存储设备，每一次脉冲就是它的一次总线宽度的二进制信号变换，变换的规则都烙印在了硬件当中，为了便于控制，形成了很多叫指令的命令（多次脉冲组合），有些指令是原子的不可再分，有些则可以再分开（不知道描述是否准确）。</p>
<p>进程（线程）和CPU的关系是，被CPU执行，进程和线程是被动的，它要达到什么目的，只能写到自己身上，安静的等着CPU来调度的时候由CPU来解析后被执行。个人觉得理解这点很重要。</p>
<p>人们为了挖掘计算机最大的算力，而设计了一套多线程机制，多个线程一起干活。多线程之间存在“公共资源”的情况。多线程的运行机制大致是，以java为例，代码编译成字节码，加载到jvm成为指令，指令被jvm翻译给cpu执行。这些个线程中的代码指令集合（编码后最终的底层指令）就开始等待cpu的时间片来宠幸自个。但是对于这些个指令来说，它是没有权利控制CPU什么时候来找你的。这就导致了，虽然线程内部的指令执行是线性的，但是多线程和线程之间的指令可就不是有顺序的，它们之间彼此交叉，是随机的，这种随机推进一步就是线程告知CPU的信息也是随机的。既然出现了顺序的随机性，在“公共资源”的情形下，就需要同步机制来控制线程的执行顺序执行。至于为什么要同步……恩，哲学问题。线程之间同步信息方可行为达预期。</p>
<p>一句话，时间片分配的随机性、共同资源需要顺序执行是并发问题的主要来源。高并发下，只要高级语言中的代码被转换成的指令不是原子的指令，就可能出现线程的同步问题。</p>
<h1 id="第1章-多线程技能"><a href="#第1章-多线程技能" class="headerlink" title="第1章 多线程技能"></a>第1章 多线程技能</h1><p>介绍了进程线程的关系，入门级的，就不记了。以后会深化理解。</p>
<h2 id="多线程的使用姿势"><a href="#多线程的使用姿势" class="headerlink" title="多线程的使用姿势"></a>多线程的使用姿势</h2><p>怎么申明多线程。</p>
<ul>
<li>extend Thread 覆盖run方法</li>
<li>implement Runnable 实现run方法</li>
</ul>
<p>Thread的构造法中支持实现了Runnble接口的类，恩，面向抽象的体现。</p>
<p>一些常见方法：</p>
<ul>
<li>Thread.currentThread()可以获取当前线程。</li>
<li>isAlive() 判断线程是否处于活动状态</li>
<li>Thread.sleep() 休眠（暂停执行）当前线程，不会让出锁</li>
<li>getId()获取线程的唯一标识</li>
</ul>
<p>停止线程需要说的。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="docs/2020/03/20/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E4%B8%80/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://windanchaos.github.io/docs/2020/03/19/Spring%E6%A1%86%E6%9E%B6%E5%85%A5%E4%B8%AA%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="docs/images/avatar.jpeg">
      <meta itemprop="name" content="windanchaos">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="docs/2020/03/19/Spring%E6%A1%86%E6%9E%B6%E5%85%A5%E4%B8%AA%E9%97%A8/" class="post-title-link" itemprop="url">Spring框架入个门</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-03-19 22:12:02" itemprop="dateCreated datePublished" datetime="2020-03-19T22:12:02+08:00">2020-03-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-08 18:39:48" itemprop="dateModified" datetime="2021-06-08T18:39:48+08:00">2021-06-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="docs/categories/%E5%90%8E%E7%AB%AF%E6%A1%86%E6%9E%B6%E5%92%8C%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">后端框架和技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>计划覆盖一些常见的框架，首选spring boot，在这之前先学习spring基础原理。大致了解后再进入spring boot。所以，spring去学习的时候不会过于纠结太深入的内容。大致了解原则，这篇内容就是这套逻辑下的笔记内容。看了2套视频，前后花了6天时间。</p>
<p>以下内容结合了个人理解整理而成，不保证描述完全准确。</p>
<h1 id="初识Spring"><a href="#初识Spring" class="headerlink" title="初识Spring"></a>初识Spring</h1><p>面向接口编程、解耦。私有变量只申明，但不new对象，变量用它的接口。</p>
<p>Spring解决企业级开发的痛点，数不清的类之间的相互关系，委托给Spring来管理。用个术语：装配。</p>
<p>Bean实际上是Spring中负责加载具体业务对象的类。Spring提供了装配类对象实例的机制。这套机制是IOC\AOP的思想，对应的具体实现是DI（依赖注入）和java的注解实现的AOP和aspectJ实现的AOP。</p>
<p>在学习spring过程中，突发灵感，认识到计算机世界中，context是多么的重要。context在这里我表征软件执行的环境、输入条件、依赖等前置因素。所有的代码，都是在进程开始启动过程中，完成初始化、环境构造、代码执行这么一套流程的。大体，这是目前我所理解的软件的抽象。</p>
<p>Spring配置类注解作为入口，把类加载到运行时中（默认是单例模式，可控制），类和类之间的组合关系，实现相同接口的接口实现之间的如何区分。都提供了注解机制。</p>
<h1 id="注入和装配的套路"><a href="#注入和装配的套路" class="headerlink" title="注入和装配的套路"></a>注入和装配的套路</h1><p>入门级的套路：xml配置和注解基本上在自己可控源码的化效果是等价的。在第三方的源码上，利用xml方式。</p>
<p>Spring的在做注入时，秉着一条“傻瓜”原则，只要spring的容器中某类的实例只有一个，那么只要你告诉（配置xml和注解）spring<br>那么，就会自动去绑定。如果有多个，设定必要的标识（名称、顺序等）区分也就完成了绑定工作。</p>
<h2 id="注解的套路"><a href="#注解的套路" class="headerlink" title="注解的套路"></a>注解的套路</h2><p>下面的注解是入门级的示意。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#需要被Spring加载标识</span><br><span class="line"><span class="meta">@Component</span> <span class="meta">@Controller</span> <span class="meta">@Service</span> <span class="meta">@Repository</span></span><br><span class="line"></span><br><span class="line"># 解决歧义（让引擎识别相同接口不同的实现对象，或者相同类的不同bean，靠名称或默认类名首字母小写）</span><br><span class="line"><span class="meta">@Autowired(required=true)</span></span><br><span class="line">#相同接口的区分手段之一</span><br><span class="line"><span class="meta">@Qualifier</span></span><br><span class="line"># java原生的区别手段</span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line"></span><br><span class="line"># 引入外部类不方便使用Componet等时，可以加注解</span><br><span class="line"># 被加了备注的方法，会自动去运行时环境中查找参数涉及的类的实例</span><br><span class="line"><span class="meta">@Bean</span> </span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="docs/2020/03/19/Spring%E6%A1%86%E6%9E%B6%E5%85%A5%E4%B8%AA%E9%97%A8/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://windanchaos.github.io/docs/2020/03/16/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="docs/images/avatar.jpeg">
      <meta itemprop="name" content="windanchaos">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="docs/2020/03/16/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/" class="post-title-link" itemprop="url">java动态代理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-03-16 16:04:35" itemprop="dateCreated datePublished" datetime="2020-03-16T16:04:35+08:00">2020-03-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-08 18:39:48" itemprop="dateModified" datetime="2021-06-08T18:39:48+08:00">2021-06-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="docs/categories/Java%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">Java编程语言</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文是学习Spring框架的副产品。Spring中的AOP涉及动态代理的原理。</p>
<h1 id="什么是代理"><a href="#什么是代理" class="headerlink" title="什么是代理"></a>什么是代理</h1><p>定义：给目标对象提供一个代理对象，并由代理对象控制对目标对象的引用；</p>
<p>目的：</p>
<ul>
<li>通过引入代理对象的方式来间接访问目标对象，以防止直接访问目标对象给系统带来的不必要的复杂性；</li>
<li>通过代理对象对原有业务进行增强</li>
</ul>
<h1 id="代理设计模式"><a href="#代理设计模式" class="headerlink" title="代理设计模式"></a>代理设计模式</h1><p><a target="_blank" rel="noopener" href="https://www.runoob.com/design-pattern/proxy-pattern.html">https://www.runoob.com/design-pattern/proxy-pattern.html</a></p>
<p>静态代理不能解决代码冗余的问题。一般不推荐静态代理（代理的关系用代码直接定义，代理和被代理需要有相同的接口，被代理作为代理对象的成员变量）。</p>
<h1 id="jdk机制的动态代理"><a href="#jdk机制的动态代理" class="headerlink" title="jdk机制的动态代理"></a>jdk机制的动态代理</h1><p><strong>动态代理有以下特点:</strong></p>
<ul>
<li>代理对象，不需要实现接口</li>
<li>代理对象的生成，是利用JDK的API，动态的在内存中构建代理对象(需要我们指定创建代理对象&#x2F;目标对象实现的接口的类型)</li>
</ul>
<p><strong>动态代理的实现方案</strong></p>
<ul>
<li>jdk代理，通过和目标实现相同接口保证功能一致</li>
<li>cglib代理（第三方cglib库中的一套api），通过继承保证功能一致</li>
</ul>
<p>主要涉及：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 静态方法</span></span><br><span class="line"><span class="keyword">static</span> Object <span class="title function_">newProxyInstance</span><span class="params">(ClassLoader loader, Class&lt;?&gt;[] interfaces,InvocationHandler h )</span></span><br><span class="line"><span class="comment">// 接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">InvocationHandler</span> &#123;....&#125;</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="docs/2020/03/16/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://windanchaos.github.io/docs/2020/03/14/%E6%95%B0%E7%90%86%E9%80%BB%E8%BE%91%E3%80%81%E5%9B%BE%E7%81%B5%E6%9C%BA%E3%80%81%E5%86%AF%E6%B4%9B%E4%BC%8A%E6%9B%BC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="docs/images/avatar.jpeg">
      <meta itemprop="name" content="windanchaos">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="docs/2020/03/14/%E6%95%B0%E7%90%86%E9%80%BB%E8%BE%91%E3%80%81%E5%9B%BE%E7%81%B5%E6%9C%BA%E3%80%81%E5%86%AF%E6%B4%9B%E4%BC%8A%E6%9B%BC/" class="post-title-link" itemprop="url">数理逻辑、图灵机、冯洛伊曼</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-03-14 11:03:33" itemprop="dateCreated datePublished" datetime="2020-03-14T11:03:33+08:00">2020-03-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-08 18:39:48" itemprop="dateModified" datetime="2021-06-08T18:39:48+08:00">2021-06-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="docs/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">计算机科学基础</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>我喜欢追本溯源，渴望真理，而不至被表象迷惑。</p>
<p>这篇文章未写完。可能计划读一下《计算机的数学基础》这本书再写。</p>
<h1 id="计算机的数学基础"><a href="#计算机的数学基础" class="headerlink" title="计算机的数学基础"></a>计算机的数学基础</h1><p> 形式语言与自动机理论、可计算理论、逻辑学和程序设计理论，都是研究计算模型的。它们之间也是相互关联的，共同构成了现代计算机科学技术的理论基础。这些理论都是属于数学学科的。</p>
<p>形式语言与自动机理论、可计算理论和逻辑学的研究都始于20世纪初叶，特别是20世纪30年代的数学家Church（邱奇）、GMel（哥德尔）、Kleene（克林）、Post（波斯特）以及Turing（<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%9B%BE%E7%81%B5/121208">图灵</a>）等人的杰出工作催生了现代电子数字计算机的硬件和软件的诞生。</p>
<p><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%90%86%E8%AE%BA/2317906">程序设计理论</a>的研究相比则要迟一些，是20世纪后半叶现代电子数字计算机以及程序设计语言和软件诞生之后的事情了。它是专门研究程序设计语言和程序设计方法的数学理论。这些工作对于计算机科学的实践和理论的发展有着深远的影响。比如，图灵机模型就被证明是现代电子数字计算机的理论模型。这些先驱者的工作在今天看来似乎是很平常的，它们的思想渊源甚至并不为今天众多的计算机的使用者所知道。但是这些先驱者的工作确实是应该被那些从事计算机科学技术的工作者们所熟悉、所掌握的。 </p>
<h1 id="语言和逻辑"><a href="#语言和逻辑" class="headerlink" title="语言和逻辑"></a>语言和逻辑</h1><p>人类由猿进化成人，成为灵长类的智慧生物，是进化的奇迹。语言在数百万年的进化进程中，在人类这台大自然打造的“生物机器”中，也不断的进化，相互促进，形成目前人类拥有的——自然语言。</p>
<p>语言，我认为它的本质是承载信息的载体。它可以装载情感、请求、命令、陈述等。</p>
<p>自然语言是丰富而复杂的，同一句话，不同的语境、时间、预期所要传递的信息是多样的。这里面很多段子就不一一罗列了。根本原因是自然语言属于人类，它适应人类文明。自然语言的信息传递，依赖于外界环境。语言和它所传递的信息之间，没有一对一的关系，就像算命先生算命，用些模棱两可的话说给你听，还有些星座算命也是一样的，听、读的人接受信息的背景差异，导致相同语言传递的信息千差万别。</p>
<p>语言的诞生，促进了文明发展，萌生了逻辑、推理。先哲用语言讲理，随着理讲得越多，人们发现要讲好道理，首先要做好陈述。没有可靠的陈述作为前提，再完美的论证过程也只是空中楼阁。因此逻辑学逐渐放大研究视野，将语法和词汇承载的信息也纳入到研究范畴中。他们（我不知具体是哪些人）得出：人类使用的陈述句、疑问句、感叹句、祈使句，在着重考虑陈述和论证，就只需要陈述句了。小学学过的，各种句型互转就明白。比如：“你是谁？”，陈述句为：“我希望知道你是谁”。感叹句：“好美的女子！”，陈述句：“女子的美丽让我感叹”。</p>
<p>逻辑、推理进步，让自然语言作为信息传递载体做了一次丢弃，仅留下陈述句。本身语言其实就是一种和承载信息间的“指代”和“映射”。接下来对陈述句的组成部分进行拆解，仅仅做简单拆解。</p>
<p>代词。所谓代词就是用于代替对象的词汇，替代具体的对象出现在语句中并表示被代替的对象。比如，“月球绕地球公转，它的自转周期和地球自转周期相同”。“月球”指代我们想指代的那个对象，“它”指代月球，代词可以是指代的指代，代词的作用和语境有关。</p>
<p>名词。词典中约定词汇含义的方法是用一个固定句式的语句来描述它。比较简单的做法是用“某词是什么意思”的句式把词汇的含义表达出来。</p>
<p>谓词。一类可以将语句中其他成员建立起联系的词。“我喜欢你“，“我在写”，“我写文章”。（个人理解，可能不当）。</p>
<p>接下来讨论语言中的逻辑。单纯的判断你一句话是否是真或假，是没有固定结论的，因为结论依赖于说话的场景。所以，在纯逻辑层面，我们去讨论真假，就只关注语言内部的自恰性了。所以，论述的起点，它必然是整个推理的基石。在没有任何已知前提的情况下，逻辑不能给我们任何新的知识。因此必须在已经有一些已知信息的情况下，我们才能运用逻辑。题外话，基石在很多科幻电影，比如“西部世界”中很多接待员的底层都一个他们行为的基石概念。</p>
<p>先哲们逐步定义了一门叫数理逻辑的学科。 其研究对象是对证明和计算这两个直观概念进行符号化以后的形式系统。</p>
<p> <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E7%9A%84%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/866204?fr=aladdin">https://baike.baidu.com/item/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E7%9A%84%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/866204?fr=aladdin</a> </p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="docs/2020/03/14/%E6%95%B0%E7%90%86%E9%80%BB%E8%BE%91%E3%80%81%E5%9B%BE%E7%81%B5%E6%9C%BA%E3%80%81%E5%86%AF%E6%B4%9B%E4%BC%8A%E6%9B%BC/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="docs/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="docs/page/12/">12</a><a class="extend next" rel="next" href="docs/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">蜀ICP备19036728号 </a>
      <img src="docs/images/%E5%A4%87%E6%A1%88%E5%9B%BE%E6%A0%87.png" alt=""><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=51012202000611" rel="noopener" target="_blank">川公网安备 51012202000611号 </a>
  </div>

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-dragon"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">windanchaos</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="docs/js/comments.js"></script><script src="docs/js/utils.js"></script><script src="docs/js/motion.js"></script><script src="docs/js/schemes/muse.js"></script><script src="docs/js/next-boot.js"></script><script src="docs/js/pjax.js"></script>

  





  




  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":"enable","home":"enable","archive":"enable","delay":true,"timeout":3000,"priority":true,"url":"https://windanchaos.github.io/docs/"}</script>
  <script src="docs/js/third-party/quicklink.js"></script>

</body>
</html>
