<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>windanchaos | 知行合一</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><div class="darkmode-toggle">🌓</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">windanchaos</h1><a id="logo" href="/.">windanchaos</a><p class="description">知行合一</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/me.html"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title"><a href="/2018/07/10/linux%20shell%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9B%B4%E6%96%B0%E3%80%81%E4%BF%AE%E6%94%B9/">linux shell判断文件是否更新、修改</a></h1><div class="post-meta">2018-07-10</div><div class="post-content">核心命令：stat如下函数，判断文件是否更新，传入文件路径，间隔时间（秒s），则输入文件在多少秒内是否被更新过。函数会持续等待文件不再变化后停止。
123456789101112131415function whether_changed()&#123;    local file_path=$&#123;1&#125;    local check_tim...</div><p class="readmore"><a href="/2018/07/10/linux%20shell%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9B%B4%E6%96%B0%E3%80%81%E4%BF%AE%E6%94%B9/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2018/03/08/shell%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">shell正则表达式</a></h1><div class="post-meta">2018-03-08</div><div class="post-content">正则表达式的分类基本组成部分正则表达式的基本组成部分。
POSIX字符类POSIX字符类是一个形如[:…:]的特殊元序列（meta sequence），他可以用于匹配特定的字符范围。
元字符元字符（meta character）是一种Perl风格的正则表达式，只有一部分文本处理工具支持它，并不是所有的文本处理工具都支持。
shell 除了有通配符之外，由sh...</div><p class="readmore"><a href="/2018/03/08/shell%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2018/02/02/tomcat%20%E9%83%A8%E7%BD%B2https%20apr%E6%AD%A3%E7%A1%AE%E5%AE%89%E8%A3%85%EF%BC%8C%E5%90%AF%E5%8A%A8%E6%89%BE%E4%B8%8D%E5%88%B0apr%E7%9A%84%E9%97%AE%E9%A2%98/">tomcat 部署https apr正确安装，启动找不到apr的问题</a></h1><div class="post-meta">2018-02-02</div><div class="post-content">问题解决可以参考：http://blog.csdn.net/felix_yujing&#x2F;article&#x2F;details&#x2F;52385890也可以参考官网：http://tomcat.apache.org/native-doc/
但是，我这个启动始终不对。一开始以为是安装有问题，尝试了几次，安装明显没有什么差错。仔细看日志会发现，to...</div><p class="readmore"><a href="/2018/02/02/tomcat%20%E9%83%A8%E7%BD%B2https%20apr%E6%AD%A3%E7%A1%AE%E5%AE%89%E8%A3%85%EF%BC%8C%E5%90%AF%E5%8A%A8%E6%89%BE%E4%B8%8D%E5%88%B0apr%E7%9A%84%E9%97%AE%E9%A2%98/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2018/01/23/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88SLB%EF%BC%89%E4%BD%BF%E7%94%A8%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E4%B8%80%E7%AF%87%E9%9B%86%E5%90%88%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9%E7%9A%84%E6%96%87%E7%AB%A0/">负载均衡（SLB）使用最佳实践——一篇集合负载均衡主要内容的文章</a></h1><div class="post-meta">2018-01-23</div><div class="post-content"><p>本文转自：<a target="_blank" rel="noopener" href="https://yq.aliyun.com/articles/80055">https://yq.aliyun.com/articles/80055</a></p>
<p>可以加深目前生产环境和测试环境中nginx使用的理解。</p>
<h1 id="负载均衡（SLB）使用最佳实践"><a href="#负载均衡（SLB）使用最佳实践" class="headerlink" title="负载均衡（SLB）使用最佳实践"></a>负载均衡（SLB）使用最佳实践</h1><p><em>摘要：</em> 负载均衡（Server Load Balancer，下文简称 SLB）的引入，可以降低单台云服务器 ECS（下文简称 ECS）出现异常时对业务的冲击，提升业务的可用性。同时，结合弹性伸缩服务，通过动态调整后端服务器，可以快速对业务进行弹性调整（扩容或缩容），以快速应对业务的发展。<br>负载均衡（Server Load Balancer，下文简称 SLB）的引入，可以降低单台云服务器 ECS（下文简称 ECS）出现异常时对业务的冲击，提升业务的可用性。同时，结合弹性伸缩服务，通过动态调整后端服务器，可以快速对业务进行弹性调整（扩容或缩容），以快速应对业务的发展。</p>
<p>本文，会先对 SLB 的使用限制和常见误区进行说明，然后介绍 SLB 的使用最佳实践。</p>
<h1 id="SLB-基础原理"><a href="#SLB-基础原理" class="headerlink" title="SLB 基础原理"></a>SLB 基础原理</h1><p>在开始使用 SLB 之前，建议您务必阅读如下文章，了解 SLB 的相关基础原理：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://help.aliyun.com/knowledge_detail/39444.html">负载均衡技术原理浅析</a></li>
<li><a target="_blank" rel="noopener" href="https://help.aliyun.com/knowledge_detail/39455.html">负载均衡健康检查原理浅析</a></li>
<li><a target="_blank" rel="noopener" href="https://help.aliyun.com/knowledge_detail/39440.html">负载均衡网络流量路径说明</a></li>
<li><a target="_blank" rel="noopener" href="https://help.aliyun.com/knowledge_detail/39449.html">负载均衡高可用概要说明</a></li>
</ul>
<h1 id="SLB-使用限制"><a href="#SLB-使用限制" class="headerlink" title="SLB 使用限制"></a>SLB 使用限制</h1><p>在使用 SLB 进行业务部署之前，请您务必了解 SLB 的相关使用限制，以免对后续使用造成困扰或对业务造成影响。</p>
<h2 id="产品与业务规格限制"><a href="#产品与业务规格限制" class="headerlink" title="产品与业务规格限制"></a>产品与业务规格限制</h2><p>SLB 的相关资源或功能存在限制，部分可以通过提交工单申请调整。部分则没有例外，无法调整。详细说明，可以参阅 <a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/32459.html"><em>SLB 使用限制</em>。</a></p>
<p>另外，后续阿里云会推出性能保障型实例，对实例性能提供保障，用户可配置和查询其具体的性能指标，并可查看其实时运行数据。相关说明可以参阅 <a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/27657.html"><em>产品文档</em>。</a></p>
<h2 id="技术限制"><a href="#技术限制" class="headerlink" title="技术限制"></a>技术限制</h2><p>SLB 在技术层面还在逐步增强和完善，截止本文发稿，还存在如下技术限制：</p>
<h1 id="SLB-常见误区"><a href="#SLB-常见误区" class="headerlink" title="SLB 常见误区"></a>SLB 常见误区</h1><p>从历史案例看，用户在 SLB 的规划和使用过程中有很多常见误区。接下来逐一说明。</p></div><p class="readmore"><a href="/2018/01/23/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88SLB%EF%BC%89%E4%BD%BF%E7%94%A8%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E4%B8%80%E7%AF%87%E9%9B%86%E5%90%88%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9%E7%9A%84%E6%96%87%E7%AB%A0/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2018/01/23/%E6%90%BA%E7%A8%8B%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0%E7%9A%84%E6%BC%94%E8%BF%9B%E3%80%81%E5%8F%98%E9%9D%A9%E4%B8%8E%E5%B1%95%E6%9C%9B/">携程持续交付平台的演进、变革与展望</a></h1><div class="post-meta">2018-01-23</div><div class="post-content"><p>本文转自：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/HqyJQMRHh2KrdFmNtPbX3w">https://mp.weixin.qq.com/s/HqyJQMRHh2KrdFmNtPbX3w</a></p>
<h2 id="越过山丘：携程持续交付平台的演进、变革与展望"><a href="#越过山丘：携程持续交付平台的演进、变革与展望" class="headerlink" title="越过山丘：携程持续交付平台的演进、变革与展望"></a>越过山丘：携程持续交付平台的演进、变革与展望</h2><p><em>2018-01-23</em> <em>王潇俊</em></p>
<p>本文整理自国内首届 Jenkins 用户大会演讲：《越过山丘：携程持续交付平台的演进、变革与展望》</p>
<p>讲师 | 王潇俊<br>编辑 | 黄晓轩</p>
<h2 id="讲师简介"><a href="#讲师简介" class="headerlink" title="讲师简介"></a>讲师简介</h2><p><strong>王潇俊</strong><br>携程 系统研发部总监<br>多年致力于云平台及持续交付的实践，15年加入携程，参与携程部署架构的全面改造，主导设计和打造新一代的适用于微服务的发布系统。同时负责基于携程私有云的，兼容虚机与容器的持续交付平台。ROR狂热粉丝，敏捷文化的忠实拥趸。</p>
<p><strong>阻碍是什么</strong></p>
<p><img src="http://image.windanchaos.tech/blog/n-mmbiz_png-d5TCS9b3zE2KK9Qg3xrGf1RBXFBACib9UBnIgjdxzqnGryyURaZCLsXkJgtu7lMiagxIVWQ1V3ueY8PE2EUjt3jg-640-wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1.png"></p>
<p>持续交付其实是解决阻碍问题。解决阻碍首先要知道阻碍是什么，其实我们阻就碍是一堵堵的混乱之墙。如果你读过DevOps宣言的话，可能很容易理解，DevOps说的混乱之墙是指开发和OPS之间，从开发产物如何变成线上跑的产物之间的一堵墙。</p>
<p>在整个研发过程中处处出现这样的墙，这些墙出现在不同研发的角色上，简单来说就是这样的一幅图。</p>
<p><img src="http://image.windanchaos.tech/blog/n-mmbiz_png-d5TCS9b3zE2KK9Qg3xrGf1RBXFBACib9UyBgicicI22zZkecCCdPmPZ6Pxf6Yh8xbjaadHPKuF3opRVialmOb6OdlQ-640-wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1.png"><br>这个图出自《持续交付》。这中间有三堵比较重要的墙，项目经理和开发工程师，测试工程师，Ops工程师。</p>
<p>每个工程师之间都有一堵墙，都有一些方法论和学术上的东西，或者说最佳实践来解决这些墙所在的问题。分别是敏捷开发（通常说的Agile和Scrum），解决了产品经理到开发到测试之间存在对需求不理解的墙。</p>
<p>有持续集成，继续集成是提出最早的概念，解决的就是开发工程师和测试之间的墙。有DevOps，最近比较火，十几年前就提出，最近开始火起来了，主要是因为Docker的原因。他解决的就是开发工程师、测试工程师和OPS工程师之间这堵墙问题。统统加在一起的概念叫做持续交付。</p>
<p>有的同学在聊持续集成、持续交付，其中需求、发布、交付都没有提到。超出这个图之外，其实还有持续交付的过程。</p>
<p>这个产品特别是像互联网的产品，交到用户手上以后，你会不会跟用户之间有墙，一定有。不止隔着墙，也隔着山和海。后面持续交付还要继续往下走，就要解决一些与用户之间的墙。这就留给大家或者我们将来慢慢解决的问题。</p>
<p><strong>删除误区</strong></p></div><p class="readmore"><a href="/2018/01/23/%E6%90%BA%E7%A8%8B%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0%E7%9A%84%E6%BC%94%E8%BF%9B%E3%80%81%E5%8F%98%E9%9D%A9%E4%B8%8E%E5%B1%95%E6%9C%9B/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2018/01/19/ngrok%E5%AE%9E%E6%88%98%E8%B8%A9%E5%9D%91/">ngrok实战踩坑</a></h1><div class="post-meta">2018-01-19</div><div class="post-content"><p>使用ngrok的场景：内网服务发布到外网，服务的内网穿透。<br>具体如何操作的网上很多文章，这里就不赘述。<br>可以参考：<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/zhangguo5/article/details/77848658?utm_source=5ibc.net&utm_medium=referral%E2%80%8B">一分钟实现内网穿透（ngrok服务器搭建）</a><br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/91f01e30a9b0">自搭Ngrok实现树莓派内网穿透
</a></p>
<h1 id="整个流程"><a href="#整个流程" class="headerlink" title="整个流程"></a>整个流程</h1><h1 id="有坑的地方"><a href="#有坑的地方" class="headerlink" title="有坑的地方"></a>有坑的地方</h1><h2 id="编译安装的文件是哪些"><a href="#编译安装的文件是哪些" class="headerlink" title="编译安装的文件是哪些"></a>编译安装的文件是哪些</h2><p>首先找到安装的目录，我的是&#x2F;usr&#x2F;local&#x2F;src&#x2F;ngrok&#x2F;<br>那么编译完的可执行文件就在&#x2F;usr&#x2F;local&#x2F;src&#x2F;ngrok&#x2F;bin</p>
<p>证书在：<br>&#x2F;usr&#x2F;local&#x2F;src&#x2F;ngrok&#x2F;assets&#x2F;server&#x2F;tls<br>&#x2F;usr&#x2F;local&#x2F;src&#x2F;ngrok&#x2F;assets&#x2F;client&#x2F;tls<br>可执行文件+证书，拷贝到一起，就是一套完成的客户端和服务端了。</p>
<h2 id="后台运行"><a href="#后台运行" class="headerlink" title="后台运行"></a>后台运行</h2><p>ngrok 用 &amp; 不能后台运行<br>这就要使用screen这个命令<br>首先安装screen<br>apt-get install screen<br>之后运行<br>screen -S 任意名字（例如：keepngork）<br>然后运行ngrok启动命令<br>最后按快捷键<br>ctrl+A+D<br>既可以保持ngrok后台运行<br><a target="_blank" rel="noopener" href="http://wdxtub.com/2016/04/16/thin-csapp-1/">http://wdxtub.com/2016/04/16/thin-csapp-1/</a></p>
<h2 id="ngrok客户端无法注册到服务端"><a href="#ngrok客户端无法注册到服务端" class="headerlink" title="ngrok客户端无法注册到服务端"></a>ngrok客户端无法注册到服务端</h2></div><p class="readmore"><a href="/2018/01/19/ngrok%E5%AE%9E%E6%88%98%E8%B8%A9%E5%9D%91/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2018/01/03/YAML%E5%85%A5%E4%B8%AA%E9%97%A8/">YAML入个门</a></h1><div class="post-meta">2018-01-03</div><div class="post-content"><p>拷贝自：<a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2016/07/yaml.html">http://www.ruanyifeng.com/blog/2016/07/yaml.html</a></p>
<p>YAML 是专门用来写配置文件的语言，非常简洁和强大，远比 JSON 格式方便。</p>
<p>本文介绍 YAML 的语法，以 <a target="_blank" rel="noopener" href="https://github.com/nodeca/js-yaml">JS-YAML</a> 的实现为例。你可以去<a target="_blank" rel="noopener" href="http://nodeca.github.io/js-yaml/">在线 Demo</a> 验证下面的例子。</p>
<p><img src="http://image.windanchaos.tech/blog/ng.com-blogimg-asset-2016-bg2016070403-.png"></p>
<h2 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h2><p>YAML 语言（发音 &#x2F;ˈjæməl&#x2F; ）的设计目标，就是方便人类读写。它实质上是一种通用的数据串行化格式。</p>
<p>它的基本语法规则如下。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#</span><br></pre></td></tr></table></figure>
<p>表示注释，从这个字符一直到行尾，都会被解析器忽略。</p>
<p>YAML 支持的数据结构有三种。</p>
<p>以下分别介绍这三种数据结构。</p>
<h2 id="二、对象"><a href="#二、对象" class="headerlink" title="二、对象"></a>二、对象</h2><p>对象的一组键值对，使用冒号结构表示。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">animal</span>: pets</span><br></pre></td></tr></table></figure>

<p>转为 JavaScript 如下。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">animal</span>: <span class="string">&#x27;pets&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>

<p>Yaml 也允许另一种写法，将所有键值对写成一个行内对象。</p></div><p class="readmore"><a href="/2018/01/03/YAML%E5%85%A5%E4%B8%AA%E9%97%A8/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/12/14/%E6%B5%8B%E8%AF%95%E6%B5%8Bmysql%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%80%A7%E8%83%BD%E2%80%94%E2%80%94explain%20%EF%BC%8CMysql%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8/">测试测mysql语句的性能——explain ，Mysql查询优化器的使用</a></h1><div class="post-meta">2017-12-14</div><div class="post-content"><p>MySQL 查询优化器有几个目标，但是其中最主要的目标是尽可能地使用索引，并且使用最严格的索引来消除尽可能多的数据行。最终目标是提交 SELECT 语句查找数据行，而不是排除数据行。优化器试图排除数据行的原因在于它排除数据行的速度越快，那么找到与条件匹配的数据行也就越快。如果能够首先进行最严格的测试，查询就可以执行地更快。<br><strong>MySql 深化学习</strong></p>
<h1 id="1-explain用法"><a href="#1-explain用法" class="headerlink" title="1 explain用法"></a>1 <strong>explain用法</strong></h1><p>explain可以帮助我们分析select语句，<strong>找出select语句的瓶颈</strong>，从而可以针对性地去做优化，让MySQL查询优化器更好地工作。</p>
<p>MySQL查询优化器有几个目标，其中<strong>最主要的目标是尽可能地使用索引，并且使用最严格的索引来消除尽可能多的数据行</strong>。</p>
<p>使用explain+select语句，会返回以下的一个表，截图使用的navicat的工具截图：</p>
<p><img src="http://image.windanchaos.tech/blog/dn.net-20171214200235222-watermark-2-text-aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2luZGFuY2hhb3M=-font-5a6L5L2T-fontsize-400-fill-I0JBQkFCMA==-dissolve-70-gravity-SouthEast.png"></p>
<p>下面对上述表的每一列进行说明：</p>
<h2 id="1-1-id列"><a href="#1-1-id列" class="headerlink" title="1.1 id列"></a>1.1 <strong>id列</strong></h2><p>说明：MySQL Query Optimizer 选定的执行计划中查 询的序列号。表示查询中执行 <strong>select 子句或 操作表的顺序，id 值越大优先级越高，越先 被执行。id 相同，执行顺序由上至下。</strong></p>
<h2 id="1-2-select-type列"><a href="#1-2-select-type列" class="headerlink" title="1.2 select_type列"></a>1.2 <strong>select_type列</strong></h2><p>select_type查询类型</p>
<p>说明 <strong>SIMPLE</strong></p>
<p><strong>简单的select查询，不使用union及子查询</strong> <strong>PRIMARY</strong></p>
<p><strong>最外层的select查询</strong> UNION</p>
<p>UNION中的第二个或随后的select查询，不依赖外部查询的结果集 DEPENDENT UNION</p>
<p>UNION 中的第二个或随后的 select 查询，依赖于外部查询的结果集 UNION RESULT</p>
<p>UNION 查询的结果集 SUBQUERY</p>
<p>子查询中的第一个 select 查询，不依赖于外部查询的结果集 DEPENDENT SUBQUERY</p></div><p class="readmore"><a href="/2017/12/14/%E6%B5%8B%E8%AF%95%E6%B5%8Bmysql%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%80%A7%E8%83%BD%E2%80%94%E2%80%94explain%20%EF%BC%8CMysql%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/11/26/%E5%BC%80%E5%A7%8B%E6%92%B8%E4%B9%A6/">开始撸书</a></h1><div class="post-meta">2017-11-26</div><div class="post-content">我这个人有个毛病，实践比较少，学习偏理论。读书时代，不偏科，没有强的，没有弱的。就是所谓的动手能力不足一类。但是并不妨碍我进步啊。上次一周多电，嗑了一本《操作系统之哲学原理》，感觉很爽。
雾中看花，打算停止在网络上搜集零散的知识了。系统性的回归一遍计算机领域的基础知识，本人是半个计算机应用门类的高材生，本科（尼玛我是一本进去的，东三省都是二本线，朝鲜族的三本...</div><p class="readmore"><a href="/2017/11/26/%E5%BC%80%E5%A7%8B%E6%92%B8%E4%B9%A6/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/11/26/%E6%88%91%E5%85%AC%E5%8F%B8%E7%9B%AE%E5%89%8D%E7%9A%84%E6%95%8F%E6%8D%B7%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2%E6%80%BB%E7%BB%93%E5%92%8C%E5%B1%95%E6%9C%9B/">我公司目前的敏捷持续部署总结和展望</a></h1><div class="post-meta">2017-11-26</div><div class="post-content"><p>上一篇文章用了我２个晚上，今天把老早之前就想写的公司持续集成的总结和展望写了，算是给自己大脑一个交代——对自己说到做到。</p>
<p>持续的干货三大块：</p>
<p>为了规避风险，隔离不可控因素。三大块中又可以插入环境差异。通常是二到四个：</p>
<p>持续集成三大块，通常就在1\2\3环境里不停的迭代。最后到生产上被利用。生产迭代频率相对低一些。</p>
<h1 id="代码管理"><a href="#代码管理" class="headerlink" title="代码管理"></a>代码管理</h1><p>公司刚建立的时候用的是SVN，那个时代我还是个小白，并没有过多参与。后来，公司领导看git的分布式代码仓库牛掰，就在观望、学习、变革中，把代码管理的环境迁移到了git上面，这期间，团队经历了不适应，不会，抱怨，理解，能用，会用，善用的转变。主要还是招聘到了一个git小王子，他帮助团队对git的理解大踏步前进。废话讲完。</p>
<h2 id="git工作流"><a href="#git工作流" class="headerlink" title="git工作流"></a>git工作流</h2><p><img src="http://image.windanchaos.tech/blog/sercontent.com-quickhack-translations-master-git-workflows-and-tutorials-images-git-workflow-release-cycle-4maintenance-.png" alt="git工作流"><br>从推动力上来说，研发团队的推动力来自产品和市场。这个在写公司srum流的文章里有提及。<br>这个地方就不啰嗦git的工作流了。我们遵从了<strong>Gitflow工作流</strong>的基本逻辑。实际运用中灵活处理。<br>想了解git的工作流请移步github上的<a target="_blank" rel="noopener" href="https://github.com/mjrao/git-workflows-and-tutorials">git-workflows-and-tutorials</a>。</p>
<h2 id="数据库变更管理"><a href="#数据库变更管理" class="headerlink" title="数据库变更管理"></a>数据库变更管理</h2><p>数据库是最难控制变更的。因此我们经过探索和总结摸索了一套较为有效的管理方式。可能还不是最科学的，虽然会有些问题，但是目前运作问题不算大。也很少看到这方面的文章。我们约定，数据库变更以脚本方式提交，禁止研发在测试环境自己修改数据库，变更需提交脚本作为依据。那么，我在执行过程中，如测试环境A，跑了，我就会以修改文件夹名称，以名称为标记。如果脚本还要再修改，则研发口头告知或他直接提交新的变更脚本。变更脚本有若干个，通常以任务标号为命名规则，没有项目标号则按自定义方式定义。<br>这套机制，实施最大的难度是协调，让研发了解这个规则。了解并熟悉这套流程之后，基本就没有什么大问题。</p>
<h1 id="编译打包发布测试环境"><a href="#编译打包发布测试环境" class="headerlink" title="编译打包发布测试环境"></a>编译打包发布测试环境</h1><p>现在这一套全部脚本化，总结就是流程是逐步完善起来的，一个阶段有一个阶段的做法。<br>开始，研发手动在本地打包，工具eclipse+maven，打包完后手动上传到服务器的tomcat指定目录。那会我们只有３个项目，这么做问题不大。<br>后来，总是等着研发发布，太慢了，这么low的重复劳动我说我来做好了，你教下我怎么打包的，然后我就会了，我就研究了maven的一起机制。搞了那么一周多点，由于拿到了测试服务器的账户密码，我就在想怎么可以提高效率。研究了明白了里面的原理，我就很自然的认为，既然本地可以打包，那服务器上到打包拷贝过去不是更快，网络传输的时间就略去了。于是，我测试了下，填了很多坑，手动在服务器上打包发布成功。就掌握了最原始的发布。<br>再后来，项目越来越多，多到大于１０个，虽然只有几个发布频率很高，但是手动发布感觉劳心费力，效率底下，我就琢磨如何提高。shell就引入。项目进度太快，我根本没有时间利用上班时间搞，于是下班后，自己一点一点测试。把第一版的自动发布脚本写出来，结合crontab 命令，每天自动发布。然后就轻松多了。后来专门利用业余时间对shell做了一个深化，就有了一次重构。<br>可以参考：<a target="_blank" rel="noopener" href="http://blog.csdn.net/windanchaos/article/details/53490630">http://blog.csdn.net/windanchaos/article/details/53490630</a><br>现在使用的脚本已经不是这个版本了，又被我重构了一次。由之前的一锅贴全部发布，改进为任意项目选择发布，由jenkins驱动。现在的模式：自动＋手动方式。比起从前还是大大的加快了迭代测试效率。虽然还有很多问题。比如现在的不熟结构是所有项目都在一个tomcat下面，发布一个，其实是影响全局的。全套发布下来，花了很多不必要的时间。<br>当然，还写了很多发布小工具，比如自动识别24小时内修改提交到代码库的js&#x2F;css&#x2F;jsp等静态资源文件，巧个命令自动拷贝过去，完全不用重新打包。<br>还存在的问题：<br>１、tomcat部署在一起导致的发布启动效率，浪费不必要的时间。主要是系统资源不够，没有去拆分。<br>２、外网地址一周要变２－３次，需要手动去修改域名映射。浪费时间。<br>３、jenkins让人人都具备发布能力，从某种意义上来说是不恰当的。虽然解放了我，但是还是存在相互干扰的情况。不算严重。</p></div><p class="readmore"><a href="/2017/11/26/%E6%88%91%E5%85%AC%E5%8F%B8%E7%9B%AE%E5%89%8D%E7%9A%84%E6%95%8F%E6%8D%B7%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2%E6%80%BB%E7%BB%93%E5%92%8C%E5%B1%95%E6%9C%9B/">阅读全文</a></p></div><nav class="page-navigator"><a class="extend prev" rel="prev" href="/page/4/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/6/">下一页</a></nav></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="https://windanchaos.github.io"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="关于"><img src="/images/avatar.jpeg"/></a><p>物有本末，事有终始。知所先后，则近道矣！</p><a class="info-icon" href="https://blog.csdn.net/windanchaos" title="CSDN" target="_blank" style="margin-inline:5px"> <i class="fa fa-CSDN-square" style="margin-inline:5px"></i></a><a class="info-icon" href="mailto:454522630@qq.com" title="Email" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/windanchaos" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://gitee.com/windanchaos" title="Gitee" target="_blank" style="margin-inline:5px"> <i class="fa fa-gitee-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">Java编程语言</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux%E7%AE%A1%E7%90%86%E7%BB%B4%E6%8A%A4/">Linux管理维护</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/">MySQL数据库</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">python编程语言</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E5%92%8C%E6%8A%80%E6%9C%AF/">前端框架和技术</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF%E6%A1%86%E6%9E%B6%E5%92%8C%E6%8A%80%E6%9C%AF/">后端框架和技术</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/">性能测试</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/">持续集成</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">数据结构与算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%96%B9%E6%B3%95%E4%B8%8E%E7%AE%A1%E7%90%86/">方法与管理</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E6%96%87/">杂文</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8B%E8%AF%95%E7%9A%84%E6%A1%86%E6%9E%B6%E5%92%8C%E6%8A%80%E6%9C%AF/">测试的框架和技术</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB%E5%A4%A7%E6%9D%82%E7%83%A9/">生活大杂烩</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%82%A1%E7%A5%A8%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/">股票量化交易</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/">自动化测试</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E5%9F%BA%E7%A1%80/">计算机科学基础</a><span class="category-list-count">13</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/FromCSDN/" style="font-size: 15px;">FromCSDN</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 15px;">计算机基础</a> <a href="/tags/testerhome/" style="font-size: 15px;">testerhome</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2022/11/12/%E8%AE%A1%E7%AE%97%E6%9C%BARAM%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/">计算机RAM的底层原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/24/%E5%86%85%E6%A0%B8%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%98%AF%E4%B8%AA%E6%AD%BB%E5%BE%AA%E7%8E%AF/">内核启动过程 -- 操作系统是个死循环</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%90%84%E5%B1%82%E6%AC%A1%E6%89%A7%E8%A1%8C%E9%80%9F%E5%BA%A6/">计算机各层次执行速度</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/11/JDK%E4%B8%ADJUC%E5%8C%85%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94atomic%E5%8C%85/">JDK中JUC包由浅入深原理——atomic包</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/06/22/ELF%E5%AD%A6%E4%B9%A0%E4%B8%80/">ELF学习一</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/07/SpringBoot%E4%B9%8B%E5%8D%9A%E5%AE%A2%E5%AE%9E%E6%88%98/">SpringBoot之博客实战</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/17/shell%E4%B8%89%E5%89%91%E5%AE%A2%E5%AE%9E%E6%88%98/">shell三剑客实战</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/16/mybatis%E5%85%A5%E4%B8%AA%E9%97%A8/">mybatis入个门</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/23/SpringBoot%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97%E4%B8%80/">SpringBoot入门系列一</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/23/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E4%BA%8C/">Java多线程编程核心技术读书笔记二</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2022 <a href="/." rel="nofollow">windanchaos.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>