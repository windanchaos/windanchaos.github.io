<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="宇弦">
<meta property="og:url" content="https:&#x2F;&#x2F;blog.windanchaos.tech&#x2F;page&#x2F;5&#x2F;index.html">
<meta property="og:site_name" content="宇弦">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://blog.windanchaos.tech/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>宇弦</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">宇弦</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-首页">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-分类">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-归档">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-标签">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-关于">

    <a href="/about/me.html" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/windanchaos" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://blog.windanchaos.tech/2017/10/28/%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91%E7%AE%A1%E7%90%86%E5%9C%A8%E6%88%91%E5%8F%B8%E7%9A%84%E5%AE%9E%E8%B7%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windanchaos">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="宇弦">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/10/28/%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91%E7%AE%A1%E7%90%86%E5%9C%A8%E6%88%91%E5%8F%B8%E7%9A%84%E5%AE%9E%E8%B7%B5/" class="post-title-link" itemprop="url">敏捷开发管理在我司的实践</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-10-28 20:44:06" itemprop="dateCreated datePublished" datetime="2017-10-28T20:44:06+08:00">2017-10-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-11-23 23:11:57" itemprop="dateModified" datetime="2019-11-23T23:11:57+08:00">2019-11-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%96%B9%E6%B3%95%E4%B8%8E%E7%AE%A1%E7%90%86/" itemprop="url" rel="index">
                    <span itemprop="name">方法与管理</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/10/28/%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91%E7%AE%A1%E7%90%86%E5%9C%A8%E6%88%91%E5%8F%B8%E7%9A%84%E5%AE%9E%E8%B7%B5/" class="post-meta-item leancloud_visitors" data-flag-title="敏捷开发管理在我司的实践" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2017/10/28/%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91%E7%AE%A1%E7%90%86%E5%9C%A8%E6%88%91%E5%8F%B8%E7%9A%84%E5%AE%9E%E8%B7%B5/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/10/28/%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91%E7%AE%A1%E7%90%86%E5%9C%A8%E6%88%91%E5%8F%B8%E7%9A%84%E5%AE%9E%E8%B7%B5/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>我们研发团队（产品、研发、测试）规模30多，互联网电商，快速成长中。<br>就个人经验来看，技术主管的管理能力绝对达到一定水平，团队研发管理井井有条，很有效率（基于已有积累，很快速的一个月上线新产品，快速迭代完成产品需求）。下面就结合我所见所闻，结合SCRUM的理论，结合我们公司来进行描述，一边反观一边学习先进的管理的理念和配套工具、流程规范。<br>目前采用的是Visual Studio Team Foundation Server，作为scrum的工具。</p>
<p>主要理论参考：<a href="http://www.scrumcn.com/agile/scrum-knowledge-library.html" target="_blank" rel="noopener">scrum中文网</a></p>
<p>Scrum 是一个用于开发和维持复杂产品的框架 ，是一个增量的、迭代的开发过程。在这个框架中，整个开发过程由若干个短的迭代周期组成，一个短的迭代周期称为一个Sprint，每个Sprint的建议长度是2到4周(互联网产品研发可以使用1周的Sprint)。</p>
<p>在Scrum中，使用产品Backlog来管理产品的需求，产品backlog是一个按照商业价值排序的需求列表，列表条目的体现形式通常为用户故事。Scrum团队总是先开发对客户具有较高价值的需求。在Sprint中，Scrum团队从产品Backlog中挑选最高优先级的需求进行开发。挑选的需求在Sprint计划会议上经过讨论、分析和估算得到相应的任务列表，我们称它为Sprint backlog。在每个迭代结束时，Scrum团队将递交潜在可交付的产品增量。 Scrum起源于软件开发项目，但它适用于任何复杂的或是创新性的项目。</p>
<p>Scrum流程如下图：</p>
<h2 id="Scrum框架包括3个角色、3个工件、5个事件、5个价值、4个支柱"><a href="#Scrum框架包括3个角色、3个工件、5个事件、5个价值、4个支柱" class="headerlink" title="Scrum框架包括3个角色、3个工件、5个事件、5个价值、4个支柱"></a>Scrum框架包括3个角色、3个工件、5个事件、5个价值、4个支柱</h2><h1 id="3个角色"><a href="#3个角色" class="headerlink" title="3个角色"></a><a href="http://www.scrumcn.com/agile/scrum-knowledge-library/scrum.html#tab-id-5" target="_blank" rel="noopener">3个角色</a></h1><p>Scrum团队中包括三个角色，他们分别是:</p>
<p>我司有专职产品2名，兼职产品2名（架构和Scrum Master兼）。<br>开发团队人数28（全员），分为的数个行政管理单元：开发一组、开发二组、开发三组、测试组、前端组。就人员配置看，每组开发组人员2-6人规模不等，是由最开始的一个组分裂成的（人员规模扩大）。<br>Scrum Master，数年电商和技术管理经验，srum理念的推动者。</p>
<h1 id="3个工件"><a href="#3个工件" class="headerlink" title="3个工件"></a><a href="http://www.scrumcn.com/agile/scrum-knowledge-library/scrum.html#tab-id-6" target="_blank" rel="noopener">3个工件</a></h1><p>产品作为产品Backlog的生产者，对产品负责，使用sftp方式对外交付原型设计，做产品和测试依据，迭代。 SprintBacklog，按周定义冲刺，冲刺内容为产品Backlog的拆分项，通常按照：原型设计、UI设计、ERP设计及review、代码实现、测试、发布来进行。</p>
<h1 id="5个事件"><a href="#5个事件" class="headerlink" title="5个事件"></a><a href="http://www.scrumcn.com/agile/scrum-knowledge-library/scrum.html#tab-id-7" target="_blank" rel="noopener">5个事件</a></h1><p>我公司并没有遵循该原则，变通为周例会，小组leader汇报，进展情况在看板中更新。其实项目小组中是可以进行站会的，这是一个可以改进点。</p>
<h1 id="5个价值"><a href="#5个价值" class="headerlink" title="5个价值"></a><a href="http://www.scrumcn.com/agile/scrum-knowledge-library/scrum.html#tab-id-8" target="_blank" rel="noopener">5个价值</a></h1><p>在我司主要体现在：<br>1、KPI的考核上。主要原则：积压工作会列入每月的考核，需要完成，若不能完成需给出合理理由，灵活控制。<br>2、周例会看板及看板权限的开放；<br>3、平等对话。<br>4、开放的知识库。<br>5、相互协助。</p>
<h1 id="4个支柱"><a href="#4个支柱" class="headerlink" title="4个支柱"></a><a href="http://www.scrumcn.com/agile/scrum-knowledge-library/scrum.html#tab-id-9" target="_blank" rel="noopener">4个支柱</a></h1><p>我司对迭代的运用较为深化，主要表现在：<br>1、产品原型设计是快速生产的，所以允许修改和完善，等于在一个产品迭代周期内，原型是会被小优化迭代的，不限于开发阶段、测试阶段、上线后。<br>2、代码研发和测试本身就是一个迭代。</p>
<p>增量交付方面：<br>1、研发组内，我主导的持续发布，研发持续交付代码到测试，测试反馈直到符合发布条件。<br>2、公司级内，某个产品的第一期迭代上线交付，第N期上线交付。<br>自组织团地方面：<br>1、我们采用的矩阵方式进行人员管理和配置。简单说，按职能分小组成为一个行政体质上的管理单元，小组长负责成员考核，但是在开发任务迭代中，则是由不同小组抽调的人员组成项目组来完成工作。针对具体任务主要基调是前端抽调和测试抽调+某开发小组（人员较为固定）。</p>
<p>不学习不知道，原来管理还是很多门道。如果我作为一个scrum master角色，需要学习的会有很多内容。我是从公司创立初期就进入，见证了scrum由最初团队成员不理解、忽略，在scrum master不断的宣传、督促下，研发团队的日常运作和微软Scrum管理工具TFS融合起来，对技术管理者的管理能力，服！有幸协助master对TFS的自定义模版进行配置，所以延伸了解了微软在Scrum配置管理的一些内容，作为测试对整个管理结构进行梳理，提高。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://blog.windanchaos.tech/2017/10/28/%E6%95%8F%E6%8D%B7%E5%9B%A2%E9%98%9F%E4%B8%AD%EF%BC%8C%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89%E5%8F%8ABug%E5%88%86%E7%BA%A7%E5%AE%9A%E4%B9%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windanchaos">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="宇弦">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/10/28/%E6%95%8F%E6%8D%B7%E5%9B%A2%E9%98%9F%E4%B8%AD%EF%BC%8C%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89%E5%8F%8ABug%E5%88%86%E7%BA%A7%E5%AE%9A%E4%B9%89/" class="post-title-link" itemprop="url">敏捷团队中，测试流程定义及Bug分级定义</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-10-28 19:58:43" itemprop="dateCreated datePublished" datetime="2017-10-28T19:58:43+08:00">2017-10-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-11-23 23:11:57" itemprop="dateModified" datetime="2019-11-23T23:11:57+08:00">2019-11-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%96%B9%E6%B3%95%E4%B8%8E%E7%AE%A1%E7%90%86/" itemprop="url" rel="index">
                    <span itemprop="name">方法与管理</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/10/28/%E6%95%8F%E6%8D%B7%E5%9B%A2%E9%98%9F%E4%B8%AD%EF%BC%8C%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89%E5%8F%8ABug%E5%88%86%E7%BA%A7%E5%AE%9A%E4%B9%89/" class="post-meta-item leancloud_visitors" data-flag-title="敏捷团队中，测试流程定义及Bug分级定义" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2017/10/28/%E6%95%8F%E6%8D%B7%E5%9B%A2%E9%98%9F%E4%B8%AD%EF%BC%8C%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89%E5%8F%8ABug%E5%88%86%E7%BA%A7%E5%AE%9A%E4%B9%89/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/10/28/%E6%95%8F%E6%8D%B7%E5%9B%A2%E9%98%9F%E4%B8%AD%EF%BC%8C%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89%E5%8F%8ABug%E5%88%86%E7%BA%A7%E5%AE%9A%E4%B9%89/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>当前流程，灵活处理。解决问题和效率为基本原则。<br><img src="/images/dn.net-20171028195316132-watermark-2-text-aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2luZGFuY2hhb3M=-font-5a6L5L2T-fontsize-400-fill-I0JBQkFCMA==-dissolve-70-gravity-SouthEast.png" alt="这里写图片描述"></p>
<p><img src="/images/dn.net-20171028195334175-watermark-2-text-aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2luZGFuY2hhb3M=-font-5a6L5L2T-fontsize-400-fill-I0JBQkFCMA==-dissolve-70-gravity-SouthEast.png" alt="这里写图片描述"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://blog.windanchaos.tech/2017/10/28/jenkins%E7%BB%8F%E9%AA%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windanchaos">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="宇弦">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/10/28/jenkins%E7%BB%8F%E9%AA%8C/" class="post-title-link" itemprop="url">jenkins经验</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-10-28 15:40:44" itemprop="dateCreated datePublished" datetime="2017-10-28T15:40:44+08:00">2017-10-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-11-23 23:11:57" itemprop="dateModified" datetime="2019-11-23T23:11:57+08:00">2019-11-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/" itemprop="url" rel="index">
                    <span itemprop="name">持续集成</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/10/28/jenkins%E7%BB%8F%E9%AA%8C/" class="post-meta-item leancloud_visitors" data-flag-title="jenkins经验" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2017/10/28/jenkins%E7%BB%8F%E9%AA%8C/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/10/28/jenkins%E7%BB%8F%E9%AA%8C/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1、关于进程"><a href="#1、关于进程" class="headerlink" title="1、关于进程"></a>1、关于进程</h2><p>即jenkins默认会kill掉自己生产的子进程。这个问题百度一下就解决。</p>
<h2 id="2、莫名其妙的failure，命令执行的返回状态对jenkins的影响"><a href="#2、莫名其妙的failure，命令执行的返回状态对jenkins的影响" class="headerlink" title="2、莫名其妙的failure，命令执行的返回状态对jenkins的影响"></a>2、莫名其妙的failure，命令执行的返回状态对jenkins的影响</h2><p>原则：自己编写的shell脚本，函数必须有一个自己想给出的返回状态，告知jenkins该状态成功或失败后，是否继续执行。因为从安全角度考虑，jenkins面对每一个命令，只要抛出异常，必然是终止其执行的，以免之后的脚本依赖错误执行导致不可预见的错误。如下面的脚本，主要目的是结束关键词输入的进程。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">kill_process</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    local process=$&#123;<span class="number">1</span>&#125;</span><br><span class="line">    #进程存在则执行kill动作，进程不存在什么也不做</span><br><span class="line">    [ -n <span class="string">"`ps -ef |grep $&#123;process&#125;|grep -v grep| awk '&#123;print $2&#125;' | head -1`"</span> ] &amp;&amp; \</span><br><span class="line">    ps -ef |grep $&#123;process&#125;|grep -v grep| awk <span class="string">'&#123;print $2&#125;'</span> | xargs kill <span class="number">-9</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>单机运行的时候不会有任何问题。<br>然而在jenkins中调用的时候（以下例子是ssh到服务器后执行kill动作的日志）,没有报错。但是failure了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[user@iZbp1gs5bd83lri6133n08Z ~]$ source /arthas/sites/deploy_function.sh</span><br><span class="line">[user@iZbp1gs5bd83lri6133n08Z ~]$ kill_process servers/apache-tomcat</span><br><span class="line">[user@iZbp1gs5bd83lri6133n08Z ~]$ logout</span><br><span class="line">Connection to <span class="number">172.16</span><span class="number">.0</span><span class="number">.24</span> closed.</span><br><span class="line">Build step <span class="string">'Execute shell'</span> marked build <span class="keyword">as</span> failure</span><br></pre></td></tr></table></figure>

<p>原因就是kill_process 的状态是由：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ -n <span class="string">"`ps -ef |grep $&#123;process&#125;|grep -v grep| awk '&#123;print $2&#125;' | head -1`"</span> ]</span><br></pre></td></tr></table></figure>

<p>这个判断决定，而该进程当时是不存在的，不存在则状态就是非0，所以函数执行等效是失败的。实际上，业务是允许的进程不存在的，所以优化为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">kill_process</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    local process=$&#123;<span class="number">1</span>&#125;</span><br><span class="line">    #进程存在则执行kill动作，进程不存在什么也不做</span><br><span class="line">    [ -n <span class="string">"`ps -ef |grep $&#123;process&#125;|grep -v grep| awk '&#123;print $2&#125;' | head -1`"</span> ] &amp;&amp; \</span><br><span class="line">    ps -ef |grep $&#123;process&#125;|grep -v grep| awk <span class="string">'&#123;print $2&#125;'</span> | xargs kill <span class="number">-9</span> || <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>就是进程存在则kill掉，kill会返回成功状态。进程不存在，也返回成功状态。</p>
<h2 id="3、找不到参数控件，你可能只是用错了item类型"><a href="#3、找不到参数控件，你可能只是用错了item类型" class="headerlink" title="3、找不到参数控件，你可能只是用错了item类型"></a>3、找不到参数控件，你可能只是用错了item类型</h2><p>我曾网上查找到jenkins的参数化方法，但是我自己的项目始终找不到对应的控件，试过了重装、降版本，卸载插件之类无效的方案。<br>最后，换成了“<strong>构建一个自由风格的软件项目”</strong><br>哦，我想要的都有了。。。。。</p>
<h2 id="4、同一个函数，有的成功了，有的失败了，你可能是本地的参数没有明确定义"><a href="#4、同一个函数，有的成功了，有的失败了，你可能是本地的参数没有明确定义" class="headerlink" title="4、同一个函数，有的成功了，有的失败了，你可能是本地的参数没有明确定义"></a>4、同一个函数，有的成功了，有的失败了，你可能是本地的参数没有明确定义</h2><p>如下脚本，注销的<br>local SITE_PATH=”/arthas/sites/”<br>函数被循环调用，则SITE_PATH这个参数不明确定义的话，使用的就是上一次被定义的值。而这个值，却不一定会在下次调用中存在，就会报错。<br><strong>所以，编写的函数一定要明确定义参数。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">kill_remote_process</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    local deploy_function=<span class="string">"$&#123;USER_HOME&#125;/deploy_function.sh"</span></span><br><span class="line">    local ip=$&#123;<span class="number">1</span>&#125;</span><br><span class="line">    local process=$&#123;<span class="number">2</span>&#125;</span><br><span class="line">    #local SITE_PATH="/arthas/sites/"</span><br><span class="line">    get_server_UPP $&#123;ip&#125;</span><br><span class="line">    sshpass -p $PASSWORD scp -P $&#123;CONFIG_REMOTE_PORT&#125; $&#123;deploy_function&#125; $&#123;CONFIG_REMOTE_USER&#125;@$&#123;CONFIG_REMOTE_IP&#125;:$&#123;SITE_PATH&#125;</span><br><span class="line">    sshpass -p $PASSWORD ssh -tt $&#123;CONFIG_REMOTE_USER&#125;@$&#123;CONFIG_REMOTE_IP&#125; -p $&#123;CONFIG_REMOTE_PORT&#125;&lt;&lt;EOF</span><br><span class="line">source $&#123;SITE_PATH&#125;deploy_function.sh</span><br><span class="line">kill_process $&#123;process&#125;</span><br><span class="line">logout</span><br><span class="line">EOF</span><br><span class="line">    <span class="keyword">if</span> [[  (<span class="string">`ps -ef |grep <span class="subst">$&#123;process&#125;</span>|grep -v $0|grep -v grep| grep -v activemq |awk '&#123;print $2&#125;' | head -1`</span>) ]];then</span><br><span class="line">        ps -ef |grep $&#123;process&#125;|grep -v $<span class="number">0</span>|grep -v grep| grep -v activemq | awk <span class="string">'&#123;print $2&#125;'</span> | xargs kill <span class="number">-9</span></span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://blog.windanchaos.tech/2017/10/23/%E6%88%91%E5%9C%A8%E8%81%9A%E5%AE%BD%E5%85%B1%E4%BA%AB%E5%87%BD%E6%95%B0%E4%B8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windanchaos">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="宇弦">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/10/23/%E6%88%91%E5%9C%A8%E8%81%9A%E5%AE%BD%E5%85%B1%E4%BA%AB%E5%87%BD%E6%95%B0%E4%B8%80/" class="post-title-link" itemprop="url">我在聚宽共享函数一</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-10-23 23:37:16" itemprop="dateCreated datePublished" datetime="2017-10-23T23:37:16+08:00">2017-10-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-11-23 23:11:57" itemprop="dateModified" datetime="2019-11-23T23:11:57+08:00">2019-11-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">python编程语言</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/10/23/%E6%88%91%E5%9C%A8%E8%81%9A%E5%AE%BD%E5%85%B1%E4%BA%AB%E5%87%BD%E6%95%B0%E4%B8%80/" class="post-meta-item leancloud_visitors" data-flag-title="我在聚宽共享函数一" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2017/10/23/%E6%88%91%E5%9C%A8%E8%81%9A%E5%AE%BD%E5%85%B1%E4%BA%AB%E5%87%BD%E6%95%B0%E4%B8%80/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/10/23/%E6%88%91%E5%9C%A8%E8%81%9A%E5%AE%BD%E5%85%B1%E4%BA%AB%E5%87%BD%E6%95%B0%E4%B8%80/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>该函数设计目的：保护既得利润，以N日内持仓股票最低盈利被突破为触发条件，所以持股时间最低为N日，为保证有效持股，N日之前亏损不会计入（该条件不需要的可以自己去掉）。函数以股票为输入，需要在自己的函数（持股或卖出判断）每日调用。需要自定义全局（JQ提交代码不能提交函数外的东东）。</p>
<p>函数怎么运行的：<br>为输入的股票（当然是自己的持仓的）建立一个长度为N的队列（FIFO，先进先出），比如，建仓股票A了，则新建队列{A:队列}的数据格式，然后每日调用将盈亏比例记录到队列当中，当队列长度达到N，就开始取队列中的最小值和新来的（就是第N+1天来的）盈亏比进行比较，新来的大，就把第一天的盈利数据删除，再把新来的记录进去。反之就触发卖出。如此，只要不触发卖出就继续持股，判断的始终是距离函数调用日期前N日的盈利，从而实现动态保护利润。</p>
<p>当然，该函数还可以改成你想的形式（自己实现咯）：<br>比如：N日内平均利润被突破后触发卖出<br>比如：N日内最高利润回调多少后触发卖出<br>比如：最高利润达到一定范围回调触发卖出，最高利润10%回调3%就卖，20%回调6%就卖，30%回调10%就买等。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#全局参数</span><br><span class="line"> #存储持股的字典&#123;security:qu.Queue(maxsize = g.queue_longth )&#125;</span><br><span class="line"> g.security_win_queue = &#123;&#125;</span><br><span class="line"> #N日长度定义</span><br><span class="line"> g.queue_longth = <span class="number">12</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def security_win_queue(context,security):</span><br><span class="line">    current_price = history(<span class="number">1</span>, <span class="string">'1m'</span>, <span class="string">'close'</span>, security).iloc[<span class="number">0</span>].iloc[<span class="number">0</span>]</span><br><span class="line">    # 获取买入平均价格</span><br><span class="line">    avg_cost = context.portfolio.positions[security].avg_cost</span><br><span class="line">    #盈利推入队列dd['bar'].append('quux')</span><br><span class="line">    win_percentage = (current_price - avg_cost)/avg_cost * <span class="number">100</span></span><br><span class="line">    #若是新增，则例行初始化&#123;security:queue&#125;</span><br><span class="line">    <span class="keyword">if</span> not g.security_win_queue.has_key(security):</span><br><span class="line">        g.security_win_queue[security] = qu.Queue(maxsize=g.queue_longth)</span><br><span class="line"></span><br><span class="line">    #没有记满，就继续记</span><br><span class="line">    <span class="keyword">if</span> not g.security_win_queue[security].full():</span><br><span class="line">        #亏损的比例在持股初期不录入保证未突破止损线之前不卖出</span><br><span class="line">         <span class="keyword">if</span> win_percentage &gt; <span class="number">0</span>:</span><br><span class="line">            g.security_win_queue[security].put(win_percentage)</span><br><span class="line">            print(security,win_percentage,<span class="string">'qsize:'</span>,g.security_win_queue[security].qsize())</span><br><span class="line">    #满了则进行盈利比较</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        #取N日最小值盈利</span><br><span class="line">        tmp_win_list = []</span><br><span class="line">        queue_size = g.security_win_queue[security].qsize()</span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> range(queue_size):</span><br><span class="line">            tmp_win_list.append(g.security_win_queue[security].get())</span><br><span class="line"></span><br><span class="line">        #排序盈利并取最小</span><br><span class="line">        sorted_tmp_win_list = sorted(tmp_win_list)</span><br><span class="line">        #排除最小值后把队列恢复。</span><br><span class="line">        minimum = sorted_tmp_win_list[<span class="number">0</span>]</span><br><span class="line">        #排除最小值[0]</span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> range(<span class="number">1</span>,queue_size):</span><br><span class="line">            g.security_win_queue[security].put(sorted_tmp_win_list[w])</span><br><span class="line">        <span class="keyword">if</span> win_percentage &lt; minimum:</span><br><span class="line">            #返回true则需要卖出否则返回false继续持有</span><br><span class="line">            <span class="keyword">return</span> True</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">        #将新的盈利推入队列    </span><br><span class="line">            g.security_win_queue[security].put(win_percentage)</span><br><span class="line">            <span class="keyword">return</span> False</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://blog.windanchaos.tech/2017/10/20/%EF%BC%BBJavaWeb%E5%9F%BA%E7%A1%80%EF%BC%BDjsp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windanchaos">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="宇弦">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/10/20/%EF%BC%BBJavaWeb%E5%9F%BA%E7%A1%80%EF%BC%BDjsp/" class="post-title-link" itemprop="url">［JavaWeb基础］jsp</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-10-20 00:16:01" itemprop="dateCreated datePublished" datetime="2017-10-20T00:16:01+08:00">2017-10-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-11-23 23:11:57" itemprop="dateModified" datetime="2019-11-23T23:11:57+08:00">2019-11-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">Java编程语言</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/10/20/%EF%BC%BBJavaWeb%E5%9F%BA%E7%A1%80%EF%BC%BDjsp/" class="post-meta-item leancloud_visitors" data-flag-title="［JavaWeb基础］jsp" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2017/10/20/%EF%BC%BBJavaWeb%E5%9F%BA%E7%A1%80%EF%BC%BDjsp/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/10/20/%EF%BC%BBJavaWeb%E5%9F%BA%E7%A1%80%EF%BC%BDjsp/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>以下内容整理编辑参考：<br><a href="http://www.runoob.com" target="_blank" rel="noopener">http://www.runoob.com</a></p>
<h1 id="什么是jsp"><a href="#什么是jsp" class="headerlink" title="什么是jsp"></a>什么是jsp</h1><p>JSP全称Java Server Pages，是一种动态网页开发技术。它使用JSP标签在HTML网页中插入Java代码。而识别它的方式，是以&lt;%开头以%&gt;结束的标签。</p>
<p>JSP通过网页表单获取用户输入数据、访问数据库及其他数据源，动态地创建网页。</p>
<p>JSP标签有多种功能，比如访问数据库、记录用户选择信息、访问JavaBeans组件等，还可以在不同的网页中传递控制信息和共享信息。</p>
<h1 id="jsp的处理流程和生命周期"><a href="#jsp的处理流程和生命周期" class="headerlink" title="jsp的处理流程和生命周期"></a>jsp的处理流程和生命周期</h1><p><img src="/images/om-wp-content-uploads-2014-01-jsp-processing.jpg.png" alt="处理流程"></p>
<p>就像其他普通的网页一样，您的浏览器发送一个 HTTP 请求给服务器。<br>Web 服务器识别出这是一个对 JSP 网页的请求，并且将该请求传递给 JSP 引擎。通过使用 URL或者 .jsp 文件来完成。<br>JSP 引擎从磁盘中载入 JSP 文件，然后将它们转化为 Servlet。这种转化只是简单地将所有模板文本改用 println() 语句，并且将所有的 JSP 元素转化成 Java 代码。<br>JSP 引擎将 Servlet 编译成可执行类，并且将原始请求传递给 Servlet 引擎。<br>Web 服务器的某组件将会调用 Servlet 引擎，然后载入并执行 Servlet 类。在执行过程中，Servlet 产生 HTML 格式的输出并将其内嵌于 HTTP response 中上交给 Web 服务器。<br>Web 服务器以静态 HTML 网页的形式将 HTTP response 返回到您的浏览器中。<br>最终，Web 浏览器处理 HTTP response 中动态产生的HTML网页，就好像在处理静态网页一样。</p>
<p><img src="/images/om-wp-content-uploads-2014-01-jsp_life_cycle.jpg.png" alt="生命周期"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">编译阶段：</span><br><span class="line"></span><br><span class="line">servlet容器编译servlet源文件，生成servlet类</span><br><span class="line">初始化阶段：</span><br><span class="line"></span><br><span class="line">加载与JSP对应的servlet类，创建其实例，并调用它的初始化方法</span><br><span class="line">执行阶段：</span><br><span class="line"></span><br><span class="line">调用与JSP对应的servlet实例的服务方法</span><br><span class="line">销毁阶段：</span><br><span class="line"></span><br><span class="line">调用与JSP对应的servlet实例的销毁方法，然后销毁servlet实例</span><br></pre></td></tr></table></figure>

<h1 id="JSP作用和Servlet分工"><a href="#JSP作用和Servlet分工" class="headerlink" title="JSP作用和Servlet分工"></a>JSP作用和Servlet分工</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* Servlet：</span><br><span class="line">&gt; 缺点：不适合设置html响应体，需要大量的response.getWriter().print(<span class="string">"&lt;html&gt;"</span>)</span><br><span class="line">&gt; 优点：动态资源，可以编程。</span><br><span class="line">* html：</span><br><span class="line">&gt; 缺点：html是静态页面，不能包含动态信息</span><br><span class="line">&gt; 优点：不用为输出html标签而发愁</span><br><span class="line">* jsp(java server pages)：</span><br><span class="line">&gt; 优点：在原有html的基础上添加java脚本，构成jsp页面。</span><br><span class="line"></span><br><span class="line">* JSP：</span><br><span class="line">&gt; 作为请求发起页面，例如显示表单、超链接。</span><br><span class="line">&gt; 作为请求结束页面，例如显示数据。</span><br><span class="line">* Servlet：</span><br><span class="line">&gt; 作为请求中处理数据的环节。</span><br></pre></td></tr></table></figure>

<p><img src="/images/dn.net-20160817155819901-watermark-2-text-aHR0cDovL2Jsb2cuY3Nkbi5uZXQv-font-5a6L5L2T-fontsize-400-fill-I0JBQkFCMA==-dissolve-70-gravity-Center.png" alt="这里写图片描述"><br>参考：<a href="http://blog.csdn.net/qq_25827845/article/details/52231724" target="_blank" rel="noopener">http://blog.csdn.net/qq_25827845/article/details/52231724</a></p>
<h1 id="JSP-语法"><a href="#JSP-语法" class="headerlink" title="JSP 语法"></a>JSP 语法</h1><h2 id="脚本程序"><a href="#脚本程序" class="headerlink" title="脚本程序"></a>脚本程序</h2><p>脚本程序可以包含任意量的Java语句、变量、方法或表达式，只要它们在脚本语言中是有效的。</p>
<p>脚本程序的语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% 代码片段 %&gt;</span><br></pre></td></tr></table></figure>

<h2 id="JSP声明"><a href="#JSP声明" class="headerlink" title="JSP声明"></a>JSP声明</h2><p>一个声明语句可以声明一个或多个变量、方法，供后面的Java代码使用。在JSP文件中，您必须先声明这些变量和方法然后才能使用它们。</p>
<p>JSP声明的语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! declaration; [ declaration; ]+ ... %&gt;</span><br></pre></td></tr></table></figure>

<h2 id="JSP表达式"><a href="#JSP表达式" class="headerlink" title="JSP表达式"></a>JSP表达式</h2><p>一个JSP表达式中包含的脚本语言表达式，先被转化成String，然后插入到表达式出现的地方。</p>
<p>由于表达式的值会被转化成String，所以您可以在一个文本行中使用表达式而不用去管它是否是HTML标签。</p>
<p>表达式元素中可以包含任何符合Java语言规范的表达式，但是不能使用分号来结束表达式。</p>
<p>JSP表达式的语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= 表达式 %&gt;</span><br></pre></td></tr></table></figure>

<h2 id="JSP注释"><a href="#JSP注释" class="headerlink" title="JSP注释"></a>JSP注释</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%-- 该部分注释在网页中不会被显示--%&gt;</span><br></pre></td></tr></table></figure>
<p> <strong>语法</strong> 描述 &lt;%– 注释 –%&gt; JSP注释，注释内容不会被发送至浏览器甚至不会被编译 &lt;!– 注释 –&gt; HTML注释，通过浏览器查看网页源代码时可以看见注释内容 &lt;% 代表静态 &lt;%常量 %&gt; 代表静态 %&gt; 常量 \’ 在属性中使用的单引号 \” 在属性中使用的双引号</p>
<h2 id="JSP指令"><a href="#JSP指令" class="headerlink" title="JSP指令"></a>JSP指令</h2><p>JSP指令用来设置与整个JSP页面相关的属性。</p>
<p>JSP指令语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ directive attribute=<span class="string">"value"</span> %&gt;</span><br></pre></td></tr></table></figure>
<p> <strong>指令</strong> <strong>描述</strong> &lt;%@ page … %&gt; 定义页面的依赖属性，比如脚本语言、error页面、缓存需求等等 &lt;%@ include … %&gt; 包含其他文件 &lt;%@ taglib … %&gt; 引入标签库的定义，可以是自定义标签</p>
<h2 id="JSP行为"><a href="#JSP行为" class="headerlink" title="JSP行为"></a>JSP行为</h2><p>JSP行为标签使用XML语法结构来控制servlet引擎。它能够动态插入一个文件，重用JavaBean组件，引导用户去另一个页面，为Java插件产生相关的HTML等等。</p>
<p>行为标签只有一种语法格式，它严格遵守XML标准：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:action_name attribute=<span class="string">"value"</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>行为标签基本上是一些预先就定义好的函数，下表罗列出了一些可用的JSP行为标签：</p>
<p><strong>语法</strong> <strong>描述</strong> jsp:include 用于在当前页面中包含静态或动态资源 jsp:useBean 寻找和初始化一个JavaBean组件 jsp:setProperty 设置 JavaBean组件的值 jsp:getProperty 将 JavaBean组件的值插入到 output中 jsp:forward 从一个JSP文件向另一个文件传递一个包含用户请求的request对象 jsp:plugin 用于在生成的HTML页面中包含Applet和JavaBean对象 jsp:element 动态创建一个XML元素 jsp:attribute 定义动态创建的XML元素的属性 jsp:body 定义动态创建的XML元素的主体 jsp:text 用于封装模板数据</p>
<h2 id="JSP内置对象"><a href="#JSP内置对象" class="headerlink" title="JSP内置对象"></a>JSP内置对象</h2><p><strong>对象</strong> <strong>描述</strong> request <strong>HttpServletRequest</strong>类的实例 response <strong>HttpServletResponse</strong>类的实例 out <strong>PrintWriter</strong>类的实例，用于把结果输出至网页上 session <strong>HttpSession</strong>类的实例 application <strong>ServletContext</strong>类的实例，与应用上下文有关 config <strong>ServletConfig</strong>类的实例 pageContext <strong>PageContext</strong>类的实例，提供对JSP页面所有对象以及命名空间的访问 page 类似于Java类中的this关键字 Exception <strong>Exception</strong>类的对象，代表发生错误的JSP页面中对应的异常对象</p>
<h1 id="JSP-标准标签库（JSTL）"><a href="#JSP-标准标签库（JSTL）" class="headerlink" title="JSP 标准标签库（JSTL）"></a>JSP 标准标签库（JSTL）</h1><p>JSP标准标签库（JSTL）是一个JSP标签集合，它封装了JSP应用的通用核心功能。</p>
<p>JSTL支持通用的、结构化的任务，比如迭代，条件判断，XML文档操作，国际化标签，SQL标签。 除了这些，它还提供了一个框架来使用集成JSTL的自定义标签。</p>
<p>核心标签是最常用的JSTL标签。引用核心标签库的语法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> </span><br><span class="line">           uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br></pre></td></tr></table></figure>
<p> 标签 描述 用于在JSP中显示数据，就像&lt;%= … &gt; 用于保存数据 用于删除数据 用来处理产生错误的异常状况，并且将错误信息储存起来 与我们在一般程序中用的if一样 本身只当做&lt;c:when&gt;和&lt;c:otherwise&gt;的父标签 &lt;c:choose&gt;的子标签，用来判断条件是否成立 &lt;c:choose&gt;的子标签，接在&lt;c:when&gt;标签后，当&lt;c:when&gt;标签判断为false时被执行 检索一个绝对或相对 URL，然后将其内容暴露给页面 基础迭代标签，接受多种集合类型 根据指定的分隔符来分隔内容并迭代输出 用来给包含或重定向的页面传递参数 重定向至一个新的URL. 使用可选的查询参数来创造一个URL</p>
<p>其他若干标签，参考<a href="http://www.runoob.com/jsp/jsp-jstl.html" target="_blank" rel="noopener">http://www.runoob.com/jsp/jsp-jstl.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://blog.windanchaos.tech/2017/09/27/Appium_Python_Api/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windanchaos">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="宇弦">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/09/27/Appium_Python_Api/" class="post-title-link" itemprop="url">Appium_Python_Api</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-09-27 23:54:22" itemprop="dateCreated datePublished" datetime="2017-09-27T23:54:22+08:00">2017-09-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-11-23 23:11:57" itemprop="dateModified" datetime="2019-11-23T23:11:57+08:00">2019-11-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">自动化测试</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/09/27/Appium_Python_Api/" class="post-meta-item leancloud_visitors" data-flag-title="Appium_Python_Api" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2017/09/27/Appium_Python_Api/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/09/27/Appium_Python_Api/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文转自<a href="https://testerhome.com/topics/3711" target="_blank" rel="noopener">TesterHome</a>《<strong>Appium_Python_Api文档</strong>》</p>
<p><strong>1.contexts</strong><br>contexts(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Returns the contexts within the current session.</span><br><span class="line">    返回当前会话中的上下文，使用后可以识别H5页面的控件</span><br><span class="line"></span><br><span class="line">    :Usage:</span><br><span class="line">        driver.contexts</span><br><span class="line">用法 driver.contexts</span><br></pre></td></tr></table></figure>

<p><strong>2. current_context</strong><br>current_context(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Returns the current context <span class="keyword">of</span> the current session.</span><br><span class="line">    返回当前会话的当前上下文</span><br><span class="line">    :Usage:</span><br><span class="line">        driver.current_context</span><br><span class="line">用法driver. current_context</span><br></pre></td></tr></table></figure>

<p><strong>3. context</strong><br>context(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Returns the current context <span class="keyword">of</span> the current session.</span><br><span class="line">    返回当前会话的当前上下文。</span><br><span class="line">    :Usage:</span><br><span class="line">        driver.context</span><br><span class="line">用法driver. Context</span><br></pre></td></tr></table></figure>

<p><strong>4. find_element_by_ios_uiautomation</strong><br>find_element_by_ios_uiautomation(self, uia_string):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Finds an element by uiautomation <span class="keyword">in</span> iOS.</span><br><span class="line">    通过iOS uiautomation查找元素</span><br><span class="line">    :Args:</span><br><span class="line">     - uia_string - The element name <span class="keyword">in</span> the iOS UIAutomation library</span><br><span class="line"></span><br><span class="line">    :Usage:</span><br><span class="line">        driver.find_element_by_ios_uiautomation(<span class="string">'.elements()[1].cells()[2]'</span>)</span><br><span class="line">用法dr. find_element_by_ios_uiautomation(‘elements’)</span><br></pre></td></tr></table></figure>

<p><strong>5. find_element_by_accessibility_id</strong><br>find_element_by_accessibility_id(self, id):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Finds an element by accessibility id.</span><br><span class="line">    通过accessibility id查找元素</span><br><span class="line">    :Args:</span><br><span class="line">     - id - a string corresponding to a recursive element search using the</span><br><span class="line">     Id/Name that the native Accessibility options utilize</span><br><span class="line"></span><br><span class="line">    :Usage:</span><br><span class="line">        driver.find_element_by_accessibility_id()</span><br><span class="line">用法driver.find_element_by_accessibility_id(‘id’)</span><br></pre></td></tr></table></figure>

<p><strong>6.scroll</strong><br>scroll(self, origin_el, destination_el):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Scrolls <span class="keyword">from</span> one element to another</span><br><span class="line">    从元素origin_el滚动至元素destination_el</span><br><span class="line">    :Args:</span><br><span class="line">     - originalEl - the element <span class="keyword">from</span> which to being scrolling</span><br><span class="line">     - destinationEl - the element to scroll to</span><br><span class="line"></span><br><span class="line">    :Usage:</span><br><span class="line">        driver.scroll(el1, el2)</span><br><span class="line">用法 driver.scroll(el1,el2)</span><br></pre></td></tr></table></figure>

<p><strong>7. drag_and_drop</strong><br>drag_and_drop(self, origin_el, destination_el):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Drag the origin element to the destination element</span><br><span class="line">    将元素origin_el拖到目标元素destination_el</span><br><span class="line">    :Args:</span><br><span class="line">     - originEl - the element to drag</span><br><span class="line">     - destinationEl - the element to drag to</span><br><span class="line">用法 driver.drag_and_drop(el1,el2)</span><br></pre></td></tr></table></figure>

<p><strong>8.tap</strong><br>tap(self, positions, duration=None):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Taps on an particular place <span class="keyword">with</span> up to five fingers, holding <span class="keyword">for</span> a certain time</span><br><span class="line">模拟手指点击（最多五个手指），可设置按住时间长度（毫秒）</span><br><span class="line"></span><br><span class="line">    :Args:</span><br><span class="line">     - positions - an array <span class="keyword">of</span> tuples representing the x/y coordinates <span class="keyword">of</span></span><br><span class="line">     the fingers to tap. Length can be up to five.</span><br><span class="line">     - duration - (optional) length <span class="keyword">of</span> time to tap, <span class="keyword">in</span> ms</span><br><span class="line"></span><br><span class="line">    :Usage:</span><br><span class="line">        driver.tap([(<span class="number">100</span>, <span class="number">20</span>), (<span class="number">100</span>, <span class="number">60</span>), (<span class="number">100</span>, <span class="number">100</span>)], <span class="number">500</span>)</span><br><span class="line">用法 driver.tap([(x,y),(x1,y1)],<span class="number">500</span>)</span><br></pre></td></tr></table></figure>

<p><strong>9. swipe</strong><br>swipe(self, start_x, start_y, end_x, end_y, duration=None):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Swipe <span class="keyword">from</span> one point to another point, <span class="keyword">for</span> an optional duration.</span><br><span class="line">    从A点滑动至B点，滑动时间为毫秒</span><br><span class="line">    :Args:</span><br><span class="line">     - start_x - x-coordinate at which to start</span><br><span class="line">     - start_y - y-coordinate at which to start</span><br><span class="line">     - end_x - x-coordinate at which to stop</span><br><span class="line">     - end_y - y-coordinate at which to stop</span><br><span class="line">     - duration - (optional) time to take the swipe, <span class="keyword">in</span> ms.</span><br><span class="line"></span><br><span class="line">    :Usage:</span><br><span class="line">        driver.swipe(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">400</span>)</span><br><span class="line">用法 driver.swipe(x1,y1,x2,y2,<span class="number">500</span>)</span><br></pre></td></tr></table></figure>

<p><strong>10.flick</strong><br>flick(self, start_x, start_y, end_x, end_y):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Flick <span class="keyword">from</span> one point to another point.</span><br><span class="line">    按住A点后快速滑动至B点</span><br><span class="line">    :Args:</span><br><span class="line">     - start_x - x-coordinate at which to start</span><br><span class="line">     - start_y - y-coordinate at which to start</span><br><span class="line">     - end_x - x-coordinate at which to stop</span><br><span class="line">     - end_y - y-coordinate at which to stop</span><br><span class="line"></span><br><span class="line">    :Usage:</span><br><span class="line">        driver.flick(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">400</span>)</span><br></pre></td></tr></table></figure>

<p>用法 driver.flick(x1,y1,x2,y2)<br><strong>11.pinch</strong><br>pinch(self, element=None, percent=200, steps=50):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Pinch on an element a certain amount</span><br><span class="line">    在元素上执行模拟双指捏（缩小操作）</span><br><span class="line">    :Args:</span><br><span class="line">     - element - the element to pinch</span><br><span class="line">     - percent - (optional) amount to pinch. Defaults to <span class="number">200</span>%</span><br><span class="line">     - steps - (optional) number <span class="keyword">of</span> steps <span class="keyword">in</span> the pinch action</span><br><span class="line"></span><br><span class="line">    :Usage:</span><br><span class="line">        driver.pinch(element)</span><br></pre></td></tr></table></figure>

<p>用法 driver.pinch(element)<br><strong>12.zoom</strong><br>zoom(self, element=None, percent=200, steps=50):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Zooms <span class="keyword">in</span> on an element a certain amount</span><br><span class="line">    在元素上执行放大操作</span><br><span class="line">    :Args:</span><br><span class="line">     - element - the element to zoom</span><br><span class="line">     - percent - (optional) amount to zoom. Defaults to <span class="number">200</span>%</span><br><span class="line">     - steps - (optional) number <span class="keyword">of</span> steps <span class="keyword">in</span> the zoom action</span><br><span class="line"></span><br><span class="line">    :Usage:</span><br><span class="line">        driver.zoom(element)</span><br></pre></td></tr></table></figure>

<p>用法 driver.zoom(element)<br><strong>13.reset</strong><br>reset(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Resets the current application on the device.</span><br><span class="line">重置应用(类似删除应用数据)</span><br><span class="line">用法 driver.reset()</span><br></pre></td></tr></table></figure>

<p><strong>14. hide_keyboard</strong><br>hide_keyboard(self, key_name=None, key=None, strategy=None):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Hides the software keyboard on the device. In iOS, use <span class="string">`key_name`</span> to press a particular key, or <span class="string">`strategy`</span>. In Android, no parameters are used.</span><br><span class="line">    隐藏键盘,iOS使用key_name隐藏，安卓不使用参数</span><br><span class="line"></span><br><span class="line">    :Args:</span><br><span class="line">     - key_name - key to press</span><br><span class="line">     - strategy - strategy <span class="keyword">for</span> closing the keyboard (e.g., <span class="string">`tapOutside`</span>)</span><br><span class="line">driver.hide_keyboard()</span><br></pre></td></tr></table></figure>

<p><strong>15. keyevent</strong><br>keyevent(self, keycode, metastate=None):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Sends a keycode to the device. Android only. Possible keycodes can be found <span class="keyword">in</span> http:<span class="comment">//developer.android.com/reference/android/view/KeyEvent.html.</span></span><br><span class="line">    发送按键码（安卓仅有），按键码可以上网址中找到</span><br><span class="line">    :Args:</span><br><span class="line">     - keycode - the keycode to be sent to the device</span><br><span class="line">     - metastate - meta information about the keycode being sent</span><br><span class="line">用法 dr.keyevent(‘<span class="number">4</span>’)</span><br></pre></td></tr></table></figure>

<p><strong>16. press_keycode</strong><br>press_keycode(self, keycode, metastate=None):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Sends a keycode to the device. Android only. Possible keycodes can be found <span class="keyword">in</span> http:<span class="comment">//developer.android.com/reference/android/view/KeyEvent.html.</span></span><br><span class="line">    发送按键码（安卓仅有），按键码可以上网址中找到</span><br><span class="line"></span><br><span class="line">    :Args:</span><br><span class="line">     - keycode - the keycode to be sent to the device</span><br><span class="line">     - metastate - meta information about the keycode being sent</span><br><span class="line">用法 driver.press_ keycode(‘<span class="number">4</span>’)</span><br></pre></td></tr></table></figure>

<p>dr.keyevent(‘4’)与driver.press_ keycode(‘4’) 功能实现上一样的，都是按了返回键<br><strong>17. long_press_keycode</strong><br>long_press_keycode(self, keycode, metastate=None):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Sends a long press <span class="keyword">of</span> keycode to the device. Android only. Possible keycodes can be</span><br><span class="line">    found <span class="keyword">in</span> http:<span class="comment">//developer.android.com/reference/android/view/KeyEvent.html.</span></span><br><span class="line">    发送一个长按的按键码（长按某键）</span><br><span class="line">   详细的按键代码见这里  http:<span class="comment">//developer.android.com/reference/android/view/KeyEvent.html.</span></span><br><span class="line"></span><br><span class="line">    :Args:</span><br><span class="line">     - keycode - the keycode to be sent to the device</span><br><span class="line">     - metastate - meta information about the keycode being sent</span><br><span class="line"> 用法 driver.long_press_keycode(<span class="number">4</span>)  谢谢@t880216t童鞋反馈</span><br></pre></td></tr></table></figure>

<p><strong>18.current_activity</strong><br>current_activity(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Retrieves the current activity on the device.</span><br><span class="line">获取当前的activity</span><br><span class="line">用法 print(driver.current_activity)</span><br></pre></td></tr></table></figure>

<p><strong>19. wait_activity</strong><br>wait_activity(self, activity, timeout, interval=1):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Wait <span class="keyword">for</span> an activity: block until target activity presents or time out.</span><br><span class="line">    This is an Android-only method.</span><br><span class="line">    等待指定的activity出现直到超时，interval为扫描间隔<span class="number">1</span>秒</span><br><span class="line">即每隔几秒获取一次当前的activity</span><br><span class="line">返回的True 或 False</span><br><span class="line">    :Agrs:</span><br><span class="line">     - activity - target activity</span><br><span class="line">     - timeout - max wait time, <span class="keyword">in</span> seconds</span><br><span class="line">     - interval - sleep interval between retries, <span class="keyword">in</span> seconds</span><br><span class="line">用法driver.wait_activity(‘.activity.xxx’,<span class="number">5</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p><strong>20. background_app</strong><br>background_app(self, seconds):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Puts the application <span class="keyword">in</span> the background on the device <span class="keyword">for</span> a certain duration.</span><br><span class="line">    后台运行app多少秒</span><br><span class="line">    :Args:</span><br><span class="line">     - seconds - the duration <span class="keyword">for</span> the application to remain <span class="keyword">in</span> the background</span><br><span class="line">用法 driver.background_app(<span class="number">5</span>)   置后台<span class="number">5</span>秒后再运行</span><br></pre></td></tr></table></figure>

<p><strong>21.is_app_installed</strong><br>is_app_installed(self, bundle_id):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Checks whether the application specified by <span class="string">`bundle_id`</span> is installed on the device.</span><br><span class="line">    检查app是否有安装</span><br><span class="line">返回 True or False</span><br><span class="line">    :Args:</span><br><span class="line">     - bundle_id - the id <span class="keyword">of</span> the application to query</span><br><span class="line">用法 driver.is_app_installed(“com.xxxx”)</span><br></pre></td></tr></table></figure>

<p><strong>22.install_app</strong><br>install_app(self, app_path):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Install the application found at <span class="string">`app_path`</span> on the device.</span><br><span class="line">    安装app,app_path为安装包路径</span><br><span class="line">    :Args:</span><br><span class="line">     - app_path - the local or remote path to the application to install</span><br><span class="line">用法 driver.install_app(app_path)</span><br></pre></td></tr></table></figure>

<p><strong>23.remove_app</strong><br>remove_app(self, app_id):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Remove the specified application <span class="keyword">from</span> the device.</span><br><span class="line">    删除app</span><br><span class="line">    :Args:</span><br><span class="line">     - app_id - the application id to be removed</span><br><span class="line">用法 driver.remove_app(“com.xxx.”)</span><br></pre></td></tr></table></figure>

<p><strong>24.launch_app</strong><br>launch_app(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Start on the device the application specified <span class="keyword">in</span> the desired capabilities.</span><br><span class="line">启动app</span><br><span class="line">用法 driver.launch_app()</span><br></pre></td></tr></table></figure>

<p><strong>25.close_app</strong><br>close_app(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Stop the running application, specified <span class="keyword">in</span> the desired capabilities, on the device.</span><br><span class="line">关闭app</span><br><span class="line">用法 driver.close_app()</span><br><span class="line">启动和关闭app运行好像会出错</span><br></pre></td></tr></table></figure>

<p><strong>26. start_activity</strong><br>start_activity(self, app_package, app_activity, /<em>/</em>opts):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Opens an arbitrary activity during a test. If the activity belongs to</span><br><span class="line">    another application, that application is started and the activity is opened.</span><br><span class="line"></span><br><span class="line">    This is an Android-only method.</span><br><span class="line">    在测试过程中打开任意活动。如果活动属于另一个应用程序，该应用程序的启动和活动被打开。</span><br><span class="line">这是一个安卓的方法</span><br><span class="line">    :Args:</span><br><span class="line">    - app_package - The package containing the activity to start.</span><br><span class="line">    - app_activity - The activity to start.</span><br><span class="line">    - app_wait_package - Begin automation after <span class="keyword">this</span> package starts (optional).</span><br><span class="line">    - app_wait_activity - Begin automation after <span class="keyword">this</span> activity starts (optional).</span><br><span class="line">    - intent_action - Intent to start (optional).</span><br><span class="line">    - intent_category - Intent category to start (optional).</span><br><span class="line">    - intent_flags - Flags to send to the intent (optional).</span><br><span class="line">    - optional_intent_arguments - Optional <span class="built_in">arguments</span> to the intent (optional).</span><br><span class="line">    - stop_app_on_reset - Should the app be stopped on reset (optional)?</span><br><span class="line">用法 driver.start_activity(app_package, app_activity)</span><br></pre></td></tr></table></figure>

<p><strong>27.lock</strong><br>lock(self, seconds):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Lock the device <span class="keyword">for</span> a certain period <span class="keyword">of</span> time. iOS only.</span><br><span class="line">    锁屏一段时间  iOS专有</span><br><span class="line">    :Args:</span><br><span class="line">     - the duration to lock the device, <span class="keyword">in</span> seconds</span><br><span class="line">用法 driver.lock()</span><br></pre></td></tr></table></figure>

<p><strong>28.shake</strong><br>shake(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Shake the device.</span><br><span class="line">摇一摇手机</span><br><span class="line">用法 driver.shake()</span><br></pre></td></tr></table></figure>

<p><strong>29.open_notifications</strong><br>open_notifications(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Open notification shade <span class="keyword">in</span> Android (API Level <span class="number">18</span> and above)</span><br><span class="line">打系统通知栏（仅支持API <span class="number">18</span> 以上的安卓系统）</span><br><span class="line">用法 driver.open_notifications()</span><br></pre></td></tr></table></figure>

<p><strong>30.network_connection</strong><br>network_connection(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Returns an integer bitmask specifying the network connection type.</span><br><span class="line">    Android only.</span><br><span class="line">返回网络类型  数值</span><br><span class="line">    Possible values are available through the enumeration <span class="string">`appium.webdriver.ConnectionType`</span></span><br><span class="line"></span><br><span class="line">用法 driver.network_connection</span><br></pre></td></tr></table></figure>

<p><strong>31. set_network_connection</strong><br>set_network_connection(self, connectionType):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Sets the network connection type. Android only.</span><br><span class="line">    Possible values:</span><br><span class="line">        Value (Alias)      | Data | Wifi | Airplane Mode</span><br><span class="line">        -------------------------------------------------</span><br><span class="line">        <span class="number">0</span> (None)           | <span class="number">0</span>    | <span class="number">0</span>    | <span class="number">0</span></span><br><span class="line">        <span class="number">1</span> (Airplane Mode)  | <span class="number">0</span>    | <span class="number">0</span>    | <span class="number">1</span></span><br><span class="line">        <span class="number">2</span> (Wifi only)      | <span class="number">0</span>    | <span class="number">1</span>    | <span class="number">0</span></span><br><span class="line">        <span class="number">4</span> (Data only)      | <span class="number">1</span>    | <span class="number">0</span>    | <span class="number">0</span></span><br><span class="line">        <span class="number">6</span> (All network on) | <span class="number">1</span>    | <span class="number">1</span>    | <span class="number">0</span></span><br><span class="line">    These are available through the enumeration <span class="string">`appium.webdriver.ConnectionType`</span></span><br><span class="line">    设置网络类型</span><br><span class="line">    :Args:</span><br><span class="line">     - connectionType - a member <span class="keyword">of</span> the enum appium.webdriver.ConnectionType</span><br><span class="line"></span><br><span class="line">用法  先加载<span class="keyword">from</span> appium.webdriver.connectiontype <span class="keyword">import</span> ConnectionType</span><br><span class="line">dr.set_network_connection(ConnectionType.WIFI_ONLY)</span><br><span class="line">ConnectionType的类型有</span><br><span class="line">NO_CONNECTION = <span class="number">0</span></span><br><span class="line">AIRPLANE_MODE = <span class="number">1</span></span><br><span class="line">WIFI_ONLY = <span class="number">2</span></span><br><span class="line">DATA_ONLY = <span class="number">4</span></span><br><span class="line">ALL_NETWORK_ON = <span class="number">6</span></span><br></pre></td></tr></table></figure>

<p><strong>32. available_ime_engines</strong><br>available_ime_engines(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Get the available input methods <span class="keyword">for</span> an Android device. Package and activity are returned (e.g., [<span class="string">'com.android.inputmethod.latin/.LatinIME'</span>])</span><br><span class="line">    Android only.</span><br><span class="line">返回安卓设备可用的输入法</span><br><span class="line">用法print(driver.available_ime_engines)</span><br></pre></td></tr></table></figure>

<p><strong>33.is_ime_active</strong><br>is_ime_active(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Checks whether the device has IME service active. Returns True/False.</span><br><span class="line">    Android only.</span><br><span class="line">检查设备是否有输入法服务活动。返回真/假。</span><br><span class="line">安卓</span><br><span class="line">用法 print(driver.is_ime_active())</span><br></pre></td></tr></table></figure>

<p><strong>34.activate_ime_engine</strong><br>activate_ime_engine(self, engine):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Activates the given IME engine on the device.</span><br><span class="line">    Android only.</span><br><span class="line">    激活安卓设备中的指定输入法，设备可用输入法可以从“available_ime_engines”获取</span><br><span class="line">    :Args:</span><br><span class="line">     - engine - the package and activity <span class="keyword">of</span> the IME engine to activate (e.g.,</span><br><span class="line">        <span class="string">'com.android.inputmethod.latin/.LatinIME'</span>)</span><br><span class="line"></span><br><span class="line">用法 driver.activate_ime_engine(“com.android.inputmethod.latin/.LatinIME”)</span><br></pre></td></tr></table></figure>

<p><strong>35.deactivate_ime_engine</strong><br>deactivate_ime_engine(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Deactivates the currently active IME engine on the device.</span><br><span class="line">    Android only.</span><br><span class="line">关闭安卓设备当前的输入法</span><br><span class="line">用法 driver.deactivate_ime_engine()</span><br></pre></td></tr></table></figure>

<p><strong>36.active_ime_engine</strong><br>active_ime_engine(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Returns the activity and package <span class="keyword">of</span> the currently active IME engine (e.g.,</span><br><span class="line">    <span class="string">'com.android.inputmethod.latin/.LatinIME'</span>).</span><br><span class="line">    Android only.</span><br><span class="line">    返回当前输入法的包名</span><br><span class="line">用法 driver.active_ime_engine</span><br></pre></td></tr></table></figure>

<p><strong>37. toggle_location_services</strong><br>toggle_location_services(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Toggle the location services on the device. Android only.</span><br><span class="line">打开安卓设备上的位置定位设置</span><br><span class="line">用法 driver.toggle_location_services()</span><br></pre></td></tr></table></figure>

<p><strong>38.set_location</strong><br>set_location(self, latitude, longitude, altitude):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set</span> the location <span class="keyword">of</span> the device</span><br><span class="line">    设置设备的经纬度</span><br><span class="line">    :Args:</span><br><span class="line">     - latitude纬度 - <span class="built_in">String</span> or numeric value between <span class="number">-90.0</span> and <span class="number">90.00</span></span><br><span class="line">     - longitude经度 - <span class="built_in">String</span> or numeric value between <span class="number">-180.0</span> and <span class="number">180.0</span></span><br><span class="line">     - altitude海拔高度- <span class="built_in">String</span> or numeric value</span><br><span class="line">用法 driver.set_location(纬度，经度，高度)</span><br></pre></td></tr></table></figure>

<p><strong>39.tag_name</strong><br>tag_name(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">This element<span class="string">'s ``tagName`` property.</span></span><br><span class="line"><span class="string">返回元素的tagName属性</span></span><br><span class="line"><span class="string">经实践返回的是class name</span></span><br><span class="line"><span class="string">用法 element.tag_name()</span></span><br></pre></td></tr></table></figure>

<p><strong>40.text</strong><br>text(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The text <span class="keyword">of</span> the element.</span><br><span class="line">    返回元素的文本值</span><br><span class="line">用法 element.text</span><br></pre></td></tr></table></figure>

<p><strong>41.click</strong><br>click(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Clicks the element.</span><br><span class="line">  点击元素</span><br><span class="line">用法 element.click()</span><br></pre></td></tr></table></figure>

<p><strong>42.submit</strong><br>submit(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Submits a form.</span><br><span class="line">    提交表单</span><br><span class="line">用法 暂无</span><br></pre></td></tr></table></figure>

<p><strong>43.clear</strong><br>clear(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Clears the text <span class="keyword">if</span> it<span class="string">'s a text entry element.</span></span><br><span class="line"><span class="string">    清除输入的内容</span></span><br><span class="line"><span class="string">用法 element.clear()</span></span><br></pre></td></tr></table></figure>

<p><strong>44.get_attribute</strong><br>get_attribute(self, name):<br>详见 的<a href="https://testerhome.com/topics/2606" target="_blank" rel="noopener">超级链接</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Gets the given attribute or property <span class="keyword">of</span> the element.</span><br><span class="line"><span class="number">1</span>、获取 content-desc 的方法为 get_attribute(<span class="string">"name"</span>) ，而且还不能保证返回的一定是 content-desc （content-desc 为空时会返回 text 属性值）</span><br><span class="line"><span class="number">2</span>、get_attribute 方法不是我们在 uiautomatorviewer 看到的所有属性都能获取的（此处的名称均为使用 get_attribute 时使用的属性名称）：</span><br><span class="line">可获取的：</span><br><span class="line">字符串类型：</span><br><span class="line">name(返回 content-desc 或 text)</span><br><span class="line">text(返回 text)</span><br><span class="line">className(返回 <span class="class"><span class="keyword">class</span>，只有 <span class="title">API</span></span>=&gt;<span class="number">18</span> 才能支持)</span><br><span class="line">resourceId(返回 resource-id，只有 API=&gt;<span class="number">18</span> 才能支持)</span><br><span class="line">    This method will first <span class="keyword">try</span> to <span class="keyword">return</span> the value <span class="keyword">of</span> a property <span class="keyword">with</span> the</span><br><span class="line">    given name. If a property <span class="keyword">with</span> that name doesn<span class="string">'t exist, it returns the</span></span><br><span class="line"><span class="string">    value of the attribute with the same name. If there'</span>s no attribute <span class="keyword">with</span></span><br><span class="line">    that name, <span class="string">``</span>None<span class="string">``</span> is returned.</span><br><span class="line"></span><br><span class="line">    Values which are considered truthy, that is equals <span class="string">"true"</span> or <span class="string">"false"</span>,</span><br><span class="line">    are returned <span class="keyword">as</span> booleans.  All other non-<span class="string">``</span>None<span class="string">``</span> values are returned</span><br><span class="line">    <span class="keyword">as</span> strings.  For attributes or properties which <span class="keyword">do</span> not exist, <span class="string">``</span>None<span class="string">``</span></span><br><span class="line">    is returned.</span><br><span class="line"></span><br><span class="line">    :Args:</span><br><span class="line">        - name - Name <span class="keyword">of</span> the attribute/property to retrieve.</span><br><span class="line"></span><br><span class="line">    Example::</span><br><span class="line"></span><br><span class="line">        # Check if the "active" CSS class is applied to an element.</span><br><span class="line">        is_active = <span class="string">"active"</span> <span class="keyword">in</span> target_element.get_attribute(<span class="string">"class"</span>)</span><br><span class="line">用法 暂无</span><br></pre></td></tr></table></figure>

<p><strong>45.is_selected</strong><br>is_selected(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Returns whether the element is selected.</span><br><span class="line"></span><br><span class="line">    Can be used to check <span class="keyword">if</span> a checkbox or radio button is selected.</span><br><span class="line">返回元素是否选择。</span><br><span class="line">可以用来检查一个复选框或单选按钮被选中。</span><br><span class="line">用法 element.is_slected()</span><br></pre></td></tr></table></figure>

<p><strong>46.is_enabled</strong><br>is_enabled(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Returns whether the element is enabled.</span><br><span class="line">    返回元素是否可用True <span class="keyword">of</span> False</span><br><span class="line">用法 element.is_enabled()</span><br></pre></td></tr></table></figure>

<p><strong>47.find_element_by_id</strong><br>find_element_by_id(self, id_):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Finds element within <span class="keyword">this</span> element<span class="string">'s children by ID.</span></span><br><span class="line"><span class="string">    通过元素的ID定位元素</span></span><br><span class="line"><span class="string">    :Args:</span></span><br><span class="line"><span class="string">        - id_ - ID of child element to locate.</span></span><br><span class="line"><span class="string">用法 driver. find_element_by_id(“id”)</span></span><br></pre></td></tr></table></figure>

<p><strong>48. find_elements_by_id</strong><br>find_elements_by_id(self, id_):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Finds a list <span class="keyword">of</span> elements within <span class="keyword">this</span> element<span class="string">'s children by ID.</span></span><br><span class="line"><span class="string">    通过元素ID定位,含有该属性的所有元素</span></span><br><span class="line"><span class="string">    :Args:</span></span><br><span class="line"><span class="string">        - id_ - Id of child element to find.</span></span><br><span class="line"><span class="string">用法 driver. find_elements_by_id(“id”)</span></span><br></pre></td></tr></table></figure>

<p><strong>49. find_element_by_name 1.5以上的版本已弃用</strong><br>find_element_by_name(self, name):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Finds element within <span class="keyword">this</span> element<span class="string">'s children by name.</span></span><br><span class="line"><span class="string">     通过元素Name定位（元素的名称属性text）</span></span><br><span class="line"><span class="string">    :Args:</span></span><br><span class="line"><span class="string">        - name - name property of the element to find.</span></span><br><span class="line"><span class="string">用法 driver.find_element_by_name(“name”)</span></span><br><span class="line"><span class="string">替代方法 driver.find_element_by_xpath("//*[@text='</span>我的<span class="string">']")</span></span><br><span class="line"><span class="string">还有其它方法的话欢迎补充</span></span><br></pre></td></tr></table></figure>

<p><strong>50. find_elements_by_name</strong><br>find_elements_by_name(self, name):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Finds a list <span class="keyword">of</span> elements within <span class="keyword">this</span> element<span class="string">'s children by name.</span></span><br><span class="line"><span class="string">    通过元素Name定位（元素的名称属性text），含有该属性的所有元素</span></span><br><span class="line"><span class="string">    :Args:</span></span><br><span class="line"><span class="string">        - name - name property to search for.</span></span><br><span class="line"><span class="string">用法 driver.find_element_by_name(“name”)</span></span><br></pre></td></tr></table></figure>

<p><strong>51. find_element_by_link_text</strong><br>find_element_by_link_text(self, link_text):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Finds element within <span class="keyword">this</span> element<span class="string">'s children by visible link text.</span></span><br><span class="line"><span class="string">    通过元素可见链接文本定位</span></span><br><span class="line"><span class="string">    :Args:</span></span><br><span class="line"><span class="string">        - link_text - Link text string to search for.</span></span><br><span class="line"><span class="string">用法 driver.find_element_by_link_text(“text”)</span></span><br></pre></td></tr></table></figure>

<p><strong>52. find_elements_by_link_text</strong><br>find_element_by_link_text(self, link_text):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Finds a list <span class="keyword">of</span> elements within <span class="keyword">this</span> element<span class="string">'s children by visible link text</span></span><br><span class="line"><span class="string">    通过元素可见链接文本定位,含有该属性的所有元素</span></span><br><span class="line"><span class="string">    :Args:</span></span><br><span class="line"><span class="string">        - link_text - Link text string to search for.</span></span><br><span class="line"><span class="string">用法 driver.find_elements_by_link_text(“text”)</span></span><br></pre></td></tr></table></figure>

<p><strong>53. find_element_by_partial_link_text</strong><br>find_element_by_partial_link_text(self, link_text):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Finds element within <span class="keyword">this</span> element<span class="string">'s children by partially visible link text.</span></span><br><span class="line"><span class="string">    通过元素部分可见链接文本定位</span></span><br><span class="line"><span class="string">    :Args:</span></span><br><span class="line"><span class="string">        - link_text - Link text string to search for.</span></span><br><span class="line"><span class="string">driver. find_element_by_partial_link_text(“text”)</span></span><br></pre></td></tr></table></figure>

<p><strong>54. find_elements_by_partial_link_text</strong><br>find_elements_by_partial_link_text(self, link_text):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Finds a list <span class="keyword">of</span> elements within <span class="keyword">this</span> element<span class="string">'s children by link text.</span></span><br><span class="line"><span class="string">    通过元素部分可见链接文本定位,含有该属性的所有元素</span></span><br><span class="line"><span class="string">    :Args:</span></span><br><span class="line"><span class="string">        - link_text - Link text string to search for.</span></span><br><span class="line"><span class="string">driver. find_elements_by_partial_link_text(“text”)</span></span><br></pre></td></tr></table></figure>

<p><strong>55. find_element_by_tag_name</strong><br>find_element_by_tag_name(self, name):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Finds element within <span class="keyword">this</span> element<span class="string">'s children by tag name.</span></span><br><span class="line"><span class="string">    通过查找html的标签名称定位元素</span></span><br><span class="line"><span class="string">    :Args:</span></span><br><span class="line"><span class="string">        - name - name of html tag (eg: h1, a, span)</span></span><br><span class="line"><span class="string">用法  driver.find_element_by_tag_name(“name”)</span></span><br></pre></td></tr></table></figure>

<p><strong>56. find_elements_by_tag_name</strong><br>find_elements_by_tag_name(self, name):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Finds a list <span class="keyword">of</span> elements within <span class="keyword">this</span> element<span class="string">'s children by tag name.</span></span><br><span class="line"><span class="string">   通过查找html的标签名称定位所有元素</span></span><br><span class="line"><span class="string">    :Args:</span></span><br><span class="line"><span class="string">        - name - name of html tag (eg: h1, a, span)</span></span><br><span class="line"><span class="string">用法driver.find_elements_by_tag_name(“name”)</span></span><br></pre></td></tr></table></figure>

<p><strong>57. find_element_by_xpath</strong><br>find_element_by_xpath(self, xpath):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Finds element by xpath.</span><br><span class="line">    通过Xpath定位元素，详细方法可参阅http:<span class="comment">//www.w3school.com.cn/xpath/</span></span><br><span class="line">    :Args:</span><br><span class="line">        xpath - xpath <span class="keyword">of</span> element to locate.  <span class="string">"//input[@class='myelement']"</span></span><br><span class="line"></span><br><span class="line">    Note: The base path will be relative to <span class="keyword">this</span> element<span class="string">'s location.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    This will select the first link under this element.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    ::</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        myelement.find_elements_by_xpath(".//a")</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    However, this will select the first link on the page.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    ::</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        myelement.find_elements_by_xpath("//a")</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">用法 find_element_by_xpath(“//*”)</span></span><br></pre></td></tr></table></figure>

<p><strong>58. find_elements_by_xpath</strong><br>find_elements_by_xpath(self, xpath):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Finds elements within the element by xpath.</span><br><span class="line"></span><br><span class="line">    :Args:</span><br><span class="line">        - xpath - xpath locator string.</span><br><span class="line"></span><br><span class="line">    Note: The base path will be relative to <span class="keyword">this</span> element<span class="string">'s location.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    This will select all links under this element.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    ::</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        myelement.find_elements_by_xpath(".//a")</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    However, this will select all links in the page itself.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    ::</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        myelement.find_elements_by_xpath("//a")</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">用法find_elements_by_xpath(“//*”)</span></span><br></pre></td></tr></table></figure>

<p><strong>59. find_element_by_class_name</strong><br>find_element_by_class_name(self, name):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Finds element within <span class="keyword">this</span> element<span class="string">'s children by class name.</span></span><br><span class="line"><span class="string">    通过元素class name属性定位元素</span></span><br><span class="line"><span class="string">    :Args:</span></span><br><span class="line"><span class="string">        - name - class name to search for.</span></span><br><span class="line"><span class="string">用法 driver. find_element_by_class_name(“android.widget.LinearLayout”)</span></span><br></pre></td></tr></table></figure>

<p><strong>60. find_elements_by_class_name</strong><br>find_elements_by_class_name(self, name):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Finds a list <span class="keyword">of</span> elements within <span class="keyword">this</span> element<span class="string">'s children by class name.</span></span><br><span class="line"><span class="string">    通过元素class name属性定位所有含有该属性的元素</span></span><br><span class="line"><span class="string">    :Args:</span></span><br><span class="line"><span class="string">        - name - class name to search for.</span></span><br><span class="line"><span class="string">用法 driver. find_elements_by_class_name(“android.widget.LinearLayout”)</span></span><br></pre></td></tr></table></figure>

<p><strong>61. find_element_by_css_selector</strong><br>find_element_by_css_selector(self, css_selector):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Finds element within <span class="keyword">this</span> element<span class="string">'s children by CSS selector.</span></span><br><span class="line"><span class="string">    通过CSS选择器定位元素</span></span><br><span class="line"><span class="string">    :Args:</span></span><br><span class="line">        - css_selector - CSS selctor string, ex: 'a.nav#home'</span><br></pre></td></tr></table></figure>

<p><strong>62.send_keys</strong><br>send_keys(self, /*value):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Simulates typing into the element.</span><br><span class="line">    在元素中模拟输入（开启appium自带的输入法并配置了appium输入法后，可以输入中英文）</span><br><span class="line">    :Args:</span><br><span class="line">        - value - A string <span class="keyword">for</span> typing, or setting form fields.  For setting</span><br><span class="line">        file inputs, <span class="keyword">this</span> could be a local file path.</span><br><span class="line"></span><br><span class="line">    Use <span class="keyword">this</span> to send simple key events or to fill out form fields::</span><br><span class="line"></span><br><span class="line">        form_textfield = driver.find_element_by_name(<span class="string">'username'</span>)</span><br><span class="line">        form_textfield.send_keys(<span class="string">"admin"</span>)</span><br><span class="line"></span><br><span class="line">    This can also be used to <span class="keyword">set</span> file inputs.</span><br><span class="line"></span><br><span class="line">    ::</span><br><span class="line"></span><br><span class="line">        file_input = driver.find_element_by_name('profilePic')</span><br><span class="line">        file_input.send_keys("path/to/profilepic.gif")</span><br><span class="line">        # Generally it's better to wrap the file path in one of the methods</span><br><span class="line">        # in os.path to return the actual path to support cross OS testing.</span><br><span class="line">        # file_input.send_keys(os.path.abspath("path/to/profilepic.gif"))</span><br><span class="line">driver.element.send_keys(“中英”)</span><br></pre></td></tr></table></figure>

<p><strong>63. is_displayed</strong><br>is_displayed(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Whether the element is visible to a user.    </span><br><span class="line">此元素用户是否可见。简单地说就是隐藏元素和被控件挡住无法操作的元素（仅限 Selenium，appium是否实现了类似功能不是太确定）这一项都会返回 False</span><br><span class="line"></span><br><span class="line">用法 driver.element.is_displayed()</span><br></pre></td></tr></table></figure>

<p><strong>64. location_once_scrolled_into_view</strong><br>location_once_scrolled_into_view(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">""</span><span class="string">"THIS PROPERTY MAY CHANGE WITHOUT WARNING. Use this to discover</span></span><br><span class="line"><span class="string">   where on the screen an element is so that we can click it. This method</span></span><br><span class="line"><span class="string">   should cause the element to be scrolled into view.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Returns the top lefthand corner location on the screen, or ``None`` if</span></span><br><span class="line"><span class="string">   the element is not visible.</span></span><br><span class="line"><span class="string">   暂不知道用法</span></span><br><span class="line"><span class="string">   "</span><span class="string">""</span></span><br></pre></td></tr></table></figure>

<p><strong>65.size</strong><br>size(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">The size <span class="keyword">of</span> the element.</span><br><span class="line">获取元素的大小（高和宽）</span><br><span class="line"></span><br><span class="line">new_size[<span class="string">"height"</span>] = size[<span class="string">"height"</span>]</span><br><span class="line">new_size[<span class="string">"width"</span>] = size[<span class="string">"width"</span>]</span><br><span class="line"></span><br><span class="line">用法 driver.element.size</span><br></pre></td></tr></table></figure>

<p><strong>66. value_of_css_property</strong><br>value_of_css_property(self, property_name):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">The value <span class="keyword">of</span> a CSS property.</span><br><span class="line">CSS属性</span><br><span class="line"></span><br><span class="line">用法 暂不知</span><br></pre></td></tr></table></figure>

<p><strong>67.location</strong><br>location(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">The location <span class="keyword">of</span> the element <span class="keyword">in</span> the renderable canvas.</span><br><span class="line">    获取元素左上角的坐标</span><br><span class="line"></span><br><span class="line">用法 driver.element.location</span><br><span class="line"><span class="string">''</span><span class="string">'返回element的x坐标, int类型'</span><span class="string">''</span></span><br><span class="line">driver.element.location.get(<span class="string">'x'</span>)</span><br><span class="line"><span class="string">''</span><span class="string">'返回element的y坐标, int类型'</span><span class="string">''</span></span><br><span class="line">driver.element.location.get(<span class="string">'y'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>68.rect</strong><br>rect(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A dictionary <span class="keyword">with</span> the size and location <span class="keyword">of</span> the element.</span><br><span class="line">    元素的大小和位置的字典</span><br></pre></td></tr></table></figure>

<p><strong>69. get_screenshot_as_base64</strong><br>screenshot_as_base64(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Gets the screenshot <span class="keyword">of</span> the current <span class="built_in">window</span> <span class="keyword">as</span> a base64 encoded string</span><br><span class="line">        which is useful <span class="keyword">in</span> embedded images <span class="keyword">in</span> HTML.</span><br><span class="line"> 获取当前元素的截图为Base64编码的字符串,在HTML中嵌入的图像</span><br><span class="line"> :Usage:</span><br><span class="line">     img_b64 = element.get_screenshot_as_base64</span><br></pre></td></tr></table></figure>

<p><strong>70.execute_script</strong><br>execute_script(self, script, /*args):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Synchronously Executes JavaScript <span class="keyword">in</span> the current <span class="built_in">window</span>/frame.</span><br><span class="line">在当前窗口/框架（特指 Html 的 iframe ）同步执行 javascript 代码。你可以理解为如果这段代码是睡眠<span class="number">5</span>秒，这五秒内主线程的 javascript 不会执行</span><br><span class="line">    :Args:</span><br><span class="line">     - script: The JavaScript to execute.</span><br><span class="line">     - \*args: Any applicable <span class="built_in">arguments</span> <span class="keyword">for</span> your JavaScript.</span><br><span class="line"></span><br><span class="line">    :Usage:</span><br><span class="line">        driver.execute_script(<span class="string">'document.title'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>71.execute_async_script</strong><br>execute_async_script(self, script, /*args):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Asynchronously Executes JavaScript <span class="keyword">in</span> the current <span class="built_in">window</span>/frame.</span><br><span class="line">插入 javascript 代码，只是这个是异步的，也就是如果你的代码是睡眠<span class="number">5</span>秒，那么你只是自己在睡，页面的其他 javascript 代码还是照常执行</span><br><span class="line">    :Args:</span><br><span class="line">     - script: The JavaScript to execute.</span><br><span class="line">     - \*args: Any applicable <span class="built_in">arguments</span> <span class="keyword">for</span> your JavaScript.</span><br><span class="line"></span><br><span class="line">    :Usage:</span><br><span class="line">        driver.execute_async_script(<span class="string">'document.title'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>72.current_url</strong><br>current_url(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Gets the URL <span class="keyword">of</span> the current page.</span><br><span class="line">    获取当前页面的网址。</span><br><span class="line">    :Usage:</span><br><span class="line">        driver.current_url</span><br><span class="line">用法 driver.current_url</span><br></pre></td></tr></table></figure>

<p><strong>73. page_source</strong><br>page_source(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Gets the source <span class="keyword">of</span> the current page.</span><br><span class="line">获取当前页面的源。</span><br><span class="line">:Usage:</span><br><span class="line">    driver.page_source</span><br></pre></td></tr></table></figure>

<p><strong>74.close</strong><br>close(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Closes the current <span class="built_in">window</span>.</span><br><span class="line">关闭当前窗口</span><br><span class="line">:Usage:</span><br><span class="line">    driver.close()</span><br></pre></td></tr></table></figure>

<p><strong>75.quit</strong><br>quit(self):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Quits the driver and closes every associated <span class="built_in">window</span>.</span><br><span class="line">退出脚本运行并关闭每个相关的窗口连接</span><br><span class="line">:Usage:</span><br><span class="line">    driver.quit()</span><br></pre></td></tr></table></figure>

<p><strong>76.get_screenshot_as_file</strong><br>get_screenshot_as_file(self, filename):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Gets the screenshot <span class="keyword">of</span> the current <span class="built_in">window</span>. Returns False <span class="keyword">if</span> there is</span><br><span class="line">       any IOError, <span class="keyword">else</span> returns True. Use full paths <span class="keyword">in</span> your filename.</span><br><span class="line">  截取当前窗口的截图，如果有写入错误会返回False，其它返回True</span><br><span class="line">filename 使用绝对路径</span><br><span class="line">    :Args:</span><br><span class="line">     - filename: The full path you wish to save your screenshot to.</span><br><span class="line"></span><br><span class="line">    :Usage:</span><br><span class="line">       driver.get_screenshot_as_file(<span class="string">'c:/foo.png'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>77.get_window_size</strong><br>get_window_size(self, filename):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Gets the width and height <span class="keyword">of</span> the current <span class="built_in">window</span>.</span><br><span class="line">获取当前屏幕的分辨率（长和宽）</span><br><span class="line">  :Usage:</span><br><span class="line">      driver.get_window_size()</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://blog.windanchaos.tech/2017/09/09/jenkins%E5%90%8E%E5%8F%B0%E6%89%A7%E8%A1%8Cshell%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windanchaos">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="宇弦">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/09/09/jenkins%E5%90%8E%E5%8F%B0%E6%89%A7%E8%A1%8Cshell%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">jenkins后台执行shell命令</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-09-09 18:28:56" itemprop="dateCreated datePublished" datetime="2017-09-09T18:28:56+08:00">2017-09-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-11-23 23:11:57" itemprop="dateModified" datetime="2019-11-23T23:11:57+08:00">2019-11-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95%E7%9A%84%E6%A1%86%E6%9E%B6%E5%92%8C%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">测试的框架和技术</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/09/09/jenkins%E5%90%8E%E5%8F%B0%E6%89%A7%E8%A1%8Cshell%E5%91%BD%E4%BB%A4/" class="post-meta-item leancloud_visitors" data-flag-title="jenkins后台执行shell命令" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2017/09/09/jenkins%E5%90%8E%E5%8F%B0%E6%89%A7%E8%A1%8Cshell%E5%91%BD%E4%BB%A4/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/09/09/jenkins%E5%90%8E%E5%8F%B0%E6%89%A7%E8%A1%8Cshell%E5%91%BD%E4%BB%A4/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>参考官网：<br><a href="https://wiki.jenkins.io/display/JENKINS/ProcessTreeKiller" target="_blank" rel="noopener">https://wiki.jenkins.io/display/JENKINS/ProcessTreeKiller</a></p>
<p>原理：启动的时候给命令，让jenkins不终结自己的进程衍生的进程。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -Dhudson.util.ProcessTree.disable=<span class="literal">true</span> -jar jenkins.war</span><br></pre></td></tr></table></figure>

<p>还有一种办法直接在<strong>shell（要后台执行命令前）</strong>加入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BUILD_ID=dontKillMe</span><br></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BUILD_ID=dontKillMe nohup java -Xms246m -Xmx500m -jar ?????.jar &gt; log.log &amp;</span><br></pre></td></tr></table></figure>

<p>下面是jenkins执行前和后的日志对比</p>
<p>执行前：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+ echo ???? deploy finished<span class="string">'</span></span><br><span class="line"><span class="string">???? deploy finished</span></span><br><span class="line"><span class="string">+ nohup java -Xms246m -Xmx500m -jar ????.jar</span></span><br></pre></td></tr></table></figure>

<p>执行后</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+ echo ???? deploy finished<span class="string">'</span></span><br><span class="line"><span class="string">???? deploy finished</span></span><br><span class="line"><span class="string">+ BUILD_ID=dontKillMe</span></span><br><span class="line"><span class="string">+ nohup java -Xms246m -Xmx500m -jar ????.jar</span></span><br></pre></td></tr></table></figure>

<p>然后进程就可以在服务器上看到了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://blog.windanchaos.tech/2017/09/08/%E8%AE%B0%E4%B8%80%E6%AC%A1%E8%A7%A3%E5%86%B3%E7%BA%BF%E4%B8%8A%E5%8E%8B%E5%8A%9B%E7%9A%84%E8%BF%87%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windanchaos">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="宇弦">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/09/08/%E8%AE%B0%E4%B8%80%E6%AC%A1%E8%A7%A3%E5%86%B3%E7%BA%BF%E4%B8%8A%E5%8E%8B%E5%8A%9B%E7%9A%84%E8%BF%87%E7%A8%8B/" class="post-title-link" itemprop="url">记一次解决线上压力的过程</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-09-08 08:15:04" itemprop="dateCreated datePublished" datetime="2017-09-08T08:15:04+08:00">2017-09-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-11-23 23:11:57" itemprop="dateModified" datetime="2019-11-23T23:11:57+08:00">2019-11-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">性能测试</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/09/08/%E8%AE%B0%E4%B8%80%E6%AC%A1%E8%A7%A3%E5%86%B3%E7%BA%BF%E4%B8%8A%E5%8E%8B%E5%8A%9B%E7%9A%84%E8%BF%87%E7%A8%8B/" class="post-meta-item leancloud_visitors" data-flag-title="记一次解决线上压力的过程" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2017/09/08/%E8%AE%B0%E4%B8%80%E6%AC%A1%E8%A7%A3%E5%86%B3%E7%BA%BF%E4%B8%8A%E5%8E%8B%E5%8A%9B%E7%9A%84%E8%BF%87%E7%A8%8B/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/09/08/%E8%AE%B0%E4%B8%80%E6%AC%A1%E8%A7%A3%E5%86%B3%E7%BA%BF%E4%B8%8A%E5%8E%8B%E5%8A%9B%E7%9A%84%E8%BF%87%E7%A8%8B/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>业务描述：用户扫二维码，关注公众号后推送微信图文消息。用户分享自己的二维码拉取下线关注公众号。拉满N个后，可获得低价商品购买权。这里面涉及：新建账户、修改账户、关系绑定、获取微信鉴权（）</p>
<p>问题抛出：生产环境，用户反馈，无法收到微信推送的消息，或者等了很久都没有收到消息，商城访问速度慢。</p>
<p>云里雾里的解决：<br>研发到我这里，查看日志。日志提供的信息有限，无法判断问题所在。通过在线监控各项指标，发现网络带宽和数据库服务器的机器资源占满。于是，紧急升级带宽和服务器配置。问题有所缓解但是没有得到解决。<br>于是，在java源代码里增加日志代码，在线查看log。发现线程配置使用的是默认，于是增加配置（包括jdbc连接数、spring的多线程配置）。和消息无关的几个服务，都在硬件升级和jdbc扩容后无压力。<br>监控日志过程中可以观察到（打印出了当前active的线程数，maxPoolSize的线程数），在服务刚启动的时候，线程的创建和销毁速度正常，active慢慢增加到50左右，出现严重的线程等待。也就是多不管corePoolSize线程数设置多少（线程慢慢增大到设置的200—-&gt;500—-&gt;1000），达到以后，销毁速度是没有什么改善的。也就是说生产速度比消费速度快很多（约5:1）的关系。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 核心线程数 --&gt;</span><br><span class="line">        &lt;property name=<span class="string">"corePoolSize"</span> value=<span class="string">"50"</span> /&gt;</span><br><span class="line">        &lt;!-- 最大线程数 --&gt;</span><br><span class="line">        &lt;property name=<span class="string">"maxPoolSize"</span> value=<span class="string">"100"</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>日志，发现部分日志之间的时间间隔很长，15s以上。<br>在有限日志的情况下，增加日志密度，重新发布。每一个业务执行过程都打标记日志。<br>最后定位到性能瓶颈2个地方：<br>1、微信鉴权，取用户微信昵称头像<br>2、发送微信文本消息</p>
<p>暂未解决：<br>1、高流量下的数据库死锁<br>2、高流量下的数据错误</p>
<p>基于以上内容，临时处理为：<br>1、去掉创建用户过程中的取用户微信昵称头像动作，仅取用户唯一标识openid<br>2、发送微信文本消息的动作，改为异步方式。</p>
<p>完成以上改造后，日志监控active的线程数稳定在10左右。恢复正常，用户体验得到改善。</p>
<p>本次处理过程全程参与，虽然只是提供一些支持（用我电脑，协助查日志，参与分析，发布代码），但是有所体会。如下：<br>1、计算线程处理是顺序的，所以一个任务线放入一个线程中处理，子任务的任何一个性能瓶颈都会影响这个任务线程的处理性能；<br>2、没有强逻辑关联的任务，可以异步处理。比如发消息交给active-mq。<br>3、定位性能瓶颈光靠猜测是没有实际意义的，需要足够多的log日志去定位和判断。<br>4、核心和重点业务性能测试要提前做。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://blog.windanchaos.tech/2017/08/10/python%E9%98%9F%E5%88%97%E5%9C%A8Queue%EF%BC%8CCollection%20%E7%9A%84%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windanchaos">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="宇弦">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/08/10/python%E9%98%9F%E5%88%97%E5%9C%A8Queue%EF%BC%8CCollection%20%E7%9A%84%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">python队列在Queue，Collection 的基础</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-08-10 07:26:38" itemprop="dateCreated datePublished" datetime="2017-08-10T07:26:38+08:00">2017-08-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-11-23 23:11:57" itemprop="dateModified" datetime="2019-11-23T23:11:57+08:00">2019-11-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">python编程语言</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/08/10/python%E9%98%9F%E5%88%97%E5%9C%A8Queue%EF%BC%8CCollection%20%E7%9A%84%E5%9F%BA%E7%A1%80/" class="post-meta-item leancloud_visitors" data-flag-title="python队列在Queue，Collection 的基础" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2017/08/10/python%E9%98%9F%E5%88%97%E5%9C%A8Queue%EF%BC%8CCollection%20%E7%9A%84%E5%9F%BA%E7%A1%80/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/08/10/python%E9%98%9F%E5%88%97%E5%9C%A8Queue%EF%BC%8CCollection%20%E7%9A%84%E5%9F%BA%E7%A1%80/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>以下内容分别来自：<br><a href="http://www.cnblogs.com/itogo/p/5635629.html" target="_blank" rel="noopener">http://www.cnblogs.com/itogo/p/5635629.html</a><br><a href="http://blog.csdn.net/u010504064/article/details/71173041" target="_blank" rel="noopener">http://blog.csdn.net/u010504064/article/details/71173041</a></p>
<p>Queue是python标准库中的线程安全的队列（FIFO）实现,提供了一个适用于多线程编程的先进先出的数据结构，即队列，用来在生产者和消费者线程之间的信息传递</p>
<h2 id="基本FIFO队列"><a href="#基本FIFO队列" class="headerlink" title="基本FIFO队列"></a>基本FIFO队列</h2><p><strong>class Queue.Queue(maxsize=0)</strong></p>
<p>FIFO即First in First Out,先进先出。Queue提供了一个基本的FIFO容器，使用方法很简单,maxsize是个整数，指明了队列中能存放的数据个数的上限。一旦达到上限，插入会导致阻塞，直到队列中的数据被消费掉。如果maxsize小于或者等于0，队列大小没有限制。</p>
<p>举个栗子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line"></span><br><span class="line">q = Queue.Queue()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">    q.put(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> not q.empty():</span><br><span class="line">    print q.get()</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>

<h2 id="LIFO队列"><a href="#LIFO队列" class="headerlink" title="LIFO队列"></a>LIFO队列</h2><p><strong>class Queue.LifoQueue(maxsize=0)</strong></p>
<p>LIFO即Last in First Out,后进先出。与栈的类似，使用也很简单,maxsize用法同上</p>
<p>再举个栗子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line"></span><br><span class="line">q = Queue.LifoQueue()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">    q.put(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> not q.empty():</span><br><span class="line">    print q.get()</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>可以看到仅仅是将</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Queue.Quenu类</span><br></pre></td></tr></table></figure>
<p>替换为</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Queue.LifiQueue类</span><br></pre></td></tr></table></figure>

<h2 id="优先级队列"><a href="#优先级队列" class="headerlink" title="优先级队列"></a>优先级队列</h2><p><strong>class Queue.PriorityQueue(maxsize=0)</strong></p>
<p>构造一个优先队列。maxsize用法同上。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">class Job(object):</span><br><span class="line">    def __init__(self, priority, description):</span><br><span class="line">        self.priority = priority</span><br><span class="line">        self.description = description</span><br><span class="line">        print <span class="string">'Job:'</span>,description</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    def __cmp__(self, other):</span><br><span class="line">        <span class="keyword">return</span> cmp(self.priority, other.priority)</span><br><span class="line"></span><br><span class="line">q = Queue.PriorityQueue()</span><br><span class="line"></span><br><span class="line">q.put(Job(<span class="number">3</span>, <span class="string">'level 3 job'</span>))</span><br><span class="line">q.put(Job(<span class="number">10</span>, <span class="string">'level 10 job'</span>))</span><br><span class="line">q.put(Job(<span class="number">1</span>, <span class="string">'level 1 job'</span>))</span><br><span class="line"></span><br><span class="line">def process_job(q):</span><br><span class="line">    <span class="keyword">while</span> True:</span><br><span class="line">        next_job = q.get()</span><br><span class="line">        print <span class="string">'for:'</span>, next_job.description</span><br><span class="line">        q.task_done()</span><br><span class="line"></span><br><span class="line">workers = [threading.Thread(target=process_job, args=(q,)),</span><br><span class="line">        threading.Thread(target=process_job, args=(q,))</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> w <span class="keyword">in</span> workers:</span><br><span class="line">    w.setDaemon(True)</span><br><span class="line">    w.start()</span><br><span class="line"></span><br><span class="line">q.join()</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Job: level <span class="number">3</span> job</span><br><span class="line">Job: level <span class="number">10</span> job</span><br><span class="line">Job: level <span class="number">1</span> job</span><br><span class="line"><span class="keyword">for</span>: level <span class="number">1</span> job</span><br><span class="line"><span class="keyword">for</span>: level <span class="number">3</span> job</span><br><span class="line"><span class="keyword">for</span>: job: level <span class="number">10</span> job</span><br></pre></td></tr></table></figure>

<h2 id="一些常用方法"><a href="#一些常用方法" class="headerlink" title="一些常用方法"></a>一些常用方法</h2><p>意味着之前入队的一个任务已经完成。由队列的消费者线程调用。每一个get()调用得到一个任务，接下来的task_done()调用告诉队列该任务已经处理完毕。</p>
<p>如果当前一个join()正在阻塞，它将在队列中的所有任务都处理完时恢复执行（即每一个由put()调用入队的任务都有一个对应的task_done()调用）。</p>
<p>阻塞调用线程，直到队列中的所有任务被处理掉。</p>
<p>只要有数据被加入队列，未完成的任务数就会增加。当消费者线程调用task_done()（意味着有消费者取得任务并完成任务），未完成的任务数就会减少。当未完成的任务数降到0，join()解除阻塞。</p>
<p>将item放入队列中。</p>
<p>其非阻塞版本为</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">put_nowait</span><br></pre></td></tr></table></figure>
<p>等同于</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">put(item, False)</span><br></pre></td></tr></table></figure>

<p>从队列中移除并返回一个数据。block跟timeout参数同</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">put</span><br></pre></td></tr></table></figure>
<p>方法</p>
<p>其非阻塞方法为｀get_nowait()｀相当与</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">get</span>(False)</span><br></pre></td></tr></table></figure>

<p>如果队列为空，返回True,反之返回False</p>
<p>＝＝＝＝＝＝＝＝＝＝＝＝这＝＝＝是＝＝＝分＝＝＝割＝＝＝线＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝</p>
<h1 id="Cellection"><a href="#Cellection" class="headerlink" title="Cellection"></a>Cellection</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env python</span></span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"># @Time    : 2017-4-25 10:33</span><br><span class="line"># @Author  : coderManFans</span><br><span class="line"># @Site    : Python 高级数据结构模块</span><br><span class="line">#            1.Python中的高级数据结构包括</span><br><span class="line">#            Collections,Array,Heapq,Bisect,Weakref,Copy,Pprint</span><br><span class="line">#            2.Collections模块包含了内建类型之外的一些有用的工具，如Counter,defaultdict,OrderDict</span><br><span class="line">#              deque以及nametuple.其中Counter,deque以及defaultdict是最常用的类</span><br><span class="line">#</span><br><span class="line"># @File    : collectionsDemo.py</span><br><span class="line"># @Software: PyCharm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#1.Collections</span><br><span class="line"></span><br><span class="line">#1.1 Counter()</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">Counter继承了dict类，其中seq为可迭代对象。接收seq,并以字典的形式返回seq</span></span><br><span class="line"><span class="string">中每个元素（hashable）出现的次数</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Counter的应用场景：</span></span><br><span class="line"><span class="string">1.统计一个单词在给定序列中一共出现了多少次</span></span><br><span class="line"><span class="string">2.统计给定序列中不同单词出现的次数</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line">list1 = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="number">23</span>,<span class="number">23</span>,<span class="string">'a'</span>,<span class="string">'d'</span>,<span class="string">'b'</span>,<span class="string">'e'</span>]</span><br><span class="line">counter1 = Counter(list1)</span><br><span class="line">print(counter1)</span><br><span class="line">print(counter1[<span class="string">'a'</span>])</span><br><span class="line"></span><br><span class="line">#1.1.1统计不同单词的数目</span><br><span class="line">print(len(<span class="keyword">set</span>(list1)))</span><br><span class="line"></span><br><span class="line">#1.1.2对统计结果进行分组 下面的方法表示分为4组，不填默认全部分组，以列表</span><br><span class="line">#存储，里面元素是tuple对象</span><br><span class="line">print(counter1.most_common(4))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#1.1.3 elements()获取Counter()生成对象的所有键名，重复的几个会全部打印</span><br><span class="line"># 该方法返回一个迭代器对象</span><br><span class="line">keylist = counter1.elements()</span><br><span class="line">print(keylist)</span><br><span class="line">print(list(keylist))</span><br><span class="line"></span><br><span class="line">#1.1.4 update(x) 更新计数器 把x的内容加入到原来计数器中</span><br><span class="line">#x可以作为字符串，列表，元组，集合，但是不能作为字典，纯数字，否则报错</span><br><span class="line">list2 = ['a','d','f','q',2,3,2,3,4]</span><br><span class="line">print(counter1)</span><br><span class="line">counter1.update(list2)</span><br><span class="line">print(counter1)</span><br><span class="line"></span><br><span class="line">#1.1.5 substract(x) 更新计数器 把x代表的次数减少1，默认减少1,(通过字典形式指定一次减少的个数)</span><br><span class="line">#，不存在则减为-1，依次减，作用与update()相反</span><br><span class="line"></span><br><span class="line">counter1.subtract('a')</span><br><span class="line">print(counter1)</span><br><span class="line">counter1.subtract(['a','b',2])</span><br><span class="line">print(counter1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#1.2 Deque</span><br><span class="line">'''</span><br><span class="line">Deque是一种由队列结构扩展而来的双端队列（double-ended queue），队列元素</span><br><span class="line">能够在队列两端添加或者删除。因此还被称为头尾连接列表（head-tail linked list）,当然还有另一个特殊的数据结构也实现了这个</span><br><span class="line"></span><br><span class="line">Deque 支持线程安全的，经过优化的append和pop操作，在队列两端的相关操作都能够</span><br><span class="line">达到近乎O(1)的时间复杂度。虽然list也支持类似的操作，但是它是</span><br><span class="line">对定长列表的操作表现很不错，而当遇到pop(0)和insert(o,v)</span><br><span class="line">这样既改变了列表的长度又改变其元素位置的操作时，其复杂度就变为O(n)了、</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">from collections import deque</span><br><span class="line"></span><br><span class="line">#1.2.1 定义一个双向队列（循环队列）</span><br><span class="line">de1 = deque()</span><br><span class="line">#默认往双向队列右边加入元素</span><br><span class="line">de1.append('asdf')</span><br><span class="line">print(de1)</span><br><span class="line"></span><br><span class="line">#1.2.2 往双向队列左边加入一个元素</span><br><span class="line">de1.appendleft('2323')</span><br><span class="line">de1.appendleft(232324)</span><br><span class="line">de1.appendleft('2323')</span><br><span class="line">de1.appendleft(23)</span><br><span class="line">de1.appendleft(23)</span><br><span class="line">print(de1)</span><br><span class="line"></span><br><span class="line">#1.2.3 返回指定元素在双向队列中的个数</span><br><span class="line">count1 = de1.count(23)</span><br><span class="line">print(count1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#1.2.4 反转双向队列</span><br><span class="line">print(de1)</span><br><span class="line">de1.reverse()</span><br><span class="line">print(de1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#1.2.5 向双向队列中指定位置插入一个元素</span><br><span class="line">de1.insert(2,'abced')</span><br><span class="line">print(de1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#1.2.6 用一个迭代器从右边扩展双向队列，相当于从右边批量插入</span><br><span class="line">de1.extend(['a','adfasdf','asdf','asdfasd23'])</span><br><span class="line">print(de1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#1.2.7 用一个迭代器从左边扩展双向队列，相当于从左边批量插入</span><br><span class="line">de1.extendleft(['2','3','2',22,';',23,233.002,23.22])</span><br><span class="line">print(de1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#1.2.8 返回从左到右遇到的第一个value的索引</span><br><span class="line">index1 = de1.index('3')</span><br><span class="line">print(index1)</span><br><span class="line"></span><br><span class="line">#1.2.9 浅复制双向队列</span><br><span class="line">de2 = de1.copy()</span><br><span class="line">de3 = de2</span><br><span class="line">de2.append('----asdfasdfa-sdf-asd-f')</span><br><span class="line">print(de3)</span><br><span class="line">print(de2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#1.2.10 队列的左旋转，右旋转</span><br><span class="line">#默认向右旋转n步（默认n = 1）,n是负数则向左旋转</span><br><span class="line">print(de1)</span><br><span class="line">de1.rotate(2)</span><br><span class="line">print(de1)</span><br><span class="line"></span><br><span class="line">#1.2.11 删除并返回右边的一个元素</span><br><span class="line">val1 = de1.pop()</span><br><span class="line">print(val1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#1.2.12 删除并返回左边的一个元素</span><br><span class="line">val2 = de1.popleft()</span><br><span class="line">print(val2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#1.2.13 删除第一次出现的值</span><br><span class="line">de1.remove('2')</span><br><span class="line">print(de1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#1.2.14 清空队列中的数据</span><br><span class="line">de1.clear()</span><br><span class="line">print(de1)</span><br><span class="line">#------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#1.3 collections 中的 defaultDict</span><br><span class="line">'''</span><br><span class="line">该类型除了在处理不存在的键的操作之外与普通的字典完全相同。当查找一个</span><br><span class="line">不存在的键的操作发生时，它的default_factory会被调用，提供一个默认的值，</span><br><span class="line">并且将这对键值存储下来。其他的参数同普通的字典方法dict()一致，</span><br><span class="line">一个defaultdict的实例同内建dict一样拥有同样的操作</span><br><span class="line">defaultdict与dict唯一的区别就是初始化默认值的问题，</span><br><span class="line">defaultdict的默认值可以是空list[],或者<span class="keyword">set</span>&#123;&#125;,或者<span class="number">0</span></span><br><span class="line"></span><br><span class="line">defaultdict与dict.setdefault(key,[,<span class="keyword">default</span>])是等价的，区别是复制的时候会被覆盖</span><br><span class="line">其他使用与dict没有区别</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">defaultdict对象在当你希望使用它存放追踪数据的时候很有用。</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">from collections import defaultdict</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">list3 = [('</span>yellow<span class="string">',1),('</span>blue<span class="string">',2),('</span>yellow<span class="string">',3),('</span>blue<span class="string">',3)]</span></span><br><span class="line"><span class="string">dict1 = defaultdict(list)</span></span><br><span class="line"><span class="string">print(dict1)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">for k,v in list3:</span></span><br><span class="line"><span class="string">    dict1[k].append(v)</span></span><br><span class="line"><span class="string">print(dict1)</span></span><br><span class="line"><span class="string">dict2 = defaultdict(set)</span></span><br><span class="line"><span class="string">print(dict2)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">dict3 = &#123;&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#-----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#1.4 collections 有序字典 orderedDict的使用</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">orderedDict是collections中的一个包，能够记录字典元素的插入顺序，常常和排序函数一起使用</span><br><span class="line">来生成一个排序的字典</span><br><span class="line">默认的dict是不保证顺序的，但是该类可以保证插入的顺序</span><br><span class="line"></span><br><span class="line">该对象里的元素是字典对象，如果其顺序不同，那么则Python会认为是两个不同的对象</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">from collections import OrderedDict</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">dict4 = &#123;'</span>ba1<span class="string">':3,'</span>aple<span class="string">':2,'</span>pear<span class="string">':23,'</span>orga<span class="string">':4&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#1.4.1 按照key排序</span></span><br><span class="line"><span class="string">orderdict1 = OrderedDict(sorted(dict4.items(),key = lambda  t:t[0]))</span></span><br><span class="line"><span class="string">print(orderdict1)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#1.4.2 按照value排序</span></span><br><span class="line"><span class="string">orderdict1 = OrderedDict(sorted(dict4.items(),key = lambda  t:t[1]))</span></span><br><span class="line"><span class="string">print(orderdict1)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">dict5 = &#123;'</span>a<span class="string">':1,'</span>c<span class="string">':2,'</span>b<span class="string">':3&#125;</span></span><br><span class="line"><span class="string">dict6 = &#123;'</span>b<span class="string">':3,'</span>a<span class="string">':1,'</span>c<span class="string">':2&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">print(dict5 == dict6)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#1.4.3 注意这种方式的初始化是保证顺序的</span></span><br><span class="line"><span class="string">orderdict2 = OrderedDict(dict5)</span></span><br><span class="line"><span class="string">orderdict3 = OrderedDict(dict6)</span></span><br><span class="line"><span class="string">print(orderdict2)</span></span><br><span class="line"><span class="string">print(orderdict3)</span></span><br><span class="line"><span class="string">print(orderdict3 == orderdict2)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">orderdict4 = OrderedDict()</span></span><br><span class="line"><span class="string">orderdict4['</span>a<span class="string">'] = 123</span></span><br><span class="line"><span class="string">orderdict4['</span>b<span class="string">'] = 13</span></span><br><span class="line"><span class="string">orderdict4['</span>d<span class="string">'] = 1</span></span><br><span class="line"><span class="string">orderdict5 = OrderedDict()</span></span><br><span class="line"><span class="string">orderdict5['</span>d<span class="string">'] = 1</span></span><br><span class="line"><span class="string">orderdict5['</span>b<span class="string">'] = 13</span></span><br><span class="line"><span class="string">orderdict5['</span>a<span class="string">'] = 123</span></span><br><span class="line"><span class="string">print(orderdict4)</span></span><br><span class="line"><span class="string">print(orderdict5)</span></span><br><span class="line"><span class="string">print(orderdict4 == orderdict5)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#1.4.4 有序删除 每次删除最后一个，相当于内存的栈存放，后进先出，pop()是指定元素进行删除</span></span><br><span class="line"><span class="string">dict7 = orderdict5.popitem()</span></span><br><span class="line"><span class="string">print(dict7)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">orderdict5['</span>h<span class="string">'] = '</span>asdfasdf<span class="string">'</span></span><br><span class="line"><span class="string">orderdict5['</span>e<span class="string">'] = '</span>asdfasdf<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#1.4.5 将指定键值移动到最后,也就是移动到最上面</span></span><br><span class="line"><span class="string">print(orderdict5)</span></span><br><span class="line"><span class="string">orderdict5.move_to_end('</span>h<span class="string">')</span></span><br><span class="line"><span class="string">print(orderdict5)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#1.4.6 设置默认键值</span></span><br><span class="line"><span class="string">orderdict5.setdefault('</span>k<span class="string">','</span>is <span class="keyword">default</span> value,key<span class="string">')</span></span><br><span class="line"><span class="string">print(orderdict5)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#---------------------------------------------------------------------------</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#1.5 namedtuple 可命名元组的使用方式</span></span><br><span class="line"><span class="string">from collections import namedtuple</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">namedtuple继承tuple对象，namedtuple创建一个和tuple类似的对象，而且对象可以通过属性名访问元素值</span><br><span class="line">tuple只通过索引去访问，namedtuple可以提供基于对象的方式通过属性名访问元素值</span><br><span class="line">每个元素都有自己的名字，类似于java的Bean，C语言中的struct。</span><br><span class="line">同样的，对象属性一旦确定则不可更改，tuple中的值一旦确定也不可更改</span><br><span class="line"></span><br><span class="line">但是在使用namedtuple的时候注意属性名不能使用Python的关键字，如:<span class="class"><span class="keyword">class</span> <span class="title">def</span>等。</span></span><br><span class="line"><span class="class">而且不能有重复的属性名称。</span></span><br><span class="line"><span class="class">如果有属性冲突的情况下，可以通过<span class="title">namedtuple</span>开启重命名模式</span></span><br><span class="line"><span class="class">'''</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">#1.5.1 初始化 下面的方式相当于创建了一个<span class="title">Person</span>类 里面有5个属性</span></span><br><span class="line"><span class="class"><span class="title">personObj</span> </span>= namedtuple(<span class="string">"person"</span>,<span class="string">'name age gender address money '</span>)</span><br><span class="line">print(type(personObj))</span><br><span class="line">print(personObj)</span><br><span class="line"></span><br><span class="line">Bob = personObj(name=<span class="string">'Bob'</span>,age=<span class="number">23</span>,gender=<span class="string">'nan'</span>,address=<span class="string">'beijing'</span>,money=<span class="number">30000.00</span>)</span><br><span class="line">#上面的代码相当于创建了一个Person对象，下面则是通过元组的方式打印该Person对象</span><br><span class="line">print(Bob)</span><br><span class="line">zhangsan = personObj(name=<span class="string">'zhangsan'</span>,age=<span class="number">40</span>,gender=<span class="string">'nan'</span>,address=<span class="string">'nanjing'</span>,money=<span class="number">303330.00</span>)</span><br><span class="line">#通过属性名之间访问到属性值</span><br><span class="line">print(zhangsan.address+<span class="string">"-----"</span>+zhangsan.gender+<span class="string">"----"</span>+zhangsan.name)</span><br><span class="line"></span><br><span class="line">#1.5.2 存在命名冲突的情况</span><br><span class="line">#通过设置重命名模式为True解决命名冲突的情况</span><br><span class="line">personObj2 = namedtuple(<span class="string">"person"</span>,<span class="string">'name age gender address money age '</span>,rename=True)</span><br><span class="line">#第二个冲突的属性名通过: _+indexNum的方式表示,设置值的时候要通过 _+indexNum=value的方式</span><br><span class="line">print(personObj2._fields)</span><br><span class="line"></span><br><span class="line">lisi = personObj2(name=<span class="string">'zhangsan'</span>,age=<span class="number">40</span>,gender=<span class="string">'nan'</span>,address=<span class="string">'nanjing'</span>,money=<span class="number">303330.00</span>,_5=<span class="number">30</span>)</span><br><span class="line">print(lisi)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://blog.windanchaos.tech/2017/07/26/%E4%B8%80%E4%B8%AA%E7%94%A8%E4%BA%8E%E7%BD%91%E7%AB%99%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E7%9A%84%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windanchaos">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="宇弦">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/26/%E4%B8%80%E4%B8%AA%E7%94%A8%E4%BA%8E%E7%BD%91%E7%AB%99%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E7%9A%84%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">一个用于网站自动化测试的生态系统实现</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-07-26 23:47:53" itemprop="dateCreated datePublished" datetime="2017-07-26T23:47:53+08:00">2017-07-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-11-23 23:11:57" itemprop="dateModified" datetime="2019-11-23T23:11:57+08:00">2019-11-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">自动化测试</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/07/26/%E4%B8%80%E4%B8%AA%E7%94%A8%E4%BA%8E%E7%BD%91%E7%AB%99%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E7%9A%84%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/" class="post-meta-item leancloud_visitors" data-flag-title="一个用于网站自动化测试的生态系统实现" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2017/07/26/%E4%B8%80%E4%B8%AA%E7%94%A8%E4%BA%8E%E7%BD%91%E7%AB%99%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E7%9A%84%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/07/26/%E4%B8%80%E4%B8%AA%E7%94%A8%E4%BA%8E%E7%BD%91%E7%AB%99%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E7%9A%84%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>以下内容插件的运用是关键。</p>
<p>这是我在从事网站自动化测试的工作当中构建出的一个“生态系统”。“生态系统”这个概念是我从公司的前辈身上学到的，他一直以来都认为自动化测试人员不应仅仅局限于编写测试代码，还应该让整个自动化测试的过程（测试代码的持续集成、分发、执行等）都自动化，形成一个“系统”，这个系统的自动化程度越高，自动化测试人员就越省力。</p>
<p>一、概念</p>
<p>这里我画了一张示意图：</p>
<p><a href="http://www.quweiji.com/upload/5/68/5685d4780c2ac0cb.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-5-68-5685d4780c2ac0cb_thumb.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>之所以称之为“生态系统”，是因为建成之后需要的人为干涉很少，其余的时间都是系统内部循环运作。作为自动化测试人员的你只需要提交代码，之后便可以在AutomationDashboard上看到运行的结果了，其余的事情都由系统内部消化。当然，结果的分析还是需要人来完成，机器还没有聪明到可以灵活分析出各种各样让case fail掉的原因。</p>
<p>我们可以把整个系统看作一个黑盒子，那么上面的图可以变成：</p>
<p><a href="http://www.quweiji.com/upload/4/eb/4eb06bc71639b3e8.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-4-eb-4eb06bc71639b3e8.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>实际上这里画的人不仅限于自动化测试人员，也可以是：</p>
<p>（1）产品的管理者，比如产品经理需要从自动化回归测试知道这次release有无推迟风险；</p>
<p>（2）团队的管理者，比如开发经理、QA经理需要从自动化的daily/weekly regression知道最近的代码质量如何；</p>
<p>（3）开发人员，他们也许会想通过quick regression（提交的产品代码被部署到测试环境之后运行的测试）知道自己刚提交的代码有没有破坏系统的基本功能；</p>
<p>（4）其他帮忙做自动化测试的开发人员、刚刚开始学习编写自动化测试代码的手动测试人员，他们不必关心生态系统的内部实现。</p>
<p>二、实现</p>
<p>说完概念，接下来该说说具体实现了。我这里讲的是我认为最适合我所测试的产品的实现，工具不止一种，方式不止一种。Jenkins可以用TeamCity或其它CI替换，git也可以是svn或tfs，AutomationDahsboard可以用.NET、SpringMVC、ROR等等实现，运行测试的slave可以是Windows/Linux/Mac（土豪！），总之选择一种最适合你所测试的产品的实现。还有一点就是自动化测试代码是用关键字驱动思想实现的，这是另外一个话题了，有时间另外写篇文。</p>
<p>好，进入正题。依次说说系统的每个重要组成部分吧：</p>
<p>1、SCM（Source Code Management）。我选的是git，可以是git服务器（公司自己搭建了一个git server），也可以是一个bare repo（<a href="http://www.saintsjd.com/2011/01/what-is-a-bare-git-repository/" target="_blank" rel="noopener">http://www.saintsjd.com/2011/01/what-is-a-bare-git-repository/</a>） 。</p>
<p>2、CI（continuous integration）。我选的是部署方便、插件丰富的Jenkins。</p>
<p>它的职责是：</p>
<p>（1）从git上取出代码，build（.NET对应msbuild，如果是ruby则不用build了，直接部署即可）；</p>
<p>（2）把build好的/*.dll部署（这里即是拷贝）到所有的slave上；</p>
<p>（3）启动或停止所有slave上的AutomationService（后面还会讲到AutomationService），从而控制测试的执行。</p>
<p>我在Jenkins的这些个job配置起来还是比较繁琐的，要细讲又可以另外写一篇文了。这里就特别提到两个很实用的插件吧：</p>
<p>（1）Parameterized Trigger Plugin（<a href="https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin" target="_blank" rel="noopener">https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin</a>）：可以在一个build step中触发其它project的build。</p>
<p><a href="http://www.quweiji.com/upload/9/20/92076ac63ecfcbee.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-9-20-92076ac63ecfcbee_thumb.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>它最有用的就是这个“Block until the triggered projects finish their builds”选项，勾上的话Jenkins就能在所有trigger的project完成build之后（而非仅仅trigger其它project的build，不等它们完成就继续下一个build step）再继续下一个build step，做到真正的依次执行每个build step。</p>
<p><a href="http://www.quweiji.com/upload/7/46/7460cee295c1d43f.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-7-46-7460cee295c1d43f_thumb.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>（2）NodeLabel Parameter Plugin（<a href="https://wiki.jenkins-ci.org/display/JENKINS/NodeLabel+Parameter+Plugin" target="_blank" rel="noopener">https://wiki.jenkins-ci.org/display/JENKINS/NodeLabel+Parameter+Plugin</a>）：在所有“Possible nodes”标有指定标签（“Label”）的Jenkins节点（就是Jenkins master或Jenkins slave）上触发指定project（被触发的project是参数化的）。</p>
<p>比如我有一个project叫“StartClassicROLATServiceOnAllNodes”，它有一个build step是这样设定的：</p>
<p><a href="http://www.quweiji.com/upload/0/a7/0a7a61bc505a247f.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-0-a7-0a7a61bc505a247f_thumb.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>再来看看“StartClassicROLATServiceOnASingleNode”这个project的设定：</p>
<p><a href="http://www.quweiji.com/upload/9/48/948fe5343cb3f585.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-9-48-948fe5343cb3f585_thumb.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>这个project有一个Node类型的参数，参数名“NodeX”与之前Label Factory中的“NodeX”对应，“Possible nodes”选的是“ALL”，那么列出的所有node（master、10.107.122.152、10.107.122.153、10.107.122.154）都在判断范围之内（判断其是否有“Node”标签，有则执行project）。</p>
<p>另外，列出的所有node我都为其加了一个“Node”标签。</p>
<p><a href="http://www.quweiji.com/upload/1/2b/12bbc34216ceec7e.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-1-2b-12bbc34216ceec7e_thumb.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>这样，当我trigger “StartClassicROLATServiceOnAllNodes”之后，就会在master、10.107.122.152、10.107.122.153、10.107.122.154这4个node上同时执行“StartClassicROLATServiceOnASingleNode”。</p>
<p>3、AutomationDashboard，这里姑且译作“自动化测试控制面板”吧。实际上它应该和Jenkins一起并称控制面板，不过因为Jenkins有API可以调用，所以想做的画两者也是可以统一成一个web界面的。这个dashboard完全是用.NET+IIS+SQLServer一点点从数据库设计构建、数据访问层、业务层、表现层做起来的，要细讲……额……又会是另外一篇文了（Oh man, not again!）。反正我觉得，虽然我是做自动化测试工作的，但不应该把自己局限于测试。为了更好地进行自动化测试，开发网站、安装配置虚拟机以及其它要用到的工具，都应该抽时间去学习、掌握。</p>
<p>好，来说说这个dashboard。这里只讲两个主要组成部分，一个网站（以下简称dashboard）、一个Windows Service（以下简称ATService）和一个console application（以下称ConsoleRunner）：</p>
<p>（1）dashboard，它的主要功能：</p>
<p>a、展示测试的运行状况：有多少正在运行/执行完毕，分别在哪台slave上执行等等。</p>
<p>b、通过call Jenkins的API来trigger Jenkins的job，间接控制测试的执行。</p>
<p>c、展示测试的结果：发生错误的是哪个case、出错时间、错误信息、代码回溯（stack trace）、甚至可以包含一张出错时的截图。</p>
<p>主要界面如下：</p>
<p>a、Summary，顾名思义是汇总信息，case有多少pass多少fail、case按分类每一类有多少等等。（其实这里我少做了一张很重要的图，就是coverage饼状图）</p>
<p><a href="http://www.quweiji.com/upload/d/0c/d0c9b7204712a2bb.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-d-0c-d0c9b7204712a2bb_thumb.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>b、Queue，测试队列，包含当前正在运行的、运行完的、等待运行的test fixture或test case（依据测试工具的不同，NUnit、JUnit、RSpec等，fixture的叫法可能不同，总之就是包含多个test case的集合）。可以启动、停止、终止（终止之后可以清空）测试执行或清空当前队列。</p>
<p><a href="http://www.quweiji.com/upload/a/97/a979de8cfeb88aec.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-a-97-a979de8cfeb88aec_thumb.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>c、TestCase，生态系统中的所有测试用例会展示在这里，可以看到它们最后一次执行的时间和状态（pass/fail），点击某条case可以跳转到该条case的所有test result。可以按状态（pass/fail/other）筛选用例，可以勾选部分用例重新执行、或重新执行所有fail的case。“Reload Test Cases”主要是考虑到/*.dll文件中的test case可能会在某次部署之后发生变化，需要重新加载。不过后来我修改了Jenkins里的job在每次部署之后都自动重新加载，所以这个按钮其实没什么用了。</p>
<p><a href="http://www.quweiji.com/upload/3/97/397ca1dce8f3cb30.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-3-97-397ca1dce8f3cb30_thumb.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>d、TestSuite，包含多个fixture的集合是一个suite。勾选多个suite点击“Run Suite”即可把这些suite中包含的fixture添加到Queue。</p>
<p><a href="http://www.quweiji.com/upload/b/21/b21eb7e5b328afcc.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-b-21-b21eb7e5b328afcc_thumb.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>这里的suite是对NUnit中的Category的一个补充，点击“New Suite”你可以任意选择fixture来组成自己想要的suite：</p>
<p><a href="http://www.quweiji.com/upload/a/39/a39bae01872d3669.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-a-39-a39bae01872d3669_thumb.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>e、TestResult，展示所有test case的运行结果，可以按test case id进行筛选，点击TC/#这一列的id就只显示这条case的结果。</p>
<p><a href="http://www.quweiji.com/upload/8/01/8016a81cf3c9f360.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-8-01-8016a81cf3c9f360_thumb.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>点右边的蓝色“i”图标可以跳到这条结果的详细页面，截图功能暂未启用，根据RunnerMessage和RunnerStackTrace可以知道报错的代码位置，进而尝试重现问题。</p>
<p><a href="http://www.quweiji.com/upload/9/a3/9a3672ba7cdd1f23.jpg" target="_blank" rel="noopener"><img src="/images/com-upload-9-a3-9a3672ba7cdd1f23_thumb.jpg.png" alt="一个用于网站自动化测试的生态系统实现" title="一个用于网站自动化测试的生态系统实现"></a></p>
<p>（2）ATService。这个Windows Service（slave都是Windows，稍后会讲）被安装到了每个slave上，用以向dashboard询问“现在有没有分配给我的test fixture/case？”，如果有且当前slave空闲的话就抓过来运行，运行完毕汇报结果。</p>
<p>还记得Queue（队列）吧？无论你在TestCase还是TestSuite页面挑选了test case/suite想要运行，都只是把它们添加到队列当中（准确地说就是往Queue这张数据库表中INSERT记录），而不会给它们分配slave。只有当Jenkins启动了slave上的ATService之后，ATService才会去Queue表中自己抓取（就是打上标记说这条fixture/case已经有主了，其它slave就不会再去抓）还没有运行过且没有分配有slave的test fixture/case。</p>
<p>（3）ConsoleRunner，最开始的那个图中没有画出来。这个console程序主要供Jenkins调用。Jenkins不是可以让job定时运行么？正好，定时调用这个console application，传几个参数，就可以在指定时间往Queue里填充fixture/case，然后再启动ATService开始执行测试。这样就能实现quick/daily/weekly/full regression的无人值守运行了。</p>
<p>4、Slave</p>
<p>我选择在Windows上运行测试：</p>
<p>（1）公司IT一般只提供Windows操作系统的虚拟机</p>
<p>（2）产品在Windows上的用户占绝大多数（其实这个有点废话，桌面操作系统Windows依然是世界王者。诚然，我自己业余时用Linux做开发，Mac在国内外也是相当流行的，但GoogleAnalytics显示的统计结果就是大部分访问都来自Windows。什么，你说iOS/Android？额……移动端现在仍然是产品的短板……）</p>
<p>如果选择Linux的话要注意下selenium webdriver的native event设定（<a href="http://code.google.com/p/selenium/wiki/AdvancedUserInteractions#Native_events_versus_synthetic_events" target="_blank" rel="noopener">http://code.google.com/p/selenium/wiki/AdvancedUserInteractions/#Native_events_versus_synthetic_events</a>）。</p>
<p>关于浏览器，Firefox、Chrome、IE皆可，webdriver的浏览器兼容性已经很不错了。浏览器兼容性是个有点头疼的问题，想支持很多浏览器的话有时会增加很多开发、测试成本，我一般在Firefox上跑就足够了。什么？数字？马桶？企鹅？您想多了，selenium官方不支持。</p>
<p>你能找到多少台slave来执行测试？多多益善哦！找不到那么多实体机就自己配虚拟机吧，分布式运行可以给你的自动化测试生态系统装上火箭！在更短的时间内运行完更多测试，从而更快地从测试中获得反馈！</p>
<p>嗯，差不多就这么多了。还有很多细节就留在之后的文中再说了。自我感觉这个生态系统还是有很多可以完善、增加的功能，而且这个实现方式、运作机制可能也并非适用于你所测试的产品，不过现在对于我测的产品来说是够用的了。</p>
<p>不管怎样实现，我想表达的核心观点是：</p>
<p>做自动化测试不要局限于自动化测试代码的编写，我们要自动化的不仅仅是manual test case，还应包括整个automation test的process！测试代码持续集成、部署（分发）、执行、结果展示，自动化的环节越多、越彻底，为你节约的时间就越多，你可以用这些节约的时间做更有意义的事情。人类发明计算机，用代码编写程序，其实就是一种自动化的过程。以前要靠手工劳动完成的现在都交给电脑做了——服务器不正是勤勤恳恳地重复执行着我们写好的程序么？构建自动化测试生态系统是同样的道理，因为机器能比人更可靠地完成重复劳动。</p>
<p>如果你还在手动拷贝/*.dll，还需要打开NUnit手动执行测试，还在1台机器上运行测试，那么，现在就是该提高生产力的时候了！</p>
<p>copy from:<a href="http://www.quweiji.com/%E4%B8%80%E4%B8%AA%E7%94%A8%E4%BA%8E%E7%BD%91%E7%AB%99%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E7%9A%84%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/" target="_blank" rel="noopener">一个用于网站自动化测试的生态系统实现</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="windanchaos"
    src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">windanchaos</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">96</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/windanchaos" title="GitHub &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;windanchaos" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://gitee.com/windanchaos" title="Gitee &amp;rarr; https:&#x2F;&#x2F;gitee.com&#x2F;windanchaos" rel="noopener" target="_blank"><i class="fa fa-fw fa-gitee"></i>Gitee</a>
      </span>
      <span class="links-of-author-item">
        <a href="/mailto:454722630@qq.com" title="E-Mail &amp;rarr; mailto:454722630@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/windanchaos" title="Weibo &amp;rarr; https:&#x2F;&#x2F;weibo.com&#x2F;windanchaos" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/windanchaos" title="CSDN &amp;rarr; https:&#x2F;&#x2F;blog.csdn.net&#x2F;windanchaos" rel="noopener" target="_blank"><i class="fa fa-fw fa-CSDN"></i>CSDN</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
  <div class="beian"><a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">备案/许可证编号 </a>
      <img src="http://www.beian.gov.cn/portal/download" style="display: inline-block;"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=19036728" rel="noopener" target="_blank">蜀ICP备19036728号 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">windanchaos</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.5.0
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>






  <script>
  function leancloudSelector(url) {
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = visitors.getAttribute('id').trim();
      var title = visitors.getAttribute('data-flag-title').trim();

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .then(() => {
                leancloudSelector(url).innerText = counter.time + 1;
              })
              .catch(error => {
                console.log('Failed to save visitor count', error);
              })
          } else {
              Counter('post', '/classes/Counter', { title: title, url: url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.log('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.log('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return element.getAttribute('id').trim();
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            leancloudSelector(url).innerText = time;
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.log('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=0indNw0niJU8jN2a1E43bDW7-gzGzoHsz')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method: method,
          headers: {
            'X-LC-Id': '0indNw0niJU8jN2a1E43bDW7-gzGzoHsz',
            'X-LC-Key': 'toErPcjDI3431WvXQVKoy0rC',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        const localhost = /http:\/\/(localhost|127.0.0.1|0.0.0.0)/;
        if (localhost.test(document.URL)) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>






        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  
















  

  


<script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(item => {
    return GUEST.includes(item);
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: '0indNw0niJU8jN2a1E43bDW7-gzGzoHsz',
    appKey: 'toErPcjDI3431WvXQVKoy0rC',
    placeholder: "Just go go",
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: 'zh-cn' || 'zh-cn',
    path: location.pathname,
    recordIP: false,
    serverURLs: ''
  });
}, window.Valine);
</script>

</body>
</html>
